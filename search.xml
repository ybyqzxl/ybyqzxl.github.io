<?xml version="1.0" encoding="utf-8"?>
<search>
  
    
    <entry>
      <title><![CDATA[Android çš„æ¶ˆæ¯æœºåˆ¶]]></title>
      <url>%2F2019%2F12%2F14%2FAndroid%20%E7%9A%84%E6%B6%88%E6%81%AF%E6%9C%BA%E5%88%B6%2F</url>
      <content type="text"><![CDATA[Android æ¶ˆæ¯æœºåˆ¶ä¸»è¦æŒ‡ Handler çš„è¿è¡Œæœºåˆ¶åŠ Handler æ‰€é™„å¸¦çš„ MessageQueue å’Œ Looper çš„å·¥ä½œè¿‡ç¨‹ã€‚å…¶ä½œç”¨æ˜¯å°†ä¸€ä¸ªä»»åŠ¡åˆ‡æ¢åˆ°æŸä¸ªæŒ‡å®šçš„çº¿ç¨‹ä¸­åŽ»æ‰§è¡Œã€‚ é¦–å…ˆåˆ†æžä¸‹ ThreadLocal ThreadLocal å·¥ä½œåŽŸç†ThreadLocal æ˜¯çº¿ç¨‹å†…éƒ¨çš„æ•°æ®å­˜å‚¨ç±»ï¼Œå¯ä»¥æŒ‡å®šçº¿ç¨‹ä¸­çš„å­˜å‚¨æ•°æ®ï¼Œä¸åŒçº¿ç¨‹æŒæœ‰è‡ªå·±çš„æ•°æ®ã€‚ä½¿ç”¨åœºæ™¯ï¼š æŸäº›æ•°æ®å·²çº¿ç¨‹ä¸ºä½œç”¨åŸŸä¸”ä¸åŒçº¿ç¨‹å…·æœ‰ä¸åŒçš„æ•°æ®å‰¯æœ¬ã€‚ 123456789101112131415161718192021final ThreadLocal&lt;Boolean&gt; mThreadLocal = new ThreadLocal&lt;&gt;();mThreadLocal.set(true);System.out.println(Thread.currentThread().getName() + &quot;threadLocal: &quot; + mThreadLocal.get());new Thread() &#123; @Override public void run() &#123; mThreadLocal.set(false); System.out.println(Thread.currentThread().getName() + &quot;threadLocal: &quot; + mThreadLocal.get()); &#125;&#125;.start();new Thread() &#123; @Override public void run() &#123; System.out.println(Thread.currentThread().getName() + &quot;threadLocal: &quot; + mThreadLocal.get()); &#125;&#125;.start(); æŸ¥çœ‹æ‰“å°æ—¥å¿—ä¸º mainthreadLocal: trueThread-0threadLocal: falseThread-1threadLocal: null å¯ä»¥å‘çŽ°ï¼Œä½¿ç”¨çš„æ˜¯åŒä¸€ä¸ª ThreadLocal å¯¹è±¡ï¼Œä½†æ˜¯ä¸»çº¿ç¨‹å’Œçº¿ç¨‹1ä¸­çš„å¸ƒå°”å€¼æ˜¯ä¸ç›¸åŒçš„ï¼ŒåŒæ—¶çº¿ç¨‹2ç”±äºŽæ²¡æœ‰è®¾ç½®ï¼Œå› æ­¤æ‰“å°ä¸º nullã€‚ThreadLocal å†…éƒ¨ä¼šä»Žå„è‡ªçš„çº¿ç¨‹ä¸­å–å‡º ThreadLocalMapï¼Œç„¶åŽæ ¹æ®ç´¢å¼•åŽ»æŸ¥æ‰¾å¯¹åº”çš„ value å€¼ã€‚ç”±äºŽæ¯ä¸ªçº¿ç¨‹ä¸­éƒ½ä¼šæœ‰ä¸€ä¸ª ThreadLocalMapï¼Œå› æ­¤çº¿ç¨‹ä¹‹é—´èŽ·å–çš„æ•°æ®äº’ä¸å¹²æ‰°ã€‚ ThreadLocal å†…éƒ¨å®žçŽ° set æ–¹æ³•ï¼š 12345678public void set(T value) &#123; Thread t = Thread.currentThread(); ThreadLocalMap map = getMap(t); if (map != null) map.set(this, value); else createMap(t, value);&#125; é¦–å…ˆä»Žå½“å‰çš„ Thread ä¸­æ‹¿åˆ° ThreadLocalMap å¯¹è±¡ï¼Œå¦‚æžœä¸ºç©ºåˆ™åˆ›å»ºä¸€ä¸ªæ–°çš„ ThreadLocalMap å¯¹è±¡ï¼Œç„¶åŽå°†æ•°æ®å­˜å…¥ï¼Œä¸ä¸ºç©ºåˆ™ç›´æŽ¥èµ‹å€¼ã€‚å…¶ä¸­ ThreadLocalMap æ˜¯ä¸€ä¸ªç±»ä¼¼äºŽ Map çš„é›†åˆï¼Œå…¶ä¿å­˜ç€ä»¥è‡ªå·±ä¸º key çš„æ•°æ®ï¼Œæºç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132private void set(ThreadLocal&lt;?&gt; key, Object value) &#123; // We don&apos;t use a fast path as with get() because it is at // least as common to use set() to create new entries as // it is to replace existing ones, in which case, a fast // path would fail more often than not. Entry[] tab = table; int len = tab.length; int i = key.threadLocalHashCode &amp; (len-1); for (Entry e = tab[i]; e != null; e = tab[i = nextIndex(i, len)]) &#123; ThreadLocal&lt;?&gt; k = e.get(); if (k == key) &#123; e.value = value; return; &#125; if (k == null) &#123; replaceStaleEntry(key, value, i); return; &#125; &#125; tab[i] = new Entry(key, value); int sz = ++size; if (!cleanSomeSlots(i, sz) &amp;&amp; sz &gt;= threshold) rehash();&#125; å¯ä»¥å‘çŽ°ï¼Œç›¸åŒçš„ key åˆ™æ›¿æ¢ï¼Œå¦åˆ™åœ¨åŽé¢è¿½åŠ ã€‚ getæ–¹æ³• 12345678910111213public T get() &#123; Thread t = Thread.currentThread(); ThreadLocalMap map = getMap(t); if (map != null) &#123; ThreadLocalMap.Entry e = map.getEntry(this); if (e != null) &#123; @SuppressWarnings(&quot;unchecked&quot;) T result = (T)e.value; return result; &#125; &#125; return setInitialValue();&#125; ä¸Ž set æ–¹æ³•ç±»ä¼¼ï¼Œä»Ž ThreadLocalMap ä¸­èŽ·å–å€¼ï¼Œå¦‚æžœæ‰¾åˆ°åˆ™è¿”å›žï¼Œå¦åˆ™è°ƒç”¨ setInitialValue() æ–¹æ³•ï¼ŒæŸ¥çœ‹å…¶æºç ä¸ºï¼š 12345678910private T setInitialValue() &#123; T value = initialValue(); Thread t = Thread.currentThread(); ThreadLocalMap map = getMap(t); if (map != null) map.set(this, value); else createMap(t, value); return value;&#125; ç›¸å½“äºŽåˆ›å»ºä¸€ä¸ªå€¼ï¼Œå…¶ä¸­ä¼šé€šè¿‡ initalValue() åˆå§‹åŒ– valueï¼ŒæŸ¥çœ‹æ–¹æ³•ä¸ºï¼š 123protected T initialValue() &#123; return null;&#125; å¯ä»¥å‘çŽ°ï¼Œåˆå§‹å€¼ä¸º nullï¼Œè¿™å°±å¯ä»¥ç†è§£ä¸Šè¿°ä¾‹å­ä¸­ä¸ºä»€ä¹ˆçº¿ç¨‹2 ä¸­è¿”å›žå€¼ä¸º nullã€‚ æ¶ˆæ¯æœºåˆ¶è®²å®Œ ThreadLocal å¯ä»¥è®²æ¶ˆæ¯æœºåˆ¶åŽŸç†ï¼Œæ¶ˆæ¯æœºåˆ¶æ˜¯é€šè¿‡é€šè¿‡ Handler.sendMessage æˆ– post() æ–¹æ³•åŽ»å‘é€ä¸€ä¸ªæ¶ˆæ¯ï¼Œæ¶ˆæ¯å­˜å‚¨åœ¨æ¶ˆæ¯é˜Ÿåˆ— MessageQueue ä¸­ï¼Œç„¶åŽé€šè¿‡ Looper ä¸æ–­çš„å¾ªçŽ¯å–å‡ºæ¶ˆæ¯äº¤ç»™ Handler åŽ»å¤„ç†ã€‚ é¦–å…ˆä»‹ç» MessageQueue MessageQueueMessageQueue ä¸»è¦åŒ…å«æ’å…¥å’Œè¯»å–ä¸¤ä¸ªæ“ä½œï¼ŒåŒæ—¶åœ¨è¯»å–è¿‡ç¨‹ä¸­ä¹Ÿä¼šåˆ é™¤å“åº”çš„ Messageã€‚ è¯»å–æ“ä½œï¼šenqueueMessage() å‘æ¶ˆæ¯é˜Ÿåˆ—ä¸­æ’å…¥ä¸€æ¡æ•°æ®ï¼Œé€šè¿‡é“¾è¡¨æ¥ç»´æŠ¤ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253boolean enqueueMessage(Message msg, long when) &#123; if (msg.target == null) &#123; throw new IllegalArgumentException(&quot;Message must have a target.&quot;); &#125; if (msg.isInUse()) &#123; throw new IllegalStateException(msg + &quot; This message is already in use.&quot;); &#125; synchronized (this) &#123; if (mQuitting) &#123; IllegalStateException e = new IllegalStateException( msg.target + &quot; sending message to a Handler on a dead thread&quot;); Log.w(TAG, e.getMessage(), e); msg.recycle(); return false; &#125; msg.markInUse(); msg.when = when; Message p = mMessages; boolean needWake; if (p == null || when == 0 || when &lt; p.when) &#123; // New head, wake up the event queue if blocked. msg.next = p; mMessages = msg; needWake = mBlocked; &#125; else &#123; // Inserted within the middle of the queue. Usually we don&apos;t have to wake // up the event queue unless there is a barrier at the head of the queue // and the message is the earliest asynchronous message in the queue. needWake = mBlocked &amp;&amp; p.target == null &amp;&amp; msg.isAsynchronous(); Message prev; for (;;) &#123; prev = p; p = p.next; if (p == null || when &lt; p.when) &#123; break; &#125; if (needWake &amp;&amp; p.isAsynchronous()) &#123; needWake = false; &#125; &#125; msg.next = p; // invariant: p == prev.next prev.next = msg; &#125; // We can assume mPtr != 0 because mQuitting is false. if (needWake) &#123; nativeWake(mPtr); &#125; &#125; return true; &#125; å¯ä»¥çœ‹å‡ºå…¶é€šè¿‡å•é“¾è¡¨çš„å½¢å¼æ’å…¥ä¸€æ¡ Messageã€‚ è¯»å–æ“ä½œï¼šnext() : 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354Message next() &#123; // Return here if the message loop has already quit and been disposed. // This can happen if the application tries to restart a looper after quit // which is not supported. final long ptr = mPtr; if (ptr == 0) &#123; return null; &#125; int pendingIdleHandlerCount = -1; // -1 only during first iteration int nextPollTimeoutMillis = 0; for (;;) &#123; if (nextPollTimeoutMillis != 0) &#123; Binder.flushPendingCommands(); &#125; nativePollOnce(ptr, nextPollTimeoutMillis); synchronized (this) &#123; // Try to retrieve the next message. Return if found. final long now = SystemClock.uptimeMillis(); Message prevMsg = null; Message msg = mMessages; if (msg != null &amp;&amp; msg.target == null) &#123; // Stalled by a barrier. Find the next asynchronous message in the queue. do &#123; prevMsg = msg; msg = msg.next; &#125; while (msg != null &amp;&amp; !msg.isAsynchronous()); &#125; if (msg != null) &#123; if (now &lt; msg.when) &#123; // Next message is not ready. Set a timeout to wake up when it is ready. nextPollTimeoutMillis = (int) Math.min(msg.when - now, Integer.MAX_VALUE); &#125; else &#123; // Got a message. mBlocked = false; if (prevMsg != null) &#123; prevMsg.next = msg.next; &#125; else &#123; mMessages = msg.next; &#125; msg.next = null; if (DEBUG) Log.v(TAG, &quot;Returning message: &quot; + msg); msg.markInUse(); return msg; &#125; &#125; else &#123; // No more messages. nextPollTimeoutMillis = -1; &#125; ....... &#125; &#125; å¯ä»¥å‘çŽ°ï¼Œå…¶ä¸ºä¸€ä¸ªæ— é™å¾ªçŽ¯æ–¹æ³•ï¼Œå½“æ²¡æœ‰æ¶ˆæ¯æ—¶ä¼šé˜»å¡žï¼Œå½“æœ‰æ¶ˆæ¯åˆ°æ¥æ—¶åˆ™ä¼šè¿”å›žæ¶ˆæ¯ï¼Œå¹¶ç§»é™¤ã€‚ LooperLooper æ˜¯æ¶ˆæ¯æœºåˆ¶ä¸­çš„é‡è¦è§’è‰²ï¼Œå®ƒä¼šä¸€ç›´ä»Ž MessageQueue ä¸­å–æ¶ˆæ¯ï¼Œå…¶å†…éƒ¨ä¼šæž„å»º MessageQueue æ¶ˆæ¯é˜Ÿåˆ—ã€‚ 1234private Looper(boolean quitAllowed) &#123; mQueue = new MessageQueue(quitAllowed); mThread = Thread.currentThread();&#125; å½“åœ¨å­çº¿ç¨‹ä¸­ä½¿ç”¨ Looper æ—¶å¾—éœ€è¦è°ƒç”¨ Looper çš„ prepare æ–¹æ³•ï¼š 123456private static void prepare(boolean quitAllowed) &#123; if (sThreadLocal.get() != null) &#123; throw new RuntimeException(&quot;Only one Looper may be created per thread&quot;); &#125; sThreadLocal.set(new Looper(quitAllowed));&#125; å…¶ä¸­ Looper å†…éƒ¨å­˜åœ¨ ThreadLocal å¯¹è±¡ï¼Œè¿™æ ·ä¿è¯æ¯ä¸ªçº¿ç¨‹ä¸­çš„åªæœ‰ä¸€ä¸ªå¯¹åº”çš„ Looperã€‚é€šè¿‡ æ—¶å€™ä¸Šè¿°åˆ†æž ThreadLocal åŽŸç†å¯ä»¥çŸ¥é“ï¼Œå…¶ä½™çº¿ç¨‹ä¸ä¼šæ‹¿åˆ°éžè‡ªå·±çº¿ç¨‹çš„ Looperã€‚å½“åœ¨å­çº¿ç¨‹ä¸­è°ƒç”¨å®Œ prepare() æ–¹æ³•åŽï¼Œå…¶å¹¶ä¸ä¼šæ­£å¸¸å·¥ä½œï¼Œéœ€è¦è°ƒç”¨ loop() æ–¹æ³•åŽ»å¼€å¯å¾ªçŽ¯ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899public static void loop() &#123; final Looper me = myLooper(); if (me == null) &#123; throw new RuntimeException(&quot;No Looper; Looper.prepare() wasn&apos;t called on this thread.&quot;); &#125; final MessageQueue queue = me.mQueue; // Make sure the identity of this thread is that of the local process, // and keep track of what that identity token actually is. Binder.clearCallingIdentity(); final long ident = Binder.clearCallingIdentity(); // Allow overriding a threshold with a system prop. e.g. // adb shell &apos;setprop log.looper.1000.main.slow 1 &amp;&amp; stop &amp;&amp; start&apos; final int thresholdOverride = SystemProperties.getInt(&quot;log.looper.&quot; + Process.myUid() + &quot;.&quot; + Thread.currentThread().getName() + &quot;.slow&quot;, 0); boolean slowDeliveryDetected = false; for (;;) &#123; Message msg = queue.next(); // might block if (msg == null) &#123; // No message indicates that the message queue is quitting. return; &#125; // This must be in a local variable, in case a UI event sets the logger final Printer logging = me.mLogging; if (logging != null) &#123; logging.println(&quot;&gt;&gt;&gt;&gt;&gt; Dispatching to &quot; + msg.target + &quot; &quot; + msg.callback + &quot;: &quot; + msg.what); &#125; final long traceTag = me.mTraceTag; long slowDispatchThresholdMs = me.mSlowDispatchThresholdMs; long slowDeliveryThresholdMs = me.mSlowDeliveryThresholdMs; if (thresholdOverride &gt; 0) &#123; slowDispatchThresholdMs = thresholdOverride; slowDeliveryThresholdMs = thresholdOverride; &#125; final boolean logSlowDelivery = (slowDeliveryThresholdMs &gt; 0) &amp;&amp; (msg.when &gt; 0); final boolean logSlowDispatch = (slowDispatchThresholdMs &gt; 0); final boolean needStartTime = logSlowDelivery || logSlowDispatch; final boolean needEndTime = logSlowDispatch; if (traceTag != 0 &amp;&amp; Trace.isTagEnabled(traceTag)) &#123; Trace.traceBegin(traceTag, msg.target.getTraceName(msg)); &#125; final long dispatchStart = needStartTime ? SystemClock.uptimeMillis() : 0; final long dispatchEnd; try &#123; msg.target.dispatchMessage(msg); dispatchEnd = needEndTime ? SystemClock.uptimeMillis() : 0; &#125; finally &#123; if (traceTag != 0) &#123; Trace.traceEnd(traceTag); &#125; &#125; if (logSlowDelivery) &#123; if (slowDeliveryDetected) &#123; if ((dispatchStart - msg.when) &lt;= 10) &#123; Slog.w(TAG, &quot;Drained&quot;); slowDeliveryDetected = false; &#125; &#125; else &#123; if (showSlowLog(slowDeliveryThresholdMs, msg.when, dispatchStart, &quot;delivery&quot;, msg)) &#123; // Once we write a slow delivery log, suppress until the queue drains. slowDeliveryDetected = true; &#125; &#125; &#125; if (logSlowDispatch) &#123; showSlowLog(slowDispatchThresholdMs, dispatchStart, dispatchEnd, &quot;dispatch&quot;, msg); &#125; if (logging != null) &#123; logging.println(&quot;&lt;&lt;&lt;&lt;&lt; Finished to &quot; + msg.target + &quot; &quot; + msg.callback); &#125; // Make sure that during the course of dispatching the // identity of the thread wasn&apos;t corrupted. final long newIdent = Binder.clearCallingIdentity(); if (ident != newIdent) &#123; Log.wtf(TAG, &quot;Thread identity changed from 0x&quot; + Long.toHexString(ident) + &quot; to 0x&quot; + Long.toHexString(newIdent) + &quot; while dispatching to &quot; + msg.target.getClass().getName() + &quot; &quot; + msg.callback + &quot; what=&quot; + msg.what); &#125; msg.recycleUnchecked(); &#125;&#125; å¯ä»¥å‘çŽ°ï¼Œå…¶ä¼šä¸€ç›´å¾ªçŽ¯ï¼Œé™¤éžå½“ MessageQueue ä¸­ message ä¸º null æ‰ä¼šè·³å‡ºå¾ªçŽ¯ï¼Œå…¶ä¸­è¿˜ä¼šè°ƒç”¨ msg.target.dispatchMessage(msg) æ¥äº¤ç»™å‘é€ message çš„ handler è¿›è¡Œå¤„ç†ã€‚è¯¥æ–¹æ³•çš„æ‰§è¡Œæ˜¯åœ¨åˆ›å»º Handler çš„ Looper ä¸­æ‰§è¡Œçš„ï¼Œå› æ­¤åœ¨è¿™é‡Œå®Œæˆäº†çº¿ç¨‹çš„åˆ‡æ¢ã€‚ Handler çš„å·¥ä½œåŽŸç†é¦–å…ˆä»‹ç» Handler çš„ä½¿ç”¨æ–¹å¼ï¼š 1234567891011121314151617private Handler mHandler = new Handler()&#123; @Override public void handleMessage(Message msg) &#123; super.handleMessage(msg); System.out.println(msg.obj); &#125;&#125;;Thread thread = new Thread() &#123; @Override public void run() &#123; Message message = Message.obtain(); message.obj = &quot;Hello&quot;; mHandler.sendMessage(message); &#125; &#125;; å¯ä»¥å‘çŽ° Handler çš„ä¸»è¦å·¥ä½œæ˜¯ å‘é€æ¶ˆæ¯ å’Œ æŽ¥å—æ¶ˆæ¯ï¼Œå‘é€æ¶ˆæ¯æœ‰ post å’Œ send æ–¹æ³•ï¼š1.send ç­‰æ–¹æ³•ï¼š sendMessage(Message msg) sendEmptyMessage(int what) sendEmptyMessageAtTime(int what, long uptimeMillis) sendEmptyMessageDelayed(int what, long delayMillis)2.post ç­‰æ–¹æ³•ï¼š post(Runnable r) postAtTime(Runnable r, long uptimeMillis) postDelayed(Runnable r, long delayMillis)ç­‰æ¶ˆæ¯ï¼ŒæŸ¥çœ‹ api å¯ä»¥å‘çŽ°å…¶ä¸­æœ€åŽéƒ½ä¼šè°ƒç”¨åˆ° sendMessageAtTime(Message msg, long uptimeMillis)ï¼Œåªä¸è¿‡ä¸åŒçš„æ˜¯ post ç³»åˆ—æ–¹æ³•å‚æ•°ä¸º Runnableï¼Œå…¶ä¼šèµ‹å€¼åˆ° Message çš„ callback ä¸­ã€‚ 12345678910public boolean sendMessageAtTime(Message msg, long uptimeMillis) &#123; MessageQueue queue = mQueue; if (queue == null) &#123; RuntimeException e = new RuntimeException( this + &quot; sendMessageAtTime() called with no mQueue&quot;); Log.w(&quot;Looper&quot;, e.getMessage(), e); return false; &#125; return enqueueMessage(queue, msg, uptimeMillis);&#125; è€Œ enqueueMessage æ–¹æ³•ä¼šè°ƒç”¨åˆ° MessageQueue ä¸­çš„ enqueueMessage æ–¹æ³•ï¼Œä»Žè€Œè¿›è¡Œä¸Šè¿°è®²åˆ°çš„æ¶ˆæ¯é˜Ÿåˆ—çš„æ’å…¥ã€‚ 1234567private boolean enqueueMessage(MessageQueue queue, Message msg, long uptimeMillis) &#123; msg.target = this; if (mAsynchronous) &#123; msg.setAsynchronous(true); &#125; return queue.enqueueMessage(msg, uptimeMillis);&#125; æ’å…¥æ¶ˆæ¯åŽï¼Œé€šè¿‡ Looper.loop æ–¹æ³•è°ƒç”¨åˆ° MessageQueue.next æ–¹æ³•å°†æ¶ˆæ¯å–å‡ºï¼Œç„¶åŽé€šè¿‡ msg.target.dispatchMessage è¿›è¡Œå¤„ç†æ¶ˆæ¯ï¼Œå¯ä»¥å‘çŽ° msg.target å°±æ˜¯å‘é€è¯¥æ¶ˆæ¯çš„ Handlerã€‚Handler ä¸­ dispatchMessage æ–¹æ³•å¦‚ä¸‹ï¼š 123456789101112public void dispatchMessage(Message msg) &#123; if (msg.callback != null) &#123; handleCallback(msg); &#125; else &#123; if (mCallback != null) &#123; if (mCallback.handleMessage(msg)) &#123; return; &#125; &#125; handleMessage(msg); &#125;&#125; é¦–å…ˆæ˜¯ msg.callback ä¸ä¸ºç©ºï¼Œå³ä½¿ç”¨ post ç³»åˆ—æ–¹æ³•å‘é€çš„æ¶ˆæ¯ï¼Œåˆ™ä¼šè°ƒç”¨åˆ° handleCallback(msg) æ–¹æ³•ï¼š 123private static void handleCallback(Message message) &#123; message.callback.run();&#125; å¯ä»¥çœ‹åˆ°ç”±äºŽå…¶ callback ä¸º Runnable æ‰€ä»¥ç›´æŽ¥è°ƒç”¨ run æ–¹æ³•å¤„ç†ã€‚å½“ Handler ä¸­ä¸ä¸ºç©ºæ—¶ï¼Œä¼šè°ƒç”¨ mCallback ä¸­çš„ handleMessage æ–¹æ³•ï¼Œå…¶ä¸­ mCallback æ˜¯åœ¨åˆ›å»º Handler æ—¶ä¼ å…¥çš„ï¼Œå…¶æ˜¯æŽ¥å£ï¼š 1234567public interface Callback &#123; /** * @param msg A &#123;@link android.os.Message Message&#125; object * @return True if no further handling is desired */ public boolean handleMessage(Message msg);&#125; å¦‚æžœ mCallback ä¸ºç©ºåˆ™ä¼šèµ°åˆ° Handler ä¸­çš„ handleMessage æ–¹æ³•ï¼Œç”±æ­¤å¯ä»¥çœ‹åˆ°æ•´ä¸ª Handler çš„åŸºæœ¬æµç¨‹ã€‚ Handler çš„æž„é€ æ–¹æ³•å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223public Handler() &#123; this(null, false);&#125;public Handler(Callback callback, boolean async) &#123; if (FIND_POTENTIAL_LEAKS) &#123; final Class&lt;? extends Handler&gt; klass = getClass(); if ((klass.isAnonymousClass() || klass.isMemberClass() || klass.isLocalClass()) &amp;&amp; (klass.getModifiers() &amp; Modifier.STATIC) == 0) &#123; Log.w(TAG, &quot;The following Handler class should be static or leaks might occur: &quot; + klass.getCanonicalName()); &#125; &#125; mLooper = Looper.myLooper(); if (mLooper == null) &#123; throw new RuntimeException( &quot;Can&apos;t create handler inside thread &quot; + Thread.currentThread() + &quot; that has not called Looper.prepare()&quot;); &#125; mQueue = mLooper.mQueue; mCallback = callback; mAsynchronous = async;&#125; é€šè¿‡æŸ¥çœ‹ Handler çš„æž„é€ æ–¹æ³•å¯ä»¥çœ‹åˆ°ä¼šè°ƒç”¨ Looper.myLooper æ‹¿åˆ°å½“å‰çº¿ç¨‹çš„ Looperï¼Œå½“ Looper ä¸ºç©ºæ—¶ä¼šæŠ¥é”™ï¼Œå› æ­¤å½“åœ¨å­çº¿ç¨‹è°ƒç”¨æ—¶ï¼Œéœ€è¦åˆ›å»º Looper å¹¶å¼€å¯å¾ªçŽ¯ã€‚ é‚£ä¹ˆä¸ºä»€ä¹ˆä¸»çº¿ç¨‹ä¸­ä¸éœ€è¦åˆ›å»º Looper å‘¢ï¼ŒåŽŸå› æ˜¯åœ¨ ActivityThread ä¸­çš„ main æ–¹æ³•ä¸­å¸®æˆ‘ä»¬ç”Ÿäº§äº†ä¸»çº¿ç¨‹ä¸­çš„ looperï¼š 123456789101112131415161718192021222324public static void main(String[] args) &#123; ...... Looper.prepareMainLooper(); ........ ActivityThread thread = new ActivityThread(); thread.attach(false, startSeq); if (sMainThreadHandler == null) &#123; sMainThreadHandler = thread.getHandler(); &#125; if (false) &#123; Looper.myLooper().setMessageLogging(new LogPrinter(Log.DEBUG, &quot;ActivityThread&quot;)); &#125; // End of event ActivityThreadMain. Trace.traceEnd(Trace.TRACE_TAG_ACTIVITY_MANAGER); Looper.loop(); throw new RuntimeException(&quot;Main thread loop unexpectedly exited&quot;);&#125; å¯ä»¥çœ‹åˆ°é€šè¿‡ Looper.prepareMainLooper() åˆ›å»ºäº†ä¸»çº¿ç¨‹ä¸­çš„ Looperï¼Œå¹¶é€šè¿‡ Looper.loop() å¼€å¯äº†å¾ªçŽ¯ï¼Œé€šè¿‡ thread.getHandler ä¸º ActivityThread.H ï¼Œå…¶å†…éƒ¨å®šä¹‰äº†ä¸€ç»„æ¶ˆæ¯ç±»åž‹ï¼ŒåŒ…å«å››å¤§ç»„ä»¶çš„å¯åŠ¨å’Œåœæ­¢ç­‰ã€‚ æ€»ç»“é€šè¿‡åˆ†æžä¸Šè¿°å†…å®¹ï¼Œå…¶ä¸­çš„å…³ç³»æœ‰ç‚¹ä¹±ï¼Œå› æ­¤åœ¨è¿™é‡Œåšä¸‹æ€»ç»“ï¼š Looper ä¸­æž„é€ æ–¹æ³•ä¸­ä¼šåˆ›å»º MessageQueue MessageQueue ä¸­å­˜æ”¾ç€ Handler å‘é€çš„ Messageã€‚ Message å†…éƒ¨ä¿å­˜ç€åˆ›å»ºæ¶ˆæ¯çš„ Handlerã€‚ Handler å†…éƒ¨æŒæœ‰è¿™ Looper æ‰€åˆ›å»ºçš„ MessageQueueã€‚ å›¾å¦‚ä¸‹ï¼š send æˆ– post æ–¹æ³•ä¸­ä¼šæœ‰ delay æ–¹æ³•ï¼Œå…¶ä¸­ä¼šè°ƒç”¨åˆ°ï¼š 1234567public final boolean sendMessageDelayed(Message msg, long delayMillis)&#123; if (delayMillis &lt; 0) &#123; delayMillis = 0; &#125; return sendMessageAtTime(msg, SystemClock.uptimeMillis() + delayMillis);&#125; å¯ä»¥å‘çŽ°ï¼Œdelay æ—¶é—´ä¸º å½“å‰ç³»ç»Ÿå¯åŠ¨ä»¥æ¥ï¼Œä¸åŒ…æ‹¬æ·±åº¦ç¡çœ çš„æ—¶é—´åŠ ä¸Šæ‰€éœ€è¦å»¶è¿Ÿçš„æ—¶é—´ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Kotlin é»˜è®¤å‚æ•°æ³¨æ„äº‹é¡¹]]></title>
      <url>%2F2019%2F12%2F04%2FKotlin%20%E9%BB%98%E8%AE%A4%E5%8F%82%E6%95%B0%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%2F</url>
      <content type="text"><![CDATA[Kotlin ä¸­å®žçŽ°æ–¹æ³•çš„é‡è½½Kotlin æ–¹æ³•æˆ–æž„é€ å‡½æ•°ä¸­çš„å‚æ•°å¯ä»¥ç»™å‡ºé»˜è®¤å€¼ï¼Œæ¥è¾¾åˆ° Java æ–¹æ³•ä¸­çš„é‡è½½åŠŸèƒ½ï¼Œå¦‚ä¸‹ Java ä»£ç  123456789101112131415161718public class FunTestJava &#123; public static void hello() &#123; System.out.println(&quot;Hello, world!&quot;); &#125; public static void hello(String name) &#123; System.out.println(&quot;Hello, &quot; + name + &quot;!&quot;); &#125; public static void hello(String name, int age) &#123; if (age &gt; 0) &#123; System.out.println(&quot;Hello, &quot; + name + &quot;(&quot; + age + &quot;)!&quot;); &#125; else &#123; System.out.println(&quot;Hello, &quot; + name + &quot;!&quot;); &#125; &#125;&#125; Kotlin ä»£ç  12345678910object FunTest &#123; fun sayHello(name: String = &quot;world&quot;, age: Int = 0) &#123; if (age &gt; 0) &#123; println(&quot;Hello, $&#123;name&#125;($&#123;age&#125;)!&quot;) &#125; else &#123; println(&quot;Hello, $&#123;name&#125;!&quot;) &#125; &#125;&#125; åœ¨ Kotlin ç±»ä»£ç ä¸­è°ƒç”¨ï¼Œå¯ä»¥å®žçŽ°é‡è½½ï¼š 123FunTest.sayHello()FunTest.sayHello(&quot;Kotlin&quot;)FunTest.sayHello(&quot;Kotlin&quot;, 16) ä½†æ˜¯åœ¨ Java ç±»ä¸­æ— æ³•æŒ‰ Kotlin è¿™ç§æ–¹å¼è°ƒç”¨ï¼Œå¿…é¡»å…¨é‡å£°æ˜Žå‚æ•°ï¼š 1FunTest.INSTANCE.sayHello(&quot;Kotlin&quot;,18); åŽŸå› åˆ†æžï¼Œå°†ç¼–è¯‘åŽçš„ä»£ç è½¬ä¸º java ä»£ç æŸ¥çœ‹å‘çŽ°ï¼Œä¸Šè¿°æ–¹æ³•è¢«è½¬ä¸ºå¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829public final void sayHello(@NotNull String name, int age) &#123; Intrinsics.checkParameterIsNotNull(name, &quot;name&quot;); String var3; if (age &gt; 0) &#123; var3 = &quot;Hello, &quot; + name + &apos;(&apos; + age + &quot;)!&quot;; System.out.println(var3); &#125; else &#123; var3 = &quot;Hello, &quot; + name + &apos;!&apos;; System.out.println(var3); &#125; &#125; // $FF: synthetic method public static void sayHello$default(FunTest var0, String var1, int var2, int var3, Object var4) &#123; if ((var3 &amp; 1) != 0) &#123; var1 = &quot;world&quot;; &#125; if ((var3 &amp; 2) != 0) &#123; var2 = 0; &#125; var0.sayHello(var1, var2); &#125;FunTest.sayHello$default(FunTest.INSTANCE, (String)null, 0, 3, (Object)null);FunTest.sayHello$default(FunTest.INSTANCE, &quot;Kotlin&quot;, 0, 2, (Object)null);FunTest.INSTANCE.sayHello(&quot;å­¦è€Œæ€&quot;, 10); å¯ä»¥å‘çŽ°ï¼Œè½¬æ¢åŽä¼šç”Ÿæˆä¸€ä¸ªæ­£å¸¸çš„ sayHello æ–¹æ³•ä»¥åŠ sayHello$default æ–¹æ³•ï¼Œå½“ Kotlin è°ƒç”¨é»˜è®¤å‚æ•°æ—¶å®žé™…ä¸Šæ˜¯è°ƒç”¨çš„ sayHello$default æ–¹æ³•ï¼Œå…¶å’Œ Java ä¸­é‡è½½æ–¹æ³•å¹¶ä¸ä¸€æ ·ï¼Œå› æ­¤ Java ä¸­ä¸èƒ½ä½¿ç”¨ã€‚ å­˜åœ¨çš„é—®é¢˜å½“è‡ªå®šä¹‰ View æ—¶ï¼Œç”¨ Java ç¼–å†™å¦‚ä¸‹ï¼š 12345678910111213public class TestViewJava extends AppCompatTextView &#123; public TestViewJava(Context context) &#123; super(context); &#125; public TestViewJava(Context context, AttributeSet attrs) &#123; super(context, attrs); &#125; public TestViewJava(Context context, AttributeSet attrs, int defStyleAttr) &#123; super(context, attrs, defStyleAttr); &#125;&#125; ä¸€èˆ¬å£°æ˜Žä¸‰ç§æž„é€ å‡½æ•°ï¼Œç”¨ Kotlin ç¼–å†™ï¼š 123456class TestViewKotlin( context: Context, attrs: AttributeSet? = null, defStyleAttr: Int = 0) : AppCompatTextView(context, attrs, defStyleAttr) &#123;&#125; æ ¹æ®é»˜è®¤å‚æ•°é—®é¢˜å¯ä»¥çŸ¥é“ï¼Œä¸éœ€è¦ä¸ºä¸åŒå‚æ•°ç¼–å†™å¦ä¸€ä¸ªæž„é€ æ–¹æ³•ã€‚ è¿™ä¸ªè‡ªå®šä¹‰çš„ Viewï¼Œä½¿ç”¨åœ¨ XML å¸ƒå±€ä¸­æ—¶ï¼Œç¼–è¯‘ä¸ä¼šå‡ºé”™ï¼Œä½†æ˜¯è¿è¡Œæ—¶ï¼Œä¼šæŠ¥ NoSuchMethodException é”™è¯¯ï¼Œå¦‚ä¸‹ï¼š 1234567891011121314151617181920&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;android.support.constraint.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot; xmlns:tools=&quot;http://schemas.android.com/tools&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot; tools:context=&quot;.MainActivity&quot;&gt; &lt;com.li.panda.busquery.TestViewKotlin android:id=&quot;@+id/tvKTTest&quot; android:layout_width=&quot;0dp&quot; android:layout_height=&quot;0dp&quot; android:background=&quot;@color/colorPrimary&quot; app:layout_constraintBottom_toBottomOf=&quot;parent&quot; app:layout_constraintLeft_toLeftOf=&quot;parent&quot; app:layout_constraintRight_toRightOf=&quot;parent&quot; app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;&lt;/android.support.constraint.ConstraintLayout&gt; æŠ¥é”™å¦‚ä¸‹ï¼š Caused by: android.view.InflateException: Binary XML file line #9: Binary XML file line #9: Error inflating class com.li.panda.busquery.TestViewKotlinCaused by: android.view.InflateException: Binary XML file line #9: Error inflating class com.li.panda.busquery.TestViewKotlinCaused by: java.lang.NoSuchMethodException: [class android.content.Context, interface android.util.AttributeSet] åŽŸå› å°±æ˜¯ä¸Šé¢åˆ†æžçš„åŽŸç†ï¼ŒKotlin å¹¶ä¸ä¼šå­˜åœ¨å¤šä¸ªç›¸åŒåç§°çš„æ–¹æ³•è¿›è¡Œé‡è½½ï¼Œç”¨è¿™æ ·å†™ç”Ÿæˆçš„æž„é€ æ–¹æ³•å±žäºŽ åˆæˆæ–¹æ³• å½“ inflate å¸ƒå±€æ—¶æ‰¾ä¸åˆ°æ–¹æ³•ï¼Œå°†å­—èŠ‚ç è½¬ä¸º Java ä»£ç åŽæŸ¥çœ‹ï¼š 1234567891011121314151617public TestViewKotlin(@NotNull Context context, @Nullable AttributeSet attrs, int defStyleAttr) &#123; Intrinsics.checkParameterIsNotNull(context, &quot;context&quot;); super(context, attrs, defStyleAttr); &#125; // $FF: synthetic method public TestViewKotlin(Context var1, AttributeSet var2, int var3, int var4, DefaultConstructorMarker var5) &#123; if ((var4 &amp; 2) != 0) &#123; var2 = (AttributeSet)null; &#125; if ((var4 &amp; 4) != 0) &#123; var3 = 0; &#125; this(var1, var2, var3); &#125; è§£å†³æ–¹æ³•ä½¿ç”¨ @JvmOverloads æ³¨è§£æ–¹å¼åœ¨æž„é€ å‡½æ•°å‰å£°æ˜Žï¼Œå¦‚ä¸‹ï¼š 123456class TestViewKotlin @JvmOverloads constructor( context: Context, attrs: AttributeSet? = null, defStyleAttr: Int = 0) : AppCompatTextView(context, attrs, defStyleAttr) &#123;&#125; ç„¶åŽè¿è¡Œï¼Œä¸ä¼šæŠ¥é”™ï¼Œå°†å­—èŠ‚ç è½¬ä¸º Java ä»£ç åŽå‘çŽ°ï¼š 1234567891011121314151617181920212223242526272829@JvmOverloads public TestViewKotlin(@NotNull Context context, @Nullable AttributeSet attrs, int defStyleAttr) &#123; Intrinsics.checkParameterIsNotNull(context, &quot;context&quot;); super(context, attrs, defStyleAttr); &#125; // $FF: synthetic method @JvmOverloads public TestViewKotlin(Context var1, AttributeSet var2, int var3, int var4, DefaultConstructorMarker var5) &#123; if ((var4 &amp; 2) != 0) &#123; var2 = (AttributeSet)null; &#125; if ((var4 &amp; 4) != 0) &#123; var3 = 0; &#125; this(var1, var2, var3); &#125; @JvmOverloads public TestViewKotlin(@NotNull Context context, @Nullable AttributeSet attrs) &#123; this(context, attrs, 0, 4, (DefaultConstructorMarker)null); &#125; @JvmOverloads public TestViewKotlin(@NotNull Context context) &#123; this(context, (AttributeSet)null, 0, 6, (DefaultConstructorMarker)null); &#125; å‘çŽ°ç¡®å®žä¿å­˜äº†æž„é€ æ–¹æ³•çš„é‡è½½ï¼Œä½†æ˜¯å½“ä½¿ç”¨ @JvmOverloads å…³é”®å­—æ—¶ï¼Œéœ€è¦æ³¨æ„å‚æ•°åˆå§‹åŒ–çš„é»˜è®¤è®¾ç½®ã€‚ @JvmOverloads é»˜è®¤å€¼å¤„ç†è§„åˆ™ï¼š å¯¹è±¡ï¼Œé»˜è®¤å€¼ä¸º nullã€‚ åŸºç¡€æ•°æ®ç±»åž‹ï¼Œé»˜è®¤å€¼ä¸ºåŸºæœ¬æ•°æ®ç±»åž‹çš„é»˜è®¤å€¼ã€‚ä¾‹å¦‚ Int å°±æ˜¯ 0ï¼ŒBoolean å°±æ˜¯ falseã€‚ æ¯”å¦‚ä¸Šè¿°è‡ªå®šä¹‰ Viewï¼Œæž„é€ æ–¹æ³•å‚æ•° defStyleAttr é»˜è®¤ä¼šä¸º 0 ï¼Œä½†æ˜¯åœ¨æ­£å¸¸æƒ…å†µä¸‹è‡ªå®šä¹‰ Viewæ—¶å€™ä¼šä¼ å…¥é»˜è®¤ defStyleAttr å€¼ï¼Œå…¶å€¼ä¸ä¸º 0ï¼Œå› æ­¤åœ¨ç”¨è¿™ç§æ–¹å¼ç¼–å†™è‡ªå®šä¹‰ Veiw æ—¶æ³¨æ„ï¼Œä»¥å…å¼•èµ·ä¸€äº›é—®é¢˜ã€‚ å› æ­¤ï¼Œè‡ªå®šä¹‰ View æŽ¨èé‡å†™å¤šä¸ªæž„é€ å‡½æ•°ï¼Œè€Œä¸æ˜¯ä½¿ç”¨é»˜è®¤å‚æ•°æ¥å®žçŽ°ã€‚ æ€»ç»“ Kotlin å¯ä»¥é€šè¿‡å¯¹ä¸€ä¸ªæ–¹æ³•çš„å‚æ•°æŒ‡å®šé»˜è®¤å€¼çš„æ–¹å¼ï¼Œæ¥å®Œæˆç±»ä¼¼ Java ä¸­ã€Œæ–¹æ³•é‡è½½ã€çš„æ•ˆæžœã€‚ è‹¥æƒ³ä¸Ž Java çš„é‡è½½æ–¹æ³•ä¿æŒä¸€è‡´ï¼Œå¯ä»¥ä½¿ç”¨ @JvmOverloads æ³¨è§£ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆè¯¥æ–¹æ³•çš„å…¨éƒ¨é‡è½½æ–¹æ³•ã€‚ åœ¨è‡ªå®šä¹‰ View æ—¶ï¼Œéœ€è¦æ³¨æ„æŒ‡å®šå‚æ•° defStyleAttr çš„é»˜è®¤å€¼ï¼Œè€Œä¸åº”è¯¥æ˜¯ 0ã€‚ï¼ˆä¸æŽ¨èè¿™ç§æ–¹æ³•è‡ªå®šä¹‰ Viewï¼‰]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Kotlin ç›´æŽ¥ä½¿ç”¨ View ID çš„é—®é¢˜]]></title>
      <url>%2F2019%2F12%2F01%2FKotlin%20%E7%9B%B4%E6%8E%A5%E4%BD%BF%E7%94%A8%20View%20ID%20%E7%9A%84%E9%97%AE%E9%A2%98%2F</url>
      <content type="text"><![CDATA[ä½¿ç”¨æ–¹æ³•Kotlin ä¸­å¯ä»¥ç›´æŽ¥é€šè¿‡ View çš„ ID æ¥è®¿é—® Viewï¼Œè¢«ç§°ä¸ºé™æ€å¸ƒå±€å¼•å…¥ï¼Œé¦–å…ˆä½¿ç”¨è¦åœ¨ module ä¸‹çš„ build.gradle é…ç½®å¦‚ä¸‹æ’ä»¶ã€‚ 1apply plugin: &apos;kotlin-android-extensions&apos; ç„¶åŽåœ¨ Activity æˆ–è€… Fragment ä¸­ç›´æŽ¥æ ¹æ® View ID å¯ä»¥è®¿é—®è¯¥ Viewï¼Œå¸ƒå±€æ–‡ä»¶å¦‚ä¸‹ï¼š12345678910111213141516171819202122232425262728&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;android.support.constraint.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot; xmlns:tools=&quot;http://schemas.android.com/tools&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot; tools:context=&quot;.MainActivity&quot;&gt; &lt;TextView android:id=&quot;@+id/tvTest&quot; android:layout_width=&quot;0dp&quot; android:layout_height=&quot;50dp&quot; android:background=&quot;@color/colorPrimary&quot; app:layout_constraintLeft_toLeftOf=&quot;parent&quot; app:layout_constraintRight_toRightOf=&quot;parent&quot; app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt; &lt;android.support.v7.widget.RecyclerView android:id=&quot;@+id/rvTest&quot; android:layout_width=&quot;0dp&quot; android:layout_height=&quot;0dp&quot; app:layout_constraintBottom_toBottomOf=&quot;parent&quot; app:layout_constraintLeft_toLeftOf=&quot;parent&quot; app:layout_constraintRight_toRightOf=&quot;parent&quot; app:layout_constraintTop_toBottomOf=&quot;@id/tvTest&quot; /&gt;&lt;/android.support.constraint.ConstraintLayout&gt; Activity ä¸­ä½¿ç”¨ï¼š 12345678910open class MainActivity : AppCompatActivity() &#123; private val testBeans: MutableList&lt;TestBean&gt;? = mutableListOf() override fun onCreate(savedInstanceState: Bundle?) &#123; super.onCreate(savedInstanceState) setContentView(R.layout.activity_main) tvTest.text = &quot;Hello Kotlin&quot; &#125;&#125; åŽŸç†åˆ†æžä¸ºä»€ä¹ˆå¯ä»¥ç›´æŽ¥é€šè¿‡ View ID è®¿é—®åˆ°è¯¥æŽ§ä»¶ï¼Œé€šè¿‡ ByteCode å¯¹ç¼–è¯‘åŽçš„ kotlin classæ–‡ä»¶ï¼ˆbuild/tmp/kotlin-classesç›®å½•ä¸‹ï¼‰è¿›è¡Œåˆ†æž: 12345678910111213141516171819202122232425public class MainActivity extends AppCompatActivity &#123; private final List testBeans; private HashMap _$_findViewCache; protected void onCreate(@Nullable Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); this.setContentView(2131296284); TextView var10000 = (TextView)this._$_findCachedViewById(id.tvTest); Intrinsics.checkExpressionValueIsNotNull(var10000, &quot;tvTest&quot;); var10000.setText((CharSequence)&quot;Hello Kotlin&quot;); &#125; public View _$_findCachedViewById(int var1) &#123; if (this._$_findViewCache == null) &#123; this._$_findViewCache = new HashMap(); &#125; View var2 = (View)this._$_findViewCache.get(var1); if (var2 == null) &#123; var2 = this.findViewById(var1); this._$_findViewCache.put(var1, var2); &#125; return var2; &#125; å¯ä»¥å‘çŽ°ï¼Œå†…éƒ¨ç”Ÿæˆäº†_$_findCachedViewById()æ–¹æ³•ï¼Œå†…éƒ¨åˆ©ç”¨ HashMap å­˜å‚¨ä½¿ç”¨è¿‡çš„ Viewï¼Œé¿å… findViewById() ã€‚ å­˜åœ¨çš„é—®é¢˜å½“æŸäº›åœºæ™¯ä½¿ç”¨ LayoutInflateï¼Œ inflate çš„å¸ƒå±€ä¸­æ— æ³•ç›´æŽ¥ä½¿ç”¨ View ID æ¥è®¿é—®ï¼Œéœ€å€ŸåŠ© inflate çš„ View å¯¹è±¡åŽ»æ‹¿åˆ°è¯¥View ï¼Œæ¯”å¦‚ Recyclerview ä¸­ adapter ï¼š 1234567891011121314151617181920212223242526class TestAdapter(private var tesBeans: MutableList&lt;TestBean&gt;?) : RecyclerView.Adapter&lt;TestAdapter.TestHolder&gt;() &#123; private lateinit var context: Context override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): TestHolder &#123; context = parent.context return TestHolder(LayoutInflater.from(parent.context).inflate(R.layout.item, parent, false)) &#125; override fun getItemCount(): Int &#123; return tesBeans?.size ?: 0 &#125; override fun onBindViewHolder(holder: TestHolder, position: Int) &#123; tesBeans?.get(position)?.run &#123; holder.itemView.tvName.text = &quot;è¿™æ˜¯nameï¼š$name&quot; holder.itemView.tvAge.text = &quot;è¿™æ˜¯age:$age&quot; &#125; holder.itemView.setOnClickListener &#123; context.startActivity(Intent(context, TestActivity::class.java)) &#125; &#125; class TestHolder(itemView: View) : RecyclerView.ViewHolder(itemView) &#125; å€ŸåŠ© inflate çš„ Inflate çš„å¯¹è±¡åŽ»æ‹¿åˆ° View å¯¹è±¡ é€šè¿‡ ByteCode å¯¹ç¼–è¯‘åŽçš„ kotlin classæ–‡ä»¶è¿›è¡Œåˆ†æžå¯ä»¥å‘çŽ°ï¼Œå…¶å¹¶æ²¡æœ‰ç”Ÿæˆä¸Žä¸Šé¢æ‰€æåˆ°çš„ HashMap åšç¼“å­˜ï¼Œè€Œæ˜¯ç›´æŽ¥è½¬å˜ä¸º findViewByIdï¼Œå¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829public void onBindViewHolder(@NotNull TestAdapter.TestHolder holder, int position) &#123; Intrinsics.checkParameterIsNotNull(holder, &quot;holder&quot;); List var10000 = this.tesBeans; if (var10000 != null) &#123; TestBean var6 = (TestBean)var10000.get(position); if (var6 != null) &#123; TestBean var3 = var6; int var5 = false; View var7 = holder.itemView; Intrinsics.checkExpressionValueIsNotNull(var7, &quot;holder.itemView&quot;); //ä½¿ç”¨findViewByIdæŸ¥æ‰¾æŽ§ä»¶ TextView var8 = (TextView)var7.findViewById(id.tvName); Intrinsics.checkExpressionValueIsNotNull(var8, &quot;holder.itemView.tvName&quot;); var8.setText((CharSequence)(&quot;è¿™æ˜¯nameï¼š&quot; + var3.getName())); var7 = holder.itemView; Intrinsics.checkExpressionValueIsNotNull(var7, &quot;holder.itemView&quot;); //ä½¿ç”¨findViewByIdæŸ¥æ‰¾æŽ§ä»¶ var8 = (TextView)var7.findViewById(id.tvAge); Intrinsics.checkExpressionValueIsNotNull(var8, &quot;holder.itemView.tvAge&quot;); var8.setText((CharSequence)(&quot;è¿™æ˜¯age:&quot; + var3.getAge())); &#125; &#125; holder.itemView.setOnClickListener((OnClickListener)(new OnClickListener() &#123; public final void onClick(View it) &#123; TestAdapter.access$getContext$p(TestAdapter.this).startActivity(new Intent(TestAdapter.access$getContext$p(TestAdapter.this), TestActivity.class)); &#125; &#125;)); &#125; å› æ­¤æ‰€äº§ç”Ÿçš„é—®é¢˜æ˜¯ï¼ŒKotlin è™½ç„¶å¹²æŽ‰äº† findViewById()ï¼Œä½¿ç”¨ HashMap åŽ»å­˜å‚¨ Viewï¼Œä½†æ˜¯ä½¿ç”¨ View.view çš„æ“ä½œæ–¹å¼ï¼Œä¾ç„¶ä¼šå›žå½’åˆ°åŽŸå§‹çš„ findViewById()ï¼Œå½“å¯¹è¯¥ View å¯¹è±¡å¤šæ¬¡æ“ä½œæ—¶å€™ä¼šäº§ç”Ÿå¾ˆå¤šæ¬¡ findViewById ä»Žè€Œå¯¹æ€§èƒ½é€ æˆå½±å“ã€‚å› æ­¤åº”é¿å…è¿™ç§ä½¿ç”¨æ–¹æ³•ï¼Œå¦‚æžœè¦ä½¿ç”¨è¿›è¡Œä¸€æ¬¡å¤„ç†ï¼Œæ¯”å¦‚åœ¨ holder ä¸­ç›´æŽ¥ä¿å­˜è¯¥å˜é‡ï¼ŒåŽç»­ä½¿ç”¨ç›´æŽ¥ä½¿ç”¨å˜é‡çš„æ–¹å¼è¿›è¡Œæ“ä½œViewï¼Œå¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233class TestAdapter(private var tesBeans: MutableList&lt;TestBean&gt;?) : RecyclerView.Adapter&lt;TestAdapter.TestHolder&gt;() &#123; private lateinit var context: Context override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): TestHolder &#123; context = parent.context return TestHolder(LayoutInflater.from(parent.context).inflate(R.layout.item, parent, false)) &#125; override fun getItemCount(): Int &#123; return tesBeans?.size ?: 0 &#125; override fun onBindViewHolder(holder: TestHolder, position: Int) &#123; tesBeans?.get(position)?.run &#123;// holder.itemView.tvName.text = &quot;è¿™æ˜¯nameï¼š$name&quot;// holder.itemView.tvAge.text = &quot;è¿™æ˜¯age:$age&quot; holder.tvName.text = &quot;è¿™æ˜¯nameï¼š$name&quot; holder.tvAge.text = &quot;è¿™æ˜¯age:$age&quot; &#125; holder.itemView.setOnClickListener &#123; context.startActivity(Intent(context, TestActivity::class.java)) &#125; &#125; class TestHolder(itemView: View) : RecyclerView.ViewHolder(itemView) &#123; // å›žå½’åŽŸå§‹æ–¹æ³•ï¼Œæ­¤å¤„å£°æ˜Žï¼ŒåŽç»­ä½¿ç”¨ val tvName: TextView = itemView.tvName val tvAge: TextView = itemView.tvAge &#125; æ€»ç»“Kotlin å¯ä»¥ç›´æŽ¥é€šè¿‡ View ID è®¿é—®å¸ƒå±€å†…çš„ View å¯¹è±¡ã€‚å…¶ä¼šåˆ©ç”¨ä¸€ä¸ª HashMap ç»“æž„ï¼Œå®žçŽ°äº†ç¼“å­˜ï¼Œé¿å… findViewById() è¢«é‡å¤è°ƒç”¨ã€‚ä½†æ˜¯å½“ä½¿ç”¨ View.view è¿™ç§è°ƒç”¨æ–¹å¼æ—¶ï¼Œå…¶å®žæ˜¯å¾—ä¸åˆ°ä»»ä½•ä¼˜åŒ–çš„ï¼Œå°±æ˜¯å¾ˆç›´æŽ¥çš„æ¯æ¬¡åˆ©ç”¨ findViewById()æ‹¿ ID æŒ‡å®šçš„ View è¿›è¡Œæ“ä½œï¼Œæ‰€ä»¥æˆ‘ä»¬è¦å°½é‡é¿å…è¿™æ ·çš„ä½¿ç”¨æ–¹å¼ï¼Œæˆ–è€…åœ¨ä½¿ç”¨æ—¶è¿›è¡Œå¤„ç†ï¼Œé¿å…ä½¿ç”¨æ—¶éƒ½åŽ» findViewById()ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[ViewDragHelperå­¦ä¹ åŠä½¿ç”¨]]></title>
      <url>%2F2019%2F03%2F24%2FViewDragHelper%E5%AD%A6%E4%B9%A0%E5%8F%8A%E4%BD%BF%E7%94%A8%2F</url>
      <content type="text"><![CDATA[å·¥ä½œä¸­éœ€è¦å¼€å‘ä¸€ä¸ªç±»ä¼¼äºŽæŠ½å±‰å¼çš„æ»‘åŠ¨çš„ Viewï¼ŒåŒè¿‡è°ƒç ”åŠæŸ¥æ‰¾èµ„æ–™å‘çŽ°ViewDragHelperå¯ä»¥å®žçŽ°æ­¤ç±»æ–¹å¼ï¼Œåœ¨æ­¤è®°å½•ä¸‹ViewDragHelperçš„å­¦ä¹ åŠä½¿ç”¨ã€‚ é¦–å…ˆ ViewDragHelper åˆ†ä¸ºä¸‰éƒ¨ï¼š åˆ›å»º ViewDragHelper å®žä¾‹ï¼Œé€šè¿‡ViewDragHelper.create(ViewGroup forParent, float sensitivity, Callback cb)åˆ›å»ºViewDragHelperå®žä¾‹ï¼Œå…¶ä¸­ï¼šViewGroupï¼šå½“å‰çš„ViewGroupsensitivity:è®¾ç½®æ»‘åŠ¨çµæ•åº¦ï¼Œé€šå¸¸ä¸º 1cb:æ‹–æ‹½å›žè°ƒï¼Œç”¨æ¥å¤„ç†æ‹–åŠ¨ä½ç½®ç›¸å…³å›žè°ƒ å®žçŽ° ViewDragHelper.Callback() ç›¸å…³æ–¹æ³•ï¼š 1234567891011121314151617mViewDragHelper = ViewDragHelper.create(this, 1.0f, new ViewDragHelper.Callback() &#123; @Override public boolean tryCaptureView(@NonNull View child, int pointerId) &#123; return false; &#125; @Override public int clampViewPositionVertical(@NonNull View child, int top, int dy) &#123; return super.clampViewPositionVertical(child, top, dy); &#125; @Override public int clampViewPositionHorizontal(@NonNull View child, int left, int dx) &#123; return super.clampViewPositionHorizontal(child, left, dx); &#125; &#125; è¯¥å›žè°ƒå¯ä»¥ç§»åŠ¨ç›¸å…³çš„å¤„ç†ï¼Œæ¯”å¦‚å“ªäº› view å¯ä»¥ç§»åŠ¨ï¼Œä»¥åŠç§»åŠ¨çš„è¾¹ç•Œå¤„ç†ç­‰ã€‚å…¶ä¸­å‚æ•°å¦‚ä¸‹ï¼š tryCaptureView: è¿”å›ž true è¡¨ç¤ºæ•èŽ·ç›¸å…³ Viewï¼Œæ ¹æ®ä¼ å…¥çš„ child ç¡®å®šè¦æ•èŽ·çš„ view clampViewPositionVertical(View child, int top, int dy)ã€clampViewPositionHorizontal(View child, int left, int dx): child ç§»åŠ¨è¾¹ç•ŒæŽ§åˆ¶ï¼Œå…¶ä¸­ top,left è¡¨ç¤ºç§»åŠ¨åˆ°çš„ä½ç½®ã€‚ å¤„ç† ViewGroup çš„è§¦æ‘¸äº‹ä»¶ 12345678910@Override public boolean onInterceptTouchEvent(MotionEvent ev) &#123; return mViewDragHelper.shouldInterceptTouchEvent(ev); &#125; @Override public boolean onTouchEvent(MotionEvent event) &#123; mViewDragHelper.processTouchEvent(event); return true; &#125; onInterceptTouchEvent:äº¤ç»™ mViewDragHelper.shouldInterceptTouchEvent(ev) è¿›è¡Œå¤„ç† onTouchEventï¼šäº¤ç»™ mViewDragHelper.processTouchEvent(event) è¿›è¡Œå¤„ç† ç®€å•çš„ä½¿ç”¨å°±å¦‚ä¸Šæ‰€ç¤ºï¼Œå½“å¦‚ï¼Œå…¶ä¸­å¦‚æžœè¿›è¡Œå¤æ‚çš„å¤„ç†ï¼Œè¿˜éœ€æ›´å¤šçš„ç”¨æ³•ï¼Œæ¯”å¦‚ï¼š è¾¹ç•Œè§¦æ‘¸æ£€æµ‹ æ‹–æ‹½é‡Šæ”¾å›žè°ƒ ç§»åŠ¨åˆ°æŸä¸ªæŒ‡å®šä½ç½® æ¯”å¦‚å¦‚ä¸‹é‡å†™çš„æ–¹æ³•ï¼š 123456789101112131415161718192021222324252627282930313233343536mViewDragHelper = ViewDragHelper.create(this, 1.0f, new ViewDragHelper.Callback() &#123; @Override public boolean tryCaptureView(@NonNull View child, int pointerId) &#123; return child == mDragView; &#125; @Override public int clampViewPositionVertical(@NonNull View child, int top, int dy) &#123; if (top &gt; getHeight() - mDragViewHight) &#123; top = getHeight() - mDragViewHight; &#125; else if (top &lt; MIN_TOP) &#123; top = MIN_TOP; &#125; return top; &#125; @Override public int getViewVerticalDragRange(@NonNull View child) &#123; return getMeasuredHeight() - child.getMeasuredHeight(); &#125; @Override public void onViewPositionChanged(@NonNull View changedView, int left, int top, int dx, int dy) &#123; super.onViewPositionChanged(changedView, left, top, dx, dy); LinearLayout.LayoutParams bottomViewLayoutPara = (LayoutParams) mBottomView.getLayoutParams(); bottomViewLayoutPara.height = bottomViewLayoutPara.height + dy * -1; mBottomView.setLayoutParams(bottomViewLayoutPara); LinearLayout.LayoutParams topViewLayoutPara = (LayoutParams) mTopView.getLayoutParams(); topViewLayoutPara.height = topViewLayoutPara.height + dy; mTopView.setLayoutParams(topViewLayoutPara); &#125; &#125;); &#125; å…¶ä¸­ï¼š getViewVerticalDragRange è¿”å›žchild åž‚ç›´ç§»åŠ¨èŒƒå›´çš„è·ç¦»ï¼Œå¦‚æžœä¸åŠ ï¼Œå½“æœ‰ç‚¹å‡»äº‹ä»¶ä¹‹åŽåˆ™ä¸è§¦å‘ onViewPositionChanged å½“ä½ç½®æ”¹å˜è¿›è¡Œå›žè°ƒ åŒæ—¶é™¤äº†ä»¥ä¸Šæ–¹æ³•ä¹‹å¤–è¿˜æœ‰å…¶ä½™å¦‚ä¸‹æ–¹æ³•ï¼š onViewDragStateChanged:ViewDragHelperçŠ¶æ€æ”¹å˜æ—¶è¿›è¡Œå›žè°ƒï¼ˆIDLE,DRAGGING,SETTINGï¼‰ onEdgeTouched:è§¦æ‘¸åˆ°è¾¹ç•Œæ˜¯å›žè°ƒ onEdgeDragStarted:è¾¹ç•Œæ‹–åŠ¨æ—¶å›žè°ƒï¼Œéœ€è®¾ç½® setEdgeTrackingEnabled() ,å¯ä»¥è®¾ç½®å¦‚ä¸‹ EDGE_LEFTï¼šå·¦è¾¹ç•Œ EDGE_TOPï¼šä¸Šè¾¹ç•Œ EDGE_RIGHTï¼šå³è¾¹ç•Œ EDGE_BOTTOMï¼šåº•éƒ¨è¾¹ç•Œé™„å®žçŽ°æ•ˆæžœï¼šé™„ä»£ç ï¼ˆDragViewï¼‰ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091public class DragView extends LinearLayout &#123; private View mTopView; private View mDragView; private View mBottomView; private ViewDragHelper mViewDragHelper; private int mDragViewHight; final int MIN_TOP = 100; public DragView(Context context) &#123; super(context); init(); &#125; public DragView(Context context, @Nullable AttributeSet attrs) &#123; super(context, attrs); init(); &#125; public DragView(Context context, @Nullable AttributeSet attrs, int defStyleAttr) &#123; super(context, attrs, defStyleAttr); init(); &#125; private void init() &#123; mViewDragHelper = ViewDragHelper.create(this, 1.0f, new ViewDragHelper.Callback() &#123; @Override public boolean tryCaptureView(@NonNull View child, int pointerId) &#123; return child == mDragView; &#125; @Override public int clampViewPositionVertical(@NonNull View child, int top, int dy) &#123; if (top &gt; getHeight() - mDragViewHight) &#123; top = getHeight() - mDragViewHight; &#125; else if (top &lt; MIN_TOP) &#123; top = MIN_TOP; &#125; return top; &#125; @Override public int getViewVerticalDragRange(@NonNull View child) &#123; return getMeasuredHeight() - child.getMeasuredHeight(); &#125; @Override public void onViewPositionChanged(@NonNull View changedView, int left, int top, int dx, int dy) &#123; super.onViewPositionChanged(changedView, left, top, dx, dy); LinearLayout.LayoutParams bottomViewLayoutPara = (LayoutParams) mBottomView.getLayoutParams(); bottomViewLayoutPara.height = bottomViewLayoutPara.height + dy * -1; mBottomView.setLayoutParams(bottomViewLayoutPara); LinearLayout.LayoutParams topViewLayoutPara = (LayoutParams) mTopView.getLayoutParams(); topViewLayoutPara.height = topViewLayoutPara.height + dy; mTopView.setLayoutParams(topViewLayoutPara); &#125; &#125;); &#125; @Override public boolean onInterceptTouchEvent(MotionEvent ev) &#123; return mViewDragHelper.shouldInterceptTouchEvent(ev); &#125; @Override public boolean onTouchEvent(MotionEvent event) &#123; mViewDragHelper.processTouchEvent(event); return true; &#125; @Override protected void onFinishInflate() &#123; super.onFinishInflate(); mTopView = getChildAt(0); mDragView = getChildAt(1); mBottomView = getChildAt(2); &#125; @Override protected void onSizeChanged(int w, int h, int oldw, int oldh) &#123; super.onSizeChanged(w, h, oldw, oldh); mDragViewHight = mDragView.getMeasuredHeight(); &#125;&#125; å‚è€ƒé“¾æŽ¥- é¸¿æ´‹_]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[æ¯æ—¥ç®—æ³•ï¼ˆåè½¬æ•´æ•°ï¼‰-11.13]]></title>
      <url>%2F2018%2F11%2F13%2F%E6%AF%8F%E6%97%A5%E7%AE%97%E6%B3%95%EF%BC%88%E5%8F%8D%E8%BD%AC%E6%95%B0%E7%BB%84%EF%BC%89%2F</url>
      <content type="text"><![CDATA[ä»Šå¤©ä¸‹ç­æ—¶é—´æ¯”è¾ƒæ™šï¼Œå›žæ¥åŽåªå­¦ä¹ äº†ä¸€é“ç®—æ³•ï¼Œåè½¬æ•´æ•°ï¼Œä¸‹é¢å¼€å§‹è®°å½•é¢˜ä»¥åŠè‡ªå·±çš„åˆ†æžã€‚ åè½¬æ•´æ•° ç»™å®šä¸€ä¸ª 32 ä½æœ‰ç¬¦å·æ•´æ•°ï¼Œå°†æ•´æ•°ä¸­çš„æ•°å­—è¿›è¡Œåè½¬ã€‚ ç¤ºä¾‹1ï¼š12è¾“å…¥: 123è¾“å‡º: 321 ç¤ºä¾‹2ï¼š12è¾“å…¥: -123è¾“å‡º: -321 ç¤ºä¾‹ 3:12è¾“å…¥: 120è¾“å‡º: 21 ç»™å®šä¸€ä¸ª 32 ä½æœ‰ç¬¦å·æ•´æ•°ï¼Œå°†æ•´æ•°ä¸­çš„æ•°å­—è¿›è¡Œåè½¬ã€‚å‡è®¾çŽ¯å¢ƒåªèƒ½å­˜å‚¨32ä½æœ‰ç¬¦å·æ•´æ•°ï¼Œå…¶æ•°å€¼èŒƒå›´æ˜¯ [âˆ’2^31, 2^31âˆ’1]ã€‚æ ¹æ®è¿™ä¸ªå‡è®¾ï¼Œå¦‚æžœåè½¬åŽçš„æ•´æ•°æº¢å‡ºï¼Œåˆ™è¿”å›ž 0ã€‚ æ ¹æ®é¢˜ç›®åˆ¤æ–­ç±»ä¼¼äºŽåè½¬å­—ç¬¦ä¸²ï¼Œé¦–å…ˆè‡ªå·±ä¸å‡æ€ç´¢çš„ç”¨StringBuilderè¿›è¡Œäº†å®žçŽ°ï¼Œä½†æ˜¯è¿™æ ·çš„è¯è‡ªå·±è®¤ä¸ºæ ¹æœ¬å°±ä¸å«ç®—æ³•é¢˜ï¼Œå› æ­¤è‡ªå·±é‡æ–°æ€è€ƒåŽ»å®žçŽ°ï¼Œæ€è·¯å¦‚ä¸‹ï¼šé¦–å…ˆå¯¹ä¸€ä¸ªæ•°è¿›è¡Œæ•´é™¤ç„¶åŽwhileå¾ªçŽ¯ï¼Œä¹‹åŽå†è¿›è¡Œèµ‹å€¼æ“ä½œ1234int num = 0;while(x!=0)&#123; num = num*10+x%10;&#125; ä½†æ˜¯è¯¥æ–¹æ³•å¹¶æ²¡æœ‰è¿›è¡Œè¶Šç•Œå¤„ç†ï¼Œå½“å†™å‡ºæ¥ä¹‹åŽæŸ¥çœ‹è§£æžå‘çŽ°å¤„ç†çš„å¾ˆå·§å¦™ï¼š1234567891011public int reverse(int x) &#123; int num = 0; while (x != 0) &#123; int pop = x % 10; x /= 10; if (num &gt; Integer.MAX_VALUE/10 || (num == Integer.MAX_VALUE / 10 &amp;&amp; pop &gt; 7)) return 0; if (num &lt; Integer.MIN_VALUE/10 || (num == Integer.MIN_VALUE / 10 &amp;&amp; pop &lt; -8)) return 0; num = num * 10 + pop; &#125; return num; &#125; æ€æƒ³æ˜¯å¦‚æžœnumå¤§äºŽIntegerçš„æœ€å¤§è¾¹ç•Œ/10åˆ™åŽé¢å…¶æ— è®ºåŠ å¤šå°‘å€¼éƒ½ä¸ºè¶Šç•Œï¼ŒåŒæ ·çš„é“ç†å› ä¸ºé¢˜ç›®è§„å®šæœ€å¤§å€¼ä¸º2^31-1ä¸º2147483647ï¼Œå¦‚æžœnum==Integer.MAX_VALUE/10ï¼Œåˆ™popå¤§äºŽ7ä¹‹åŽåˆ™å°†è¶Šç•Œï¼›è´Ÿæ•°åŒæ ·ä¸ºè¯¥åŽŸç†ï¼ŒæŸ¥çœ‹è§£æžåŽå‘çŽ°å¤„ç†å¾ˆæ˜¯å·§å¦™ï¼Œè‡ªå·±éœ€è¦å­¦çš„åœ°æ–¹è¿˜æ˜¯å¾ˆå¤šï¼Œç»§ç»­åŠ æ²¹ï¼]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[æ¯æ—¥ç®—æ³•ï¼ˆä¸¤æ•°ä¹‹å’Œã€ä¸¤æ•°ç›¸åŠ ï¼‰-11.12]]></title>
      <url>%2F2018%2F11%2F12%2F%E6%AF%8F%E6%97%A5%E7%AE%97%E6%B3%95%EF%BC%88%E4%B8%A4%E6%95%B0%E4%B9%8B%E5%92%8C%E3%80%81%E4%B8%A4%E6%95%B0%E7%9B%B8%E5%8A%A0%EF%BC%89%2F</url>
      <content type="text"><![CDATA[ä»Šå¤©å¼€å§‹è®°å½•æ¯å¤©å­¦ä¹ ä¸€é“ä¸¤é“çš„ç®—æ³•é¢˜ï¼Œç”±ç®€å…¥éš¾ã€‚ä»Šå¤©ä¸€å…±å­¦ä¹ äº†ä¸¤é“ç®—æ³•ï¼Œä¸€é“ç®€å•ä¸€é“ä¸­ç­‰ï¼Œåˆ†åˆ«ä¸ºä¸¤æ•°ä¹‹å’Œã€ä¸¤æ•°ç›¸åŠ ï¼Œä¸‹é¢å¼€å§‹è®°å½•é¢˜ä»¥åŠè‡ªå·±çš„åˆ†æžã€‚ ä¸¤æ•°ä¹‹å’Œ ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„å’Œä¸€ä¸ªç›®æ ‡å€¼ï¼Œæ‰¾å‡ºæ•°ç»„ä¸­å’Œä¸ºç›®æ ‡å€¼çš„ä¸¤ä¸ªæ•°ã€‚ä½ å¯ä»¥å‡è®¾æ¯ä¸ªè¾“å…¥åªå¯¹åº”ä¸€ç§ç­”æ¡ˆï¼Œä¸”åŒæ ·çš„å…ƒç´ ä¸èƒ½è¢«é‡å¤åˆ©ç”¨ã€‚123ç»™å®š nums = [2, 7, 11, 15], target = 9 å› ä¸º nums[0] + nums[1] = 2 + 7 = 9æ‰€ä»¥è¿”å›ž [0, 1] åˆ†æžï¼šåˆšæ‹¿åˆ°é¢˜å‘çŽ°å¹¶ä¸æ˜¯å¾ˆéš¾ï¼ŒäºŽæ˜¯å¾ˆå¿«å†™å‡ºå¦‚ä¸‹ç®—æ³•ï¼š12345678910111213public int[] sumInArray(int[] nums, int target) &#123; for (int i = 0; i &lt; nums.length; i++) &#123; int val = target - nums[i]; for (int j = i; j &lt; nums.length; j++) &#123; if (nums[j] == val) &#123; return new int[] &#123; i, j &#125;; &#125; else &#123; continue; &#125; &#125; &#125; return null; &#125; ä½†æ˜¯è¯¥æ–¹æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º$O(n^2)$ï¼›é€šè¿‡æŸ¥çœ‹è§£æžï¼Œå‘çŽ°ä½¿ç”¨å“ˆå¸Œè¡¨è¿›è¡Œå¤„ç†ï¼Œé€šè¿‡ä»¥ç©ºé—´æ¢å–é€Ÿåº¦çš„æ–¹å¼ï¼Œå¯ä»¥å°†æŸ¥æ‰¾æ—¶é—´ä»Ž $O(n)$ é™ä½Žåˆ° $O(1)$ï¼Œä½†æ˜¯å¦‚æžœå‡ºçŽ°å†²çªï¼ŒæŸ¥æ‰¾æ—¶é—´è¿˜æ˜¯å¯èƒ½ä¼šé€€åŒ–åˆ° $O(n)$ã€‚æ–¹æ³•å¦‚ä¸‹ï¼š1234567891011public static int[] sumInArray(int[] nums, int target) &#123; Map&lt;Integer, Integer&gt; map = new HashMap&lt;&gt;(); for (int i = 0; i &lt; nums.length; i++) &#123; int val = target - nums[i]; if (map.containsKey(val)) &#123; return new int[]&#123;map.get(val), i&#125;; &#125; map.put(nums[i], i); &#125; return null; &#125; è¯¥æ–¹æ³•éåŽ†äº†ä¸€æ¬¡ï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦ä¸º$O(n)$ï¼Œä½†æ˜¯ä½œä¸ºä»£ä»·å°±æ˜¯ç©ºé—´å¤æ‚åº¦ä¸º$O(n)$ã€‚ ä¸¤æ•°ç›¸åŠ  ç»™å®šä¸¤ä¸ªéžç©ºé“¾è¡¨æ¥è¡¨ç¤ºä¸¤ä¸ªéžè´Ÿæ•´æ•°ã€‚ä½æ•°æŒ‰ç…§é€†åºæ–¹å¼å­˜å‚¨ï¼Œå®ƒä»¬çš„æ¯ä¸ªèŠ‚ç‚¹åªå­˜å‚¨å•ä¸ªæ•°å­—ã€‚å°†ä¸¤æ•°ç›¸åŠ è¿”å›žä¸€ä¸ªæ–°çš„é“¾è¡¨ã€‚é™¤äº†æ•°å­— 0 ä¹‹å¤–ï¼Œè¿™ä¸¤ä¸ªæ•°å­—éƒ½ä¸ä¼šä»¥é›¶å¼€å¤´ã€‚123è¾“å…¥ï¼š(2 -&gt; 4 -&gt; 3) + (5 -&gt; 6 -&gt; 4)è¾“å‡ºï¼š7 -&gt; 0 -&gt; 8åŽŸå› ï¼š342 + 465 = 807 åˆ†æžï¼šé¦–å…ˆæ‹¿åˆ°é¢˜ç›®å¾ˆå›°æƒ‘ï¼Œå› ä¸ºå¾ˆé•¿æ—¶é—´æ²¡æœ‰åšé“¾è¡¨ä¹‹ç±»çš„é¢˜ç›®ï¼Œé¦–å…ˆè‡ªå·±æƒ³åˆ°çš„æ˜¯å¦‚æžœå…¶ä¸­ä¸€ä¸ªé“¾è¡¨å¼€å¤´ä¸º0ï¼Œåˆ™ç›´æŽ¥è¿”å›žå¦ä¸€ä¸ªé“¾è¡¨ï¼Œç„¶åŽåœ¨å¾ªçŽ¯è¿›è¡ŒéåŽ†é€ä½ç›¸åŠ ï¼Œä½†æ˜¯æ‰‹å†™ä»£ç å‘çŽ°å†™ä¸å‡ºæ¥ðŸ˜“ï¼Œå› æ­¤åŽ»æŸ¥çœ‹å®˜æ–¹è§£æžï¼š ç±»ä¼¼äºŽçº¸ä¸Šè®¡ç®—ä¸¤ä¸ªæ•°å­—çš„å’Œï¼Œé¦–å…ˆä»Žæœ€ä½Žæœ‰æ•ˆä½ä¹Ÿå°±æ˜¯åˆ—è¡¨L1 å’Œ L2 çš„è¡¨å¤´å¼€å§‹ç›¸åŠ ã€‚ç”±äºŽæ¯ä½æ•°å­—éƒ½åº”å½“å¤„äºŽ 0â€¦9 çš„èŒƒå›´å†…ï¼Œå› æ­¤ä¸¤ä¸ªæ•°å­—çš„å’Œæ—¶å¯èƒ½ä¼šå‡ºçŽ°â€œæº¢å‡ºâ€ã€‚ä¾‹å¦‚ï¼Œ5 + 7 = 12ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå°†å½“å‰ä½çš„æ•°å€¼è®¾ç½®ä¸º 22ï¼Œå¹¶å°†è¿›ä½ carry=1 å¸¦å…¥ä¸‹ä¸€æ¬¡è¿­ä»£ã€‚è¿›ä½ carry å¿…å®šæ˜¯ 0 æˆ– 1ï¼Œè¿™æ˜¯å› ä¸ºä¸¤ä¸ªæ•°å­—ç›¸åŠ ï¼ˆè€ƒè™‘åˆ°è¿›ä½ï¼‰å¯èƒ½å‡ºçŽ°çš„æœ€å¤§å’Œä¸º 9 + 9 + 1 = 19ã€‚ å‚è€ƒä»£ç å¦‚ä¸‹ï¼š123456789101112131415161718192021222324252627282930public ListNode addTwoNumbers(ListNode l1, ListNode l2) &#123; ListNode head = new ListNode(0); ListNode p = l1; ListNode q = l2; ListNode currentNode = head; int carry = 0; while (p != null || q != null) &#123; int x = (p != null) ? p.val : 0; int y = (q != null) ? q.val : 0; int sum = carry + x + y; carry = sum / 10; currentNode.next = new ListNode(sum % 10); currentNode = currentNode.next; if (p != null) p = p.next; if (q != null) q = q.next; &#125; if (carry &gt; 0) &#123; currentNode.next = new ListNode(carry); &#125; return head.next; &#125;public class ListNode &#123; int val; ListNode next; ListNode(int value) &#123; val = value; &#125; &#125; ä»Šå¤©å­¦ä¹ äº†ä¸¤ä¸ªç®—æ³•ï¼Œå†æ¬¡è®°å½•è‡ªå·±çš„å­¦ä¹ çŠ¶æ€ï¼Œä»¥æ•¦ä¿ƒè‡ªå·±ç»§ç»­åŽ»å­¦ä¹ ]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Androidé¢è¯•çŸ¥è¯†ç‚¹æ€»ç»“]]></title>
      <url>%2F2017%2F09%2F14%2FAndroid%E9%9D%A2%E8%AF%95%E6%80%BB%E7%BB%93%2F</url>
      <content type="text"><![CDATA[ä»…ç”¨ä½œä¸Žè®°å½•è‡ªå·±çœ‹åˆ°çš„çŸ¥è¯†ç‚¹æ€»ç»“ï¼Œå›¾ç‰‡æ¥æºäºŽç½‘ç»œ blogã€‚ 1. Activity ä¸Ž Fragment çš„ç”Ÿå‘½å‘¨æœŸï¼ŸActivityï¼š å¯åŠ¨ Activiyï¼šonCreate-&gt;onStart()-&gt;onResume(),Activity è¿›å…¥è¿è¡ŒçŠ¶æ€. Activity é€€å±…åŽå°(Home æˆ–å¯åŠ¨æ–°Activity):onPause()-&gt;onStop(). Activity è¿”å›žå‰å°:onRestart()-&gt;onStart()-&gt;onResume(). Activity åŽå°æœŸé—´å†…å­˜ä¸è¶³æƒ…å†µä¸‹å½“å†æ¬¡å¯åŠ¨ä¼šé‡æ–°æ‰§è¡Œå¯åŠ¨æµç¨‹ã€‚ é”å±:onPause()-&gt;onStop(). è§£é”:onStart()-&gt;onResume().Fragment: åˆ›å»º Fragment:onAttach()-&gt;onCreate-&gt;onCreateView()-&gt;onActivityCreate()-&gt;onStart()-&gt;onResume() é”€æ¯ Fragment:onPause()-&gt;onStop()-&gt;onDestroyView()-&gt;onDestroy()-&gt;onDetach(). ä»Žè¿”å›žæ ˆä¸­å›žåˆ°ä¸Šä¸€ä¸ª Fragment:onDestroyView()-&gt;onCreateView()-&gt;onActivityCreated()-&gt;onStart()-&gt;onResume().Activity å’Œ Fragment å…³ç³»ï¼š 2. Activity çš„å››ç§å¯åŠ¨æ¨¡å¼å’Œç‰¹ç‚¹ï¼Ÿ standard(æ ‡å‡†æ¨¡å¼):æ¯æ¬¡å¯åŠ¨éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å®žä¾‹ï¼Œå¹¶æ”¾å…¥æ ˆé¡¶ã€‚ï¼ˆæ— æ³•ä½¿ç”¨éž Activity ç±»çš„ Context å¯åŠ¨è¯¥æ¨¡å¼çš„ Activityï¼Œå¦‚æžœå¯åŠ¨éœ€è¦åŠ ä¸Š FlAG_ACTIVITY_NEW_TASKæ ‡è®°åˆ›å»ºä¸€ä¸ªæ ˆï¼‰ã€‚ singleTop(æ ˆé¡¶å¤ç”¨æ¨¡å¼):å¦‚æžœå¯åŠ¨çš„ Activity åœ¨æ ˆé¡¶ï¼Œåˆ™è¯¥ Activity ä¸ä¼šé‡å»ºï¼ŒåŒæ—¶ Activity çš„ onNewIntent() æ–¹æ³•ä¼šè¢«è°ƒç”¨ï¼Œå¦‚æžœä¸åœ¨æ ˆé¡¶åˆ™é€š standar æ¨¡å¼ã€‚ singleTask(æ ˆå†…å¤ç”¨æ¨¡å¼):è‹¥å¯åŠ¨çš„ Activity åœ¨æ ˆå†…ï¼Œåˆ™ä¸ä¼šåˆ›å»ºæ–°çš„å®žä¾‹è°ƒç”¨ onNewIntent() æ–¹æ³•ï¼Œå¹¶å°†è¯¥ Activity ä¸Šé¢æ‰€ä»¥çš„ Activity æ¸…ç©ºï¼ˆå¦‚æžœå…¶ä»–åº”ç”¨å¯åŠ¨è¯¥ Activityï¼Œè‹¥ä¸å­˜åœ¨åˆ™ç®€åŽ†æ–°çš„ Taskï¼Œè‹¥å­˜åœ¨åœ¨åŽå°ï¼Œåˆ™åŽå° Task ä¹Ÿåˆ‡æ¢åˆ°å‰å°ï¼‰ã€‚ singleInstance(å•ä¾‹æ¨¡å¼):æ–°çš„ Activity ç›´æŽ¥åˆ›å»ºæ–°çš„ä»»åŠ¡æ ˆï¼Œå½“è¯¥æ¨¡å¼çš„ Activity å­˜åœ¨äºŽæŸä¸ªæ ˆä¸­ï¼ŒåŽé¢ä»»ä½•æ¿€æ´»è¯¥ Activity éƒ½ä¼šé‡ç”¨è¯¥å®žä¾‹ã€‚ 3. Activity çš„ç¼“å­˜æ–¹æ³•ï¼ŸActivity ç”±äºŽå¼‚å¸¸ç»ˆæ­¢æ—¶ï¼Œç³»ç»Ÿä¼šè°ƒç”¨ onSaveInstanceState()æ¥ä¿å­˜ Activity çŠ¶æ€(onStop()ä¹‹å‰å’ŒonPause()æ²¡æœ‰æ—¢å®šçš„æ—¶åºå…³ç³»)ã€‚å½“é‡å»ºæ—¶ï¼Œä¼šè°ƒç”¨ onRestoreInstanceState()ï¼Œå¹¶ä¸”æŠŠ Activity é”€æ¯æ—¶ onSaveInstanceState()æ–¹æ³•æ‰€ä¿å­˜çš„ Bundle å¯¹è±¡å‚æ•°åŒæ—¶ä¼ é€’ç»™ onSaveInstanceState()å’ŒonCreate()æ–¹æ³•ã€‚å› æ­¤ï¼Œå¯é€šè¿‡ onRestoreInstanceState()æ–¹æ³•æ¥æ¢å¤ Activity çš„çŠ¶æ€ï¼Œè¯¥æ–¹æ³•çš„è°ƒç”¨æ—¶æœºæ˜¯åœ¨ onStart()ä¹‹åŽã€‚onCreate()å’Œ onRestoreInstanceState()çš„åŒºåˆ«ï¼šonRestoreInstanceState()å›žè°ƒåˆ™è¡¨æ˜Žå…¶ä¸­Bundleå¯¹è±¡éžç©ºï¼Œä¸ç”¨åŠ éžç©ºåˆ¤æ–­ã€‚onCreate()éœ€è¦éžç©ºåˆ¤æ–­ã€‚å»ºè®®ä½¿ç”¨onRestoreInstanceState(). 4. Service çš„ç”Ÿå‘½å‘¨æœŸåŠä¸¤ç§å¯åŠ¨æ–¹æ³•ã€‚ startService å¯åŠ¨æœåŠ¡: ç”¨äºŽå¯åŠ¨ä¸€ä¸ªæœåŠ¡æ‰§è¡ŒåŽå°ä»»åŠ¡ï¼Œåœæ­¢æœåŠ¡ä½¿ç”¨ stopService(). bindService å¯åŠ¨æœåŠ¡: å¯åŠ¨æœåŠ¡è¿›è¡Œé€šä¿¡ï¼Œåœæ­¢æœåŠ¡ä½¿ç”¨ unbindService(). startService/stopServiceonCreate()-&gt;onStartCommand()-&gt;onDestroy()ç¬¬ä¸€æ¬¡è°ƒç”¨ä¼šè§¦å‘ onCreate()å’Œ onStartCommandï¼Œä¹‹åŽæ¯æ¬¡å¯åŠ¨æœåŠ¡åªè§¦å‘ onStartCommand()æ— è®º startService å¤šå°‘æ¬¡ï¼ŒstopService ä¸€æ¬¡å°±ä¼šåœæ­¢æœåŠ¡ bindService/unbindServiceonCreate-&gt;onBind()-&gt;onUnbind()-&gt;onDestroy()ç¬¬ä¸€æ¬¡ bindService ä¼šè§¦å‘ onCreate å’Œ onBindï¼Œä»¥åŽæ¯æ¬¡ bindService éƒ½ä¸ä¼šè§¦å‘ä»»ä½•å›žè°ƒbindService å¯åŠ¨çš„ç”Ÿå‘½å‘¨æœŸä¾é™„äºŽå¯åŠ¨å®ƒçš„ Context 5. Service ä¿æ´»ã€‚ åœ¨ onStartCommond()ä¸­å°†è¿”å›žå€¼è®¾ç½®ä¸º START_STICKY åœ¨ onDestroy()ä¸­é‡å¯ service é»‘è‰²ä¿æ´»ï¼šä¸åŒ app è¿›ç¨‹åˆ©ç”¨å¹¿æ’­ç›¸äº’å”¤èµ·ã€‚ ç™½è‰²ä¿æ´»ï¼šå¯åŠ¨å‰å° service ç°è‰²ä¿æ´»ï¼šåˆ©ç”¨ç³»ç»Ÿæ¼æ´žå¯åŠ¨å‰å° serviceã€‚ 6. å¹¿æ’­çš„ä¸¤ç§æ³¨å†Œæ–¹æ³•ï¼Œæœ‰ä»€ä¹ˆåŒºåˆ«ã€‚ åŠ¨æ€æ³¨å†Œï¼šé€šè¿‡è°ƒç”¨ Context.registerReceiver è¿›è¡Œæ³¨å†Œï¼Œè·Ÿéšç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸï¼Œç‰¹å®šæ—¶åˆ»ç›‘å¬å¹¿æ’­ã€‚ é™æ€æ³¨å†Œï¼šåœ¨ AndroidMainfest.xml ä¸­å£°æ˜Žï¼Œç¨‹åºå…³é—­åŽä»ä¼šè°ƒç”¨ï¼Œå¸¸é©»å¹¿æ’­ï¼Œæ—¶åˆ»ç›‘å¬å¹¿æ’­ã€‚ 7. Intentçš„ä½¿ç”¨æ–¹æ³•åŠæ‰€ä¼ é€’çš„æ•°æ®ç±»åž‹ã€‚ æ˜¾ç¤º Intentï¼šæŒ‰åæŒ‡å®šè¦å¯åŠ¨çš„ç»„ä»¶ éšç¤º Intentï¼šä¸æŒ‡å®šç‰¹å®šç»„ä»¶ï¼Œå£°æ˜Žè¦æ‰§è¡Œçš„å¸¸è§„æ“ä½œï¼Œä»Žè€Œå…è®¸å…¶ä»–åº”ç”¨ä¸­ç»„ä»¶æ¥å¤„ç†ã€‚ Intent å¯ä¼ é€’çš„æ•°æ®ç±»åž‹ï¼šåŸºæœ¬ç±»åž‹åŠå…¶æ•°ç»„æ•°æ®ï¼ŒString/CharSequenceç±»åž‹çš„æ•°æ®åŠå…¶æ•°ç»„æ•°æ®ï¼Œä¹Ÿå¯ä»¥ä¼ é€’Parcelableå’ŒSerializableç±»åž‹çš„æ•°æ®ï¼Œä»¥åŠå®ƒä»¬çš„æ•°ç»„/åˆ—è¡¨æ•°æ®ã€‚ 8. ContentProviderä½¿ç”¨æ–¹æ³•ã€‚è¿›è¡Œè·¨è¿›ç¨‹é€šä¿¡ï¼Œå®žçŽ°è¿›ç¨‹é—´å¾—æ•°æ®äº¤äº’å’Œå…±äº«ã€‚é€šè¿‡ Context ä¸­ getContentResolver()èŽ·å¾—å®žä¾‹ï¼Œé€šè¿‡ Uri åŒ¹é…è¿›è¡Œæ•°æ®çš„å¢žåˆ æ”¹æŸ¥ã€‚ContentProvider ä½¿ç”¨è¡¨çš„å½¢å¼æ¥ç»„ç»‡æ•°æ®ï¼Œæ— è®ºæ•°æ®çš„æ¥æºæ˜¯ä»€ä¹ˆï¼ŒContentProvider éƒ½ä¼šè®¤ä¸ºæ˜¯ä¸€ç§è¡¨ï¼Œç„¶åŽæŠŠæ•°æ®ç»„ç»‡æˆè¡¨æ ¼ 9. Threadã€AsyncTaskã€IntentServiceçš„ä½¿ç”¨åœºæ™¯ä¸Žç‰¹ç‚¹ã€‚ Threadçº¿ç¨‹ï¼Œç‹¬ç«‹è¿è¡Œä¸ŽäºŽ Activity çš„ï¼Œå½“ Activity è¢« finish åŽï¼Œå¦‚æžœæ²¡æœ‰ä¸»åŠ¨åœæ­¢ Thread æˆ–è€… run æ–¹æ³•æ²¡æœ‰æ‰§è¡Œå®Œï¼Œå…¶ä¼šä¸€ç›´æ‰§è¡Œä¸‹åŽ»ã€‚ AsyncTask å°è£…äº†ä¸¤ä¸ªçº¿ç¨‹æ± å’Œä¸€ä¸ª Handlerï¼Œï¼ˆSerialExecutorç”¨äºŽæŽ’é˜Ÿï¼ŒTHREAD_POOL_EXECUTORä¸ºçœŸæ­£çš„æ‰§è¡Œä»»åŠ¡ï¼ŒHandler å°†å·¥ä½œçº¿ç¨‹åˆ‡æ¢åˆ°ä¸»çº¿ç¨‹ï¼‰ï¼Œå…¶å¿…é¡»åœ¨ UI çº¿ç¨‹ä¸­åˆ›å»ºï¼Œexecute æ–¹æ³•å¿…é¡»åœ¨ UI çº¿ç¨‹ä¸­æ‰§è¡Œï¼Œä¸€ä¸ªä»»åŠ¡å®žä¾‹åªå…è®¸æ‰§è¡Œä¸€æ¬¡ï¼Œæ‰§è¡Œå¤šæ¬¡å°†æŠ›å‡ºå¼‚å¸¸ï¼Œç”¨äºŽç½‘ç»œè¯·æ±‚æˆ–è€…ç®€å•æ•°æ®å¤„ç†ã€‚ IntentServiceï¼šå¤„ç†å¼‚æ­¥è¯·æ±‚ï¼Œå®žçŽ°å¤šçº¿ç¨‹ï¼Œåœ¨ onHandleIntent ä¸­å¤„ç†è€—æ—¶æ“ä½œï¼Œå¤šä¸ªè€—æ—¶ä»»åŠ¡ä¼šä¾æ¬¡æ‰§è¡Œï¼Œæ‰§è¡Œå®Œæ¯•åŽè‡ªåŠ¨ç»“æŸã€‚ 10. äº”ç§å¸ƒå±€: FrameLayoutã€LinearLayoutã€ AbsoluteLayoutã€RelativeLayoutã€TableLayout å„è‡ªç‰¹ç‚¹åŠç»˜åˆ¶æ•ˆçŽ‡å¯¹æ¯”ã€‚ FrameLayout: Android ä¸­æœ€ç®€å•å¸ƒå±€ï¼Œæ‰€æœ‰æŽ§ä»¶é»˜è®¤å‡ºçŽ°åœ¨å·¦ä¸Šè§’ï¼Œå¯ä»¥ä½¿ç”¨ layout_marginï¼Œlayout_gravity ç­‰å±žæ€§æŽ§åˆ¶å­æŽ§ä»¶çš„ç›¸å¯¹å¸ƒå±€ä½ç½®ã€‚ LinearLayout: ä¸€è¡Œæˆ–è€…ä¸€åˆ—å¸ƒå±€ç©ºé—´ï¼Œå¯ä½¿ç”¨ orientation=horizontal|vertical æ¥æŽ§åˆ¶å¸ƒå±€æ–¹å¼ã€‚ AbsoluteLayout: è‡ªå®šä¹‰ç©ºé—´çš„xï¼Œy æ¥è°ƒæ•´ä½ç½®ã€‚ RelativeLayout: ç›¸å¯¹å¸ƒå±€ï¼Œé€šè¿‡ç›¸å…³å±žæ€§æ¥å®šä¹‰ç©ºé—´çš„ä½ç½® android:layout_centerInParent=â€true|falseâ€android:layout_centerHorizontal=â€true|falseâ€android:layout_alignParentRight=â€true|falseâ€ TableLayout: å°†å­—å…ƒç´ çš„ä½ç½®ä»¥è¡¨æ ¼å½¢å¼è¿›è¡Œå¸ƒå±€ã€‚ 11. Androidçš„æ•°æ®å­˜å‚¨å½¢å¼ã€‚ SQLite æ•°æ®åº“å­˜å‚¨ æ–‡ä»¶å­˜å‚¨ SharedPreference å­˜å‚¨ ç½‘ç»œå­˜å‚¨ 12. SQlite çš„åŸºæœ¬æ“ä½œAndroid æä¾›äº† SQLiteOpenHelper ç±»ï¼Œé€šè¿‡è¯¥ç±»å¯ä»¥ç®€å•æŽ§åˆ¶æ•°æ®åº“çš„åˆ›å»ºå’Œå‡çº§ã€‚ onCreate(): åˆ›å»ºæ•°æ®åº“ onUpgrade(): å‡çº§æ•°æ®åº“ ä¸¤ä¸ªæ–¹æ³•å¿…é¡»é‡å†™ï¼Œç„¶åŽå®žçŽ°åˆ›å»ºå’Œå‡çº§æ•°æ®åº“çš„é€»è¾‘ã€‚ getReadableDatabase()å’Œ getWritableDatabase(): åˆ›å»ºæˆ–æ‰“å¼€ä¸€ä¸ªçŽ°æœ‰æ•°æ®åº“ï¼Œè¿”å›žä¸€ä¸ªå¯å¯¹æ•°æ®åº“è¿›è¡Œè¯»å†™æ“ä½œçš„å¯¹è±¡ï¼Œå½“æ•°æ®åº“ä¸å¯å†™å…¥çš„æ—¶å€™getReadableDatabase()ä»¥åªè¯»çš„æ–¹å¼è¿”å›žæ•°æ®åº“å¯¹è±¡ï¼ŒgetWritableDatabase()è¿”å›žå¼‚å¸¸ã€‚ insert(): æ’å…¥æ•°æ® update(): æ›´æ–°æ•°æ® delete(): åˆ é™¤æ•°æ® query(): æŸ¥è¯¢æ•°æ® 13. Androidä¸­çš„MVCæ¨¡å¼ã€‚ Modelï¼ˆæ¨¡åž‹ï¼‰ Viewï¼ˆè§†å›¾ï¼‰ Controlerï¼ˆæŽ§åˆ¶å™¨ï¼‰ View ä¼ é€æŒ‡ä»¤åˆ° Controllerï¼Œå…¶å®Œæˆé€»è¾‘åŽé€šçŸ¥ Model æ”¹å˜çŠ¶æ€ï¼ŒModel å°†æ–°æ•°æ®æ›´æ–°åˆ° Viewã€‚æ‰€æœ‰é€šä¿¡éƒ½ä¸ºå•å‘ã€‚æŽ¥å—æŒ‡ä»¤æ—¶ï¼Œä¸€æ˜¯é€šè¿‡ View æŽ¥å—æŒ‡ä»¤å¹¶ä¼ é€’ç»™ Controllerï¼›å¦ä¸€ç§æ˜¯ç›´æŽ¥é€šè¿‡ Controller æŽ¥å—æŒ‡ä»¤ã€‚ 14. Mergeã€ViewStub çš„ä½œç”¨ã€‚ Merge: å‡å°‘è§†å›¾å±‚çº§ï¼Œå¯ä»¥åˆ é™¤å¤šä½™çš„å±‚çº§ï¼Œä¼˜åŒ– UIã€‚ ViewStub: æŒ‰éœ€åŠ è½½ï¼Œå‡å°‘å†…å­˜ä½¿ç”¨é‡ã€åŠ å¿«æ¸²æŸ“é€Ÿåº¦ã€‚ä¸æ”¯æŒ merge æ ‡ç­¾ 15. Jsonæœ‰ä»€ä¹ˆä¼˜åŠ£åŠ¿ã€‚ä¼˜ç‚¹ è½»é‡çº§çš„æ•°æ®äº¤æ¢æ ¼å¼ è¯»å†™æ›´åŠ å®¹æ˜“ æ˜“äºŽæœºå™¨çš„è§£æžå’Œç”Ÿæˆ ç¼ºç‚¹ è¯­ä¹‰æ€§è¾ƒå·®ï¼Œä¸å¦‚ xml ç›´è§‚ 16. åŠ¨ç”»æœ‰å“ªä¸¤ç±»ï¼Œå„æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ ä¼ ç»ŸåŠ¨ç”»ï¼šå¸§åŠ¨ç”»å’Œè¡¥é—´åŠ¨ç”»ã€‚ å±žæ€§åŠ¨ç”»ã€‚åŒºåˆ« å±žæ€§åŠ¨ç”»æ‰æ˜¯çœŸæ­£çš„å®žçŽ°äº†viewçš„ç§»åŠ¨ï¼Œè¡¥é—´åŠ¨ç”»å¯¹viewçš„ç§»åŠ¨æ›´åƒæ˜¯åœ¨ä¸åŒåœ°æ–¹ç»˜åˆ¶äº†ä¸€ä¸ªå½±å­ï¼Œå®žé™…çš„å¯¹è±¡è¿˜æ˜¯å¤„äºŽåŽŸæ¥çš„åœ°æ–¹ã€‚ å½“åŠ¨ç”»çš„repeatCountè®¾ç½®ä¸ºæ— é™å¾ªçŽ¯æ—¶ï¼Œå¦‚æžœåœ¨Activityé€€å‡ºæ—¶æ²¡æœ‰åŠæ—¶å°†åŠ¨ç”»åœæ­¢ï¼Œå±žæ€§åŠ¨ç”»ä¼šå¯¼è‡´Activityæ— æ³•é‡Šæ”¾è€Œå¯¼è‡´å†…å­˜æ³„æ¼ï¼Œè€Œè¡¥é—´åŠ¨ç”»å´æ²¡æœ‰é—®é¢˜ã€‚ xml æ–‡ä»¶å®žçŽ°çš„è¡¥é—´åŠ¨ç”»ï¼Œå¤ç”¨çŽ‡æžé«˜ã€‚åœ¨Activityåˆ‡æ¢ï¼Œçª—å£å¼¹å‡ºæ—¶ç­‰æƒ…æ™¯ä¸­æœ‰ç€å¾ˆå¥½çš„æ•ˆæžœã€‚ ä½¿ç”¨å¸§åŠ¨ç”»æ—¶éœ€è¦æ³¨æ„ï¼Œä¸è¦ä½¿ç”¨è¿‡å¤šç‰¹åˆ«å¤§çš„å›¾ï¼Œå®¹æ˜“å¯¼è‡´å†…å­˜ä¸è¶³ã€‚ 17. Handlerã€Loopæ¶ˆæ¯é˜Ÿåˆ—æ¨¡åž‹ï¼Œå„éƒ¨åˆ†çš„ä½œç”¨ã€‚Androidæ¶ˆæ¯æœºåˆ¶åŒ…å«: MessageQueneã€Handlerã€Looperã€Message. Message: éœ€è¦æ˜¥å¨£çš„æ¶ˆæ¯ï¼Œå¯ä»¥ä¼ é€’æ•°æ®ã€‚ MessageQuene: æ¶ˆæ¯é˜Ÿåˆ—ï¼Œé€šè¿‡å•é“¾è¡¨æ•°æ®ç»“æž„æ¥ç»´æŠ¤æ¶ˆæ¯åˆ—è¡¨ï¼Œï¼ˆæŠ•é€’å’Œåˆ é™¤æ¶ˆæ¯ï¼‰ã€‚ Handler: æ¶ˆæ¯è¾…åŠ©ç±»ï¼Œå‘æ¶ˆæ¯æ± å‘é€å„ç§æ¶ˆæ¯äº‹ä»¶ Handler.sendMessage å‘é€æ¶ˆæ¯Handler.handleMessage å¤„ç†æ¶ˆæ¯ Looper: ä¸æ–­ä»Žæ¶ˆæ¯é˜Ÿé‡Œä¸­è¯»å–æ¶ˆæ¯ï¼ŒæŒ‰åˆ†å‘æœºåˆ¶å°†æ¶ˆæ¯åˆ†å‘ç»™ç›®æ ‡å¤„ç†è€…ã€‚MessageQueneã€Handler å’Œ looper ä¸‰è€…ä¹‹é—´çš„å…³ç³»ï¼šæ¯ä¸ªçº¿ç¨‹ä¸­åªèƒ½å­˜åœ¨ä¸€ä¸ªLooperï¼Œä¿å­˜åœ¨ThreadLocalä¸­ã€‚ä¸»çº¿ç¨‹ï¼ˆUIçº¿ç¨‹ï¼‰å·²ç»åˆ›å»ºäº†ä¸€ä¸ªLooperï¼Œæ‰€ä»¥åœ¨ä¸»çº¿ç¨‹ä¸­ä¸éœ€è¦å†åˆ›å»ºLooperï¼Œå…¶ä»–çº¿ç¨‹ä¸­éœ€è¦åˆ›å»ºLooperã€‚æ¯ä¸ªçº¿ç¨‹ä¸­å¯ä»¥æœ‰å¤šä¸ªHandlerï¼Œå³ä¸€ä¸ª Looper å¯ä»¥å¤„ç†æ¥è‡ªå¤šä¸ª Handler çš„æ¶ˆæ¯ã€‚ Looper ä¸­ç»´æŠ¤ä¸€ä¸ª MessageQueueï¼Œæ¥ç»´æŠ¤æ¶ˆæ¯é˜Ÿåˆ—ï¼Œæ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„ Message å¯ä»¥æ¥è‡ªä¸åŒçš„ Handlerã€‚ å½“è°ƒç”¨ handler.sendMessage()å‘é€ message æ—¶ï¼Œå®žé™…ä¸Šå‘é€åˆ°ä¸Žå½“å‰çº¿ç¨‹ç»‘å®šçš„ MessageQuene ä¸­ï¼Œç„¶åŽå½“å‰çº¿ç¨‹ç»‘å®šçš„ Looper ä¸æ–­ä»Ž MessageQueue å–å‡ºæ–°çš„ Messageï¼Œè°ƒç”¨ msg.target.disspatchMessage(msg) æ–¹æ³•å°†æ¶ˆæ¯åˆ†å‘åˆ°ä¸Ž Message ç»‘å®šçš„ handler.handleMessage()ä¸­ã€‚ 18. æ€Žæ ·é€€å‡ºç»ˆæ­¢Appã€‚ åˆ›å»ºä¸€ä¸ªé›†åˆç±»å¯¹æ‰€æœ‰æ´»åŠ¨è¿›è¡Œç®¡ç†ï¼ŒActivityCollectorï¼Œé€šè¿‡ list æ¥ç®¡ç† Activityã€‚ killProcess(android.os.Process.myPid())æ€æ­»å½“å‰ç¨‹åºè¿›ç¨‹ã€‚ 19. Assetç›®å½•ä¸Žresç›®å½•çš„åŒºåˆ«ã€‚ assetsï¼šä¸ä¼šåœ¨ R æ–‡ä»¶ä¸­ç”Ÿæˆç›¸åº”æ ‡è®°ï¼Œå­˜æ”¾åˆ°è¿™é‡Œçš„èµ„æºåœ¨æ‰“åŒ…æ—¶ä¼šæ‰“å…¥ç¨‹åºå®‰è£…åŒ…ä¸­ã€‚ï¼ˆé€šè¿‡ AssetManager ç±»è®¿é—®è¿™äº›æ–‡ä»¶ï¼‰ resï¼šä¼šåœ¨ R æ–‡ä»¶ä¸­ç”Ÿæˆ id æ ‡è®°ï¼Œèµ„æºåœ¨æ‰“åŒ…æ—¶å¦‚æžœä½¿ç”¨åˆ°åˆ™æ‰“åŒ…åˆ°å®‰è£…åŒ…ä¸­ï¼Œæœªä½¿ç”¨åˆ°ä¸ä¼šæ‰“å…¥å®‰è£…åŒ…ä¸­ã€‚ res/anim:å­˜æ”¾åŠ¨ç”»èµ„æºres/rawï¼šå’Œ asset ä¸‹æ–‡ä»¶ä¸€æ ·æ‰“åŒ…æ—¶ç›´æŽ¥æ‰“å…¥ç¨‹åºå®‰è£…åŒ…ä¸­ï¼ˆä¼šæ˜ å°„åˆ° R æ–‡ä»¶ä¸­ï¼‰ Tables assets res/raw res/drawable èŽ·å–èµ„æºæ–¹å¼ æ–‡ä»¶è·¯å¾„+æ–‡ä»¶å R.raw.xxx R.drawable.xxx æ˜¯å¦è¢«åŽ‹ç¼© NO NO YES(å¤±çœŸåŽ‹ç¼©) èƒ½å¦èŽ·å–å­ç›®å½•ä¸‹çš„èµ„æº YES NO NO 20. Androidæ€Žä¹ˆåŠ é€Ÿå¯åŠ¨Activityã€‚ onCreate()ä¸­ä¸æ‰§è¡Œè€—æ—¶æ“ä½œ æŠŠé¡µé¢æ˜¾ç¤ºçš„Viewç»†åˆ†ä¸€ä¸‹ï¼Œæ”¾åœ¨AsyncTaské‡Œé€æ­¥æ˜¾ç¤ºï¼Œç”¨handleræ›´å¥½ã€‚è¿™æ ·ç”¨æˆ·çš„çœ‹åˆ°çš„å°±æ˜¯æœ‰å±‚æ¬¡æœ‰æ­¥éª¤çš„ä¸€ä¸ªä¸ªçš„viewçš„å±•ç¤ºï¼Œä¸ä¼šæ˜¯å…ˆçœ‹åˆ°ä¸€ä¸ªé»‘å±ï¼Œç„¶åŽä¸€ä¸‹æ˜¾ç¤ºæ‰€æœ‰viewã€‚ æœ€å¥½åšæˆåŠ¨ç”»ï¼Œæ•ˆæžœæ›´è‡ªç„¶ã€‚ åˆ©ç”¨å¤šçº¿ç¨‹çš„ç›®çš„å°±æ˜¯å°½å¯èƒ½çš„å‡å°‘onCreateå’ŒonReumeçš„æ—¶é—´ï¼Œä½¿å¾—ç”¨æˆ·èƒ½å°½å¿«çœ‹åˆ°é¡µé¢ï¼Œæ“ä½œé¡µé¢ã€‚ å‡å°‘ä¸»çº¿ç¨‹é˜»å¡žæ—¶é—´ æé«˜ Adapter å’Œ AdapterView çš„æ•ˆçŽ‡ ä¼˜åŒ–å¸ƒå±€æ–‡ä»¶ 21. Androidæ€§èƒ½ä¼˜åŒ–æ–¹æ³• å¸ƒå±€ä¼˜åŒ–ï¼šå°½é‡å‡å°‘å¸ƒå±€æ–‡ä»¶çš„å±‚çº§ åˆ é™¤å¸ƒå±€ä¸­æ— ç”¨çš„æŽ§ä»¶å’Œå±‚æ¬¡ï¼Œæœ‰é€‰æ‹©çš„ä½¿ç”¨æ€§èƒ½è¾ƒä½Žçš„ ViewGroup é‡‡ç”¨æ ‡ç­¾ï¼ŒViewStubï¼Œå¸ƒå±€é‡ç”¨å¯é™ä½Žå¸ƒå±€çš„å±‚çº§ï¼ˆViewStubæä¾›äº†æŒ‰éœ€åŠ è½½çš„åŠŸèƒ½ï¼Œå½“éœ€è¦æ—¶æ‰ä¼šå°† ViewStub ä¸­å¸ƒå±€åŠ è½½åˆ°å†…å­˜ï¼Œæé«˜äº†åˆå§‹åŒ–æ•ˆçŽ‡ï¼‰ é¿å…è¿‡åº¦ç»˜åˆ¶ ç»˜åˆ¶ä¼˜åŒ–ï¼šView çš„ onDraw æ–¹æ³•é¿å…æ‰§è¡Œå¤§é‡æ“ä½œã€‚ onDraw ä¸­ä¸è¦åˆ›å»ºæ–°çš„å¸ƒå±€å¯¹è±¡ã€‚ onDraw ä¸­ä¸åšè€—æ—¶ä»»åŠ¡ï¼Œå¤§é‡å¾ªçŽ¯ååˆ†æŠ¢å  cpu æ—¶é—´ç‰‡ï¼Œé€ æˆ View çš„ç»˜åˆ¶ä¸æµç•…ã€‚ å†…å­˜æ³„æ¼ä¼˜åŒ– é¿å…å†™å‡ºå†…å­˜æ³„æ¼ä»£ç  é€šè¿‡åˆ†æžå·¥å…·ï¼ˆMATã€LeakCannaryï¼‰æ‰¾å‡ºæ½œåœ¨çš„å†…å­˜æ³„æ¼æ–¹æ³•ï¼Œç„¶åŽè§£å†³ã€‚ å¯¼è‡´å†…å­˜æ³„æ¼çš„åŽŸå› : é›†åˆç±»çš„æ³„æ¼ å•ä¾‹/é™æ€å˜é‡é€ æˆå†…å­˜æ³„æ¼ åŒ¿åå†…éƒ¨ç±»/éžé™æ€å†…éƒ¨ç±»é€ æˆå†…å­˜æ³„æ¼ èµ„æºæœªå…³é—­ å“åº”é€Ÿåº¦çš„ä¼˜åŒ–ï¼šé¿å…åœ¨ä¸»çº¿ç¨‹åšè€—æ—¶çš„æ“ä½œã€‚ ListView/RecyclerViewä¼˜åŒ–ï¼š ä½¿ç”¨ viewHolder æ¨¡å¼æ¥æé«˜æ•ˆçŽ‡ å¼‚æ­¥åŠ è½½ï¼šè€—æ—¶æ“ä½œæ”¾åœ¨å¼‚æ­¥çº¿ç¨‹ æ»‘åŠ¨æ—¶åœæ­¢åŠ è½½å’Œåˆ†é¡µåŠ è½½ çº¿ç¨‹ä¼˜åŒ–ï¼šé‡‡ç”¨çº¿ç¨‹æ± ï¼Œé¿å…ç¨‹åºä¸­å­˜åœ¨å¤§é‡ Thread ã€‚ å…¶ä»–æ€§èƒ½ä¼˜åŒ–ï¼š ä¸è¦è¿‡å¤šçš„åˆ›å»ºå¯¹è±¡ã€‚ ä¸è¦è¿‡å¤šä½¿ç”¨æžšä¸¾ç±»ï¼Œæžšä¸¾å ç”¨å†…å­˜ç©ºé—´è¦æ¯”æ•´åž‹å¤§ã€‚ å¸¸é‡ä½¿ç”¨ static final ä¿®é¥°ã€‚ ä½¿ç”¨ Android ç‰¹æœ‰çš„æ•°æ®ç»“æž„ã€‚ é€‚å½“é‡‡ç”¨è½¯å¼•ç”¨å’Œå¼±å¼•ç”¨ã€‚ é‡‡ç”¨å†…å­˜ç¼“å­˜å’Œç£ç›˜ç¼“å­˜ã€‚ å°½é‡é‡‡ç”¨é™æ€å†…éƒ¨ç±»ï¼Œå¯é¿å…æ½œåœ¨ç”±äºŽå†…éƒ¨ç±»å¯¼è‡´çš„å†…å­˜æ³„æ¼ã€‚ 22. Androidä¸­è½¯å¼•ç”¨ä¸Žå¼±å¼•ç”¨çš„åº”ç”¨åœºæ™¯ã€‚Java å¼•ç”¨ç±»åž‹åˆ†ç±»ï¼šåœ¨Androidåº”ç”¨çš„å¼€å‘ä¸­ï¼Œä¸ºäº†é˜²æ­¢å†…å­˜æº¢å‡ºï¼Œåœ¨å¤„ç†ä¸€äº›å ç”¨å†…å­˜å¤§è€Œä¸”å£°æ˜Žå‘¨æœŸè¾ƒé•¿çš„å¯¹è±¡æ—¶å€™ï¼Œå¯ä»¥å°½é‡åº”ç”¨è½¯å¼•ç”¨å’Œå¼±å¼•ç”¨æŠ€æœ¯ã€‚ è½¯/å¼±å¼•ç”¨å¯ä»¥å’Œä¸€ä¸ªå¼•ç”¨é˜Ÿåˆ—ï¼ˆReferenceQueueï¼‰è”åˆä½¿ç”¨ï¼Œå¦‚æžœè½¯å¼•ç”¨æ‰€å¼•ç”¨çš„å¯¹è±¡è¢«åžƒåœ¾å›žæ”¶å™¨å›žæ”¶ï¼ŒJavaè™šæ‹Ÿæœºå°±ä¼šæŠŠè¿™ä¸ªè½¯å¼•ç”¨åŠ å…¥åˆ°ä¸Žä¹‹å…³è”çš„å¼•ç”¨é˜Ÿåˆ—ä¸­ã€‚åˆ©ç”¨è¿™ä¸ªé˜Ÿåˆ—å¯ä»¥å¾—çŸ¥è¢«å›žæ”¶çš„è½¯/å¼±å¼•ç”¨çš„å¯¹è±¡åˆ—è¡¨ï¼Œä»Žè€Œä¸ºç¼“å†²å™¨æ¸…é™¤å·²å¤±æ•ˆçš„è½¯/å¼±å¼•ç”¨ã€‚ å¦‚æžœåªæ˜¯æƒ³é¿å… OOM å¼‚å¸¸çš„å‘ç”Ÿï¼Œåˆ™å¯ä»¥ä½¿ç”¨è½¯å¼•ç”¨ã€‚å¦‚æžœå¯¹äºŽåº”ç”¨çš„æ€§èƒ½æ›´åœ¨æ„ï¼Œæƒ³å°½å¿«å›žæ”¶ä¸€äº›å ç”¨å†…å­˜æ¯”è¾ƒå¤§çš„å¯¹è±¡ï¼Œåˆ™å¯ä»¥ä½¿ç”¨å¼±å¼•ç”¨ã€‚ å¯ä»¥æ ¹æ®å¯¹è±¡æ˜¯å¦ç»å¸¸ä½¿ç”¨æ¥åˆ¤æ–­é€‰æ‹©è½¯å¼•ç”¨è¿˜æ˜¯å¼±å¼•ç”¨ã€‚å¦‚æžœè¯¥å¯¹è±¡å¯èƒ½ä¼šç»å¸¸ä½¿ç”¨çš„ï¼Œå°±å°½é‡ç”¨è½¯å¼•ç”¨ã€‚å¦‚æžœè¯¥å¯¹è±¡ä¸è¢«ä½¿ç”¨çš„å¯èƒ½æ€§æ›´å¤§äº›ï¼Œå°±å¯ä»¥ç”¨å¼±å¼•ç”¨ã€‚ 23. Bitmap åŽ‹ç¼©ç­–ç•¥ åŠ è½½ Bitmap çš„æ–¹å¼ï¼š BitmapFactory å››ç±»æ–¹æ³•ï¼š decodeFile(æ–‡ä»¶ç³»ç»Ÿ) decodeResourece(èµ„æº) decodeStream(è¾“å…¥æµ) decodeByteArray(å­—èŠ‚æ•°) BitmapFactory.opeions å‚æ•° inSampleSize é‡‡æ ·çŽ‡ï¼Œå¯¹å›¾ç‰‡é«˜å’Œå®½è¿›è¡Œç¼©æ”¾ï¼Œä»¥æœ€å°æ¯”è¿›è¡Œç¼©æ”¾ï¼ˆä¸€èˆ¬å–å€¼ä¸º2çš„æŒ‡æ•°ï¼‰ã€‚é€šå¸¸æ˜¯æ ¹æ®å›¾ç‰‡å®½é«˜å®žé™…çš„å¤§å°/éœ€è¦çš„å®½é«˜å¤§å°ï¼Œåˆ†åˆ«è®¡ç®—å‡ºå®½å’Œé«˜çš„ç¼©æ”¾æ¯”ã€‚ä½†åº”è¯¥å–å…¶ä¸­æœ€å°çš„ç¼©æ”¾æ¯”ï¼Œé¿å…ç¼©æ”¾å›¾ç‰‡å¤ªå°ï¼Œåˆ°è¾¾æŒ‡å®šæŽ§ä»¶ä¸­ä¸èƒ½é“ºæ»¡ï¼Œéœ€è¦æ‹‰ä¼¸ä»Žè€Œå¯¼è‡´æ¨¡ç³Šã€‚ inJustDecodeBounds èŽ·å–å›¾ç‰‡çš„å®½é«˜ä¿¡æ¯ï¼Œäº¤ç»™ inSampleSize å‚æ•°é€‰æ‹©ç¼©æ”¾æ¯”ã€‚é€šè¿‡inJustDecodeBounds=trueï¼Œç„¶åŽåŠ è½½å›¾ç‰‡å°±å¯ä»¥å®žçŽ°åªè§£æžå›¾ç‰‡çš„å®½é«˜ä¿¡æ¯ï¼Œå¹¶ä¸ä¼šçœŸæ­£çš„åŠ è½½å›¾ç‰‡ï¼Œæ‰€ä»¥è¿™ä¸ªæ“ä½œæ˜¯è½»é‡çº§çš„ã€‚å½“èŽ·å–äº†å®½é«˜ä¿¡æ¯ï¼Œè®¡ç®—å‡ºç¼©æ”¾æ¯”åŽï¼Œç„¶åŽåœ¨å°†inJustDecodeBounds=false,å†é‡æ–°åŠ è½½å›¾ç‰‡ï¼Œå°±å¯ä»¥åŠ è½½ç¼©æ”¾åŽçš„å›¾ç‰‡ã€‚ é«˜æ•ˆåŠ è½½ Bitmap çš„æµç¨‹ å°† BitmapFactory.Options çš„ inJustDecodeBounds å‚æ•°è®¾ä¸º true å¹¶åŠ è½½å›¾ç‰‡ ä»Ž BitmapFactory.Options ä¸­å–å‡ºå›¾ç‰‡åŽŸå§‹çš„å®½é«˜ä¿¡æ¯ï¼Œå¯¹åº”äºŽ outWidth å’Œ outHeight å‚æ•° æ ¹æ®é‡‡æ ·çŽ‡è§„åˆ™å¹¶ç»“åˆç›®æ ‡ view çš„å¤§å°è®¡ç®—å‡ºé‡‡æ ·çŽ‡ inSampleSize å°† BitmapFactory.Options çš„ inJustDecodeBounds è®¾ç½®ä¸º false é‡æ–°åŠ è½½å›¾ç‰‡ 24. è‡ªå®šä¹‰Viewè¿‡ç¨‹ï¼šonMeasure()ã€onLayout()ã€onDraw() onMeasure()æ–¹æ³•ï¼šå•ä¸€ Viewï¼Œä¸€èˆ¬é‡å†™æ­¤æ–¹æ³•ï¼Œé’ˆå¯¹ wrap_content æƒ…å†µï¼Œè§„å®š View é»˜è®¤çš„å¤§å°å€¼ï¼Œé¿å…äºŽ match_parent æƒ…å†µä¸€è‡´ã€‚ViewGroupï¼Œè‹¥ä¸é‡å†™ï¼Œå°±ä¼šæ‰§è¡Œå’Œå•å­View ä¸­ç›¸åŒé€»è¾‘ï¼Œä¸ä¼šæµ‹é‡å­ Viewã€‚ä¸€èˆ¬ä¼šé‡å†™ onMeasure()æ–¹æ³•ï¼Œå¾ªçŽ¯æµ‹é‡å­Viewã€‚ onLayout()æ–¹æ³•:å•ä¸€ Viewï¼Œä¸éœ€è¦å®žçŽ°è¯¥æ–¹æ³•ã€‚ViewGroup å¿…é¡»å®žçŽ°ï¼Œè¯¥æ–¹æ³•æ˜¯ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œå®žçŽ°è¯¥æ–¹æ³•ï¼Œæ¥å¯¹å­ View è¿›è¡Œå¸ƒå±€ã€‚ onDraw()æ–¹æ³•ï¼šæ— è®ºå•ä¸€Viewï¼Œæˆ–è€…ViewGroupéƒ½éœ€è¦å®žçŽ°è¯¥æ–¹æ³•ï¼Œå› å…¶æ˜¯ä¸ªç©ºæ–¹æ³•. 25. äº‹ä»¶åˆ†å‘æœºåˆ¶äº‹ä»¶åˆ†å‘æœºåˆ¶è¯¦è§£ 26. Androidé•¿è¿žæŽ¥ï¼Œæ€Žä¹ˆå¤„ç†å¿ƒè·³æœºåˆ¶ã€‚ é•¿è¿žæŽ¥ï¼šé•¿è¿žæŽ¥æ˜¯å»ºç«‹è¿žæŽ¥ä¹‹åŽ, ä¸ä¸»åŠ¨æ–­å¼€. åŒæ–¹äº’ç›¸å‘é€æ•°æ®, å‘å®Œäº†ä¹Ÿä¸ä¸»åŠ¨æ–­å¼€è¿žæŽ¥, ä¹‹åŽæœ‰éœ€è¦å‘é€çš„æ•°æ®å°±ç»§ç»­é€šè¿‡è¿™ä¸ªè¿žæŽ¥å‘é€. å¿ƒè·³åŒ…ï¼šå…¶å®žä¸»è¦æ˜¯ä¸ºäº†é˜²æ­¢NATè¶…æ—¶ï¼Œå®¢æˆ·ç«¯éš”ä¸€æ®µæ—¶é—´å°±ä¸»åŠ¨å‘ä¸€ä¸ªæ•°æ®ï¼ŒæŽ¢æµ‹è¿žæŽ¥æ˜¯å¦æ–­å¼€ æœåŠ¡å™¨å¤„ç†å¿ƒè·³åŒ…ï¼šå‡å¦‚å®¢æˆ·ç«¯å¿ƒè·³é—´éš”æ˜¯å›ºå®šçš„, é‚£ä¹ˆæœåŠ¡å™¨åœ¨è¿žæŽ¥é—²ç½®è¶…è¿‡è¿™ä¸ªæ—¶é—´è¿˜æ²¡æ”¶åˆ°å¿ƒè·³æ—¶, å¯ä»¥è®¤ä¸ºå¯¹æ–¹æŽ‰çº¿, å…³é—­è¿žæŽ¥. å¦‚æžœå®¢æˆ·ç«¯å¿ƒè·³ä¼šåŠ¨æ€æ”¹å˜, åº”å½“è®¾ç½®ä¸€ä¸ªæœ€å¤§å€¼, è¶…è¿‡è¿™ä¸ªæœ€å¤§å€¼æ‰è®¤ä¸ºå¯¹æ–¹æŽ‰çº¿. è¿˜æœ‰ä¸€ç§æƒ…å†µå°±æ˜¯æœåŠ¡å™¨é€šè¿‡TCPè¿žæŽ¥ä¸»åŠ¨ç»™å®¢æˆ·ç«¯å‘æ¶ˆæ¯å‡ºçŽ°å†™è¶…æ—¶, å¯ä»¥ç›´æŽ¥è®¤ä¸ºå¯¹æ–¹æŽ‰çº¿. Androidå¾®ä¿¡æ™ºèƒ½å¿ƒè·³æ–¹æ¡ˆ 27. Zygoteçš„å¯åŠ¨è¿‡ç¨‹åœ¨Androidç³»ç»Ÿé‡Œé¢ï¼Œzygoteæ˜¯ä¸€ä¸ªè¿›ç¨‹çš„åå­—ã€‚Androidæ˜¯åŸºäºŽLinux Systemçš„ï¼Œå½“ä½ çš„æ‰‹æœºå¼€æœºçš„æ—¶å€™ï¼ŒLinuxçš„å†…æ ¸åŠ è½½å®Œæˆä¹‹åŽå°±ä¼šå¯åŠ¨ä¸€ä¸ªå«â€œinitâ€œçš„è¿›ç¨‹ã€‚åœ¨Linux Systemé‡Œé¢ï¼Œæ‰€æœ‰çš„è¿›ç¨‹éƒ½æ˜¯ç”±initè¿›ç¨‹forkå‡ºæ¥çš„ï¼Œæˆ‘ä»¬çš„zygoteè¿›ç¨‹ä¹Ÿä¸ä¾‹å¤–ã€‚ 28. Android IPC:BinderåŽŸç†ã€‚ IPC:ä¸åŒè¿›ç¨‹ä¹‹é—´å½¼æ­¤æ˜¯ä¸èƒ½å…±äº«çš„ï¼Œè€Œå†…æ ¸ç©ºé—´å´æ˜¯å¯å…±äº«çš„ã€‚Clientè¿›ç¨‹å‘Serverè¿›ç¨‹é€šä¿¡ï¼Œåˆ©ç”¨è¿›ç¨‹é—´å¯å…±äº«çš„å†…æ ¸å†…å­˜ç©ºé—´æ¥å®Œæˆåº•å±‚é€šä¿¡å·¥ä½œçš„ï¼ŒClientç«¯ä¸ŽServerç«¯è¿›ç¨‹å¾€å¾€é‡‡ç”¨ioctlç­‰æ–¹æ³•è·Ÿå†…æ ¸ç©ºé—´çš„é©±åŠ¨è¿›è¡Œäº¤äº’ã€‚ BinderåŽŸç†:Binderé€šä¿¡é‡‡ç”¨C/Sæž¶æž„ï¼ŒåŒ…å«Clientã€Serverã€ServiceManagerä»¥åŠbinderé©±åŠ¨ï¼Œå…¶ä¸­ServiceManagerç”¨äºŽç®¡ç†ç³»ç»Ÿä¸­çš„å„ç§æœåŠ¡ã€‚æž¶æž„å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š Binder å››ä¸ªè§’è‰²ï¼š Clientè¿›ç¨‹ï¼šä½¿ç”¨æœåŠ¡çš„è¿›ç¨‹ server è¿›ç¨‹ï¼šæä¾›æœåŠ¡çš„è¿›ç¨‹ ServiceManager è¿›ç¨‹ï¼šå°†å­—ç¬¦åž‹æ˜¯çš„ Binder åå­—è½¬ä¸º Client ä¸­å¯¹è¯¥ Binder çš„å¼•ç”¨ï¼Œä½¿å¾— Client èƒ½å¤Ÿé€šè¿‡ Binder åå­—èŽ·å–åˆ° Server ä¸­ Binder å®žä½“çš„å¼•ç”¨ã€‚ Binder é©±åŠ¨ï¼šè¿›ç¨‹é—´ Binder é€šä¿¡çš„å»ºç«‹ï¼ŒBinder åœ¨è¿›ç¨‹é—´çš„ä¼ é€’ï¼ŒBinder å¼•ç”¨è®¡æ•°ç®¡ç†ï¼Œæ•°æ®åŒ…åœ¨è¿›ç¨‹é—´ä¼ é€’å’Œäº¤äº’ç­‰ä¸€ç³»åˆ—åº•å±‚æ”¯æŒã€‚Binder è¿è¡Œæœºåˆ¶ï¼š æ³¨å†ŒæœåŠ¡ï¼šServer åœ¨ ServiceManager æ³¨å†ŒæœåŠ¡ èŽ·å–æœåŠ¡ï¼šClient ä»Ž ServiceManager èŽ·å–ç›¸åº”çš„ Service ä½¿ç”¨æœåŠ¡ï¼šClient æ ¹æ®å¾—åˆ°çš„ Service ä¿¡æ¯å»ºç«‹ä¸Ž Service æ‰€åœ¨çš„ Server è¿›ç¨‹é€šä¿¡çš„é€šè·¯å¯ä¸Ž Server è¿›è¡Œäº¤äº’ã€‚ 29. Android 5.0ï¼Œ6.0ï¼Œ7.0 8.0æ–°ç‰¹æ€§ã€‚ 5.0: Material Design æ”¯æŒå¤šç§è®¾å¤‡ å…¨æ–°é€šçŸ¥ä¸­å¿ƒ æ”¯æŒ64ä½ ART è™šæ‹Ÿæœº ç”µæ± ç»­èˆªæ”¹è¿› å…¨æ–°â€œæœ€è¿‘åº”ç”¨ç¨‹åºâ€ å®‰å…¨æ€§æ”¹è¿› ä¸åŒæ•°æ®ç‹¬ç«‹ä¿å­˜ æ”¹è¿›æœç´¢ æ”¯æŒè“ç‰™4.1ã€USB Audioã€å¤šäººåˆ†äº«ç­‰ 6.0ï¼š åŠ¨æ€æƒé™ç®¡ç† ç³»ç»Ÿå±‚æ”¯æŒæŒ‡çº¹è¯†åˆ« APP å…³è” Android Pay ç”µæºç®¡ç† TF å¡é»˜è®¤å­˜å‚¨ 7.0ï¼š åˆ†å±å¤šä»»åŠ¡ ä¸‹æ‹‰å¿«æ·å¼€å…³ æ–°é€šçŸ¥æ¶ˆæ¯ å¤œé—´æ¨¡å¼ æµé‡ä¿æŠ¤æ¨¡å¼ å…¨æ–°è®¾ç½®æ ·å¼ æ”¹è¿› Doze ä¼‘çœ æœºåˆ¶ ç³»ç»Ÿçº§ç”µè¯é»‘åå• èœå•é”®å¿«é€Ÿåˆ‡æ¢åº”ç”¨ 8.0ï¼š ç”»ä¸­ç”» é€šçŸ¥æ ‡å¿— è‡ªåŠ¨å¡«å……æ¡†æž¶ ç³»ç»Ÿä¼˜åŒ– åŽå°é™åˆ¶ ç­‰ç­‰ä¼˜åŒ–å¾ˆå¤šAndroid 8.0 è‡´è°¢ï¼šAndroid æ ¡æ‹›é¢è¯•æŒ‡å—Android å¼€å‘å·¥ç¨‹å¸ˆé¢è¯•æŒ‡å—ç‰¹åˆ«æ„Ÿè°¢ï¼šstormzhangï¼Œå…³æ³¨å¼ å“¥ä»¥æ¥åˆ†äº«çš„ä¸œè¥¿å¯¹è‡ªå·±å¸®åŠ©å¾ˆå¤§ã€‚ stormzhangåšå®¢ å…¬ä¼—å· çŸ¥è¯†æ˜Ÿçƒ]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[è¿ç”¨çº¦æŸæ€§ç»Ÿè®¡æœºå™¨ç¿»è¯‘è¿›è¡Œ Aspect-Level çš„è·¨è¯­è¨€æƒ…æ„Ÿåˆ†ç±»]]></title>
      <url>%2F2017%2F03%2F20%2F%E8%BF%90%E7%94%A8%E7%BA%A6%E6%9D%9F%E6%80%A7%E7%BB%9F%E8%AE%A1%E6%9C%BA%E5%99%A8%E7%BF%BB%E8%AF%91%E8%BF%9B%E8%A1%8C-Aspect-Level-%E7%9A%84%E8%B7%A8%E8%AF%AD%E8%A8%80%E6%83%85%E6%84%9F%E5%88%86%E7%B1%BB-5%2F</url>
      <content type="text"><![CDATA[æœ¬æ–‡æ˜¯å¯¹ Aspect-Level Cross-lingual Sentiment Classiï¬cation with Constrained SMT è®ºæ–‡çš„ çš„ä¸€äº›ç¬”è®°åŠç†è§£ï¼Œæ–¹ä¾¿è‡ªå·±ç†è§£ä»¥åŠå…¶ä»–äººçš„å‚è€ƒã€‚ å¦‚æœ‰å…¶ä»–äººçœ‹åˆ°æˆ‘çš„åšå®¢çš„å†…å®¹åŽè¯·åœ¨ç•™è¨€å¤„ç•™ä¸‹è‡ªå·±çš„æ„è§å’Œå¯¹æˆ‘æ‰€ç†è§£çš„é”™è¯¯çš„æŒ‡æ­£ï¼Œè°¢è°¢ï¼ ç”±äºŽè‡ªå·±è‹±è¯­èƒ½åŠ›æœ‰é™ï¼Œå…¶ä¸­ä¸€éƒ¨åˆ†è¯è¯­å¯èƒ½ç†è§£æœ‰è¯¯ï¼Œå¸Œæœ›æŒ‡æ­£ï¼ ä¼ ç»Ÿçš„æƒ…æ„Ÿåˆ†æžæ–¹æ³•ä¸»è¦æ˜¯åŸºäºŽï¼š åŸºäºŽæœºå™¨å­¦ä¹ çš„æ–¹æ³•ï¼šé€šè¿‡å¯¹ç‰¹å¾è¿›è¡Œæå–æ ‡è®°çš„ç›‘ç£å­¦ä¹ æ–¹æ³•ã€‚ åŸºäºŽè¯æ±‡çš„æ–¹æ³•ï¼šé€šè¿‡æ„è§çŸ­è¯­æˆ–è¯æ±‡çš„å…³è”è§„åˆ™ã€‚ è€Œå¤§å¤šçš„æƒ…æ„Ÿåˆ†ç±»æ–¹æ³•ä¸»è¦åˆ†ä¸ºä¸‰ç§èµ„æºå’Œæ–‡æœ¬ï¼š è®­ç»ƒï¼šç”¨äºŽè®­ç»ƒåˆ†ç±»å™¨çš„èµ„æºï¼ˆæœé›†çš„è®­ç»ƒç¤ºä¾‹å’Œè¯æ±‡ï¼‰ã€‚æµ‹è¯•ï¼šç”¨æ¥åˆ†æžæƒ…æ„Ÿæ„è§çš„èµ„æºã€‚è¾“å‡ºï¼šè¾“å‡ºçš„åˆ†ç±»ç»“æžœã€‚ ä¼ ç»Ÿçš„è·¨è¯­è¨€æƒ…æ„Ÿåˆ†ç±»æ–¹æ³•æ˜¯åŸºäºŽ æ–‡æ¡£ æˆ– å¥å­ çš„ç²—ç²’åº¦å±‚é¢ï¼Œç”±äºŽä¸æ¶‰åŠåˆ°ç‰¹æ®Šçš„æ ‡è®°æ‰€ä»¥å¾ˆå®¹æ˜“è¿›è¡Œè¯­è¨€ç¿»è¯‘ï¼Œè€Œåœ¨ Aspect å±‚é¢æ ‡è®°ä¾èµ–äºŽä¸€ç³»åˆ—å¸¦ç‰¹å¾æ ‡è®°çš„æ„è§å•å…ƒï¼Œåœ¨ç¿»è¯‘åˆ°å¦ä¸€ç§è¯­è¨€æ—¶éœ€è¦æ˜ å°„ä¸¤ç§è¯­è¨€ä¹‹é—´çš„æ„è§å•å…ƒï¼Œè€Œåœ¨ aspect å±‚é¢ç”±äºŽæ ‡ç­¾ä¾èµ–äºŽæ ‡è®°çš„ä¸€ç»„ç‰¹å®šæ„è§å•å…ƒæœ‰å…³ï¼Œå½“è¢«è½¬ç§»åˆ°å¦ä¸€ç§è¯­è¨€æ—¶ï¼Œéœ€è¦æ˜ å°„ä¸¤ç§è¯­è¨€ä¹‹é—´çš„æ„è§å•å…ƒã€‚ å› æ­¤æå‡ºä¸€ç§ä¿ç•™æ„è§å•å…ƒè¾¹ç•Œçš„ç¿»è¯‘æ–¹æ³•ï¼Œè¿™æ ·é¿å…äº†è½¬æ¢åŽéœ€è¦è¿›è¡Œæºè¯­è¨€å’Œç›®æ ‡è¯­è¨€ä¹‹é—´çš„æ„è§å•å…ƒæ˜ å°„ï¼ˆè¯å¯¹é½ï¼‰ã€‚è¯¥æ–¹æ³•ä¸»è¦æœ‰ä¸¤ç§ç”¨ä¾‹ï¼šç”¨ä¾‹1ï¼šç”¨è®­ç»ƒè¯­è¨€è®­ç»ƒ LTRAIN çš„åˆ†ç±»å™¨å¯¹æµ‹è¯•è¯­è¨€ LTEST è¿›è¡Œæƒ…æ„Ÿæžæ€§æµ‹è¯•ï¼Œå¾—å‡ºçš„ LOUTæ˜¯æµ‹è¯•è¯­è¨€çš„æƒ…æ„Ÿæžæ€§ã€‚ç”±ï¼ˆ1ï¼‰è¡¨ç¤ºã€‚$$L_{TRAIN} \neq L_{TEST}; L_{OUT} = L_{TEST} (1)$$é€šå¸¸æœ‰ä¸¤ç§æ–¹æ³•ï¼ša. å°†å¯ç”¨è®­ç»ƒèµ„æºç¿»è¯‘åˆ°æµ‹è¯•è¯­è¨€ä¸­åŽ»ç„¶åŽæž„å»ºåˆ†ç±»å™¨ï¼Œå¹¶ç”¨æµ‹è¯•è¯­è¨€è¿›è¡Œæµ‹è¯•å¾—å‡ºç»“æžœ.b. å°†æµ‹è¯•è¯­è¨€ç¿»è¯‘åˆ°ç›®æ ‡è¯­è¨€ä¸­å¹¶å¾—å‡ºç»“æžœï¼Œå¹¶å°†å¾—åˆ°çš„æ„è§å•å…ƒç¿»è¯‘å›žæºè¯­è¨€ï¼Œå¹¶å°†ç»“æžœæ˜ å°„åˆ°æµ‹è¯•é›†ä¸ŠåŽ»ã€‚ SAä¸ºæƒ…æ„Ÿåˆ†æžï¼ŒT ä¸ºç¿»è¯‘ï¼ŒProj ä¸ºæ˜ å°„ï¼ŒLearn ä¸ºå­¦ä¹ ã€‚ ç”¨ä¾‹2ï¼šç”¨è®­ç»ƒè¯­è¨€è®­ç»ƒåˆ†ç±»å™¨ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦å¯¹ä¸åŒçš„è¯­è¨€è¿›è¡Œåˆ†æžç»“æžœï¼Œå› æ­¤å…¬å¼ï¼ˆ2ï¼‰æˆç«‹ã€‚$$ L_{OUT} \neq L_{TEST}ï¼ˆ2ï¼‰$$é€šå¸¸æœ‰ä¸¤ç§æ–¹æ³•ï¼šc. åœ¨æµ‹è¯•è¯­è¨€ä¸­åˆ†æžæµ‹è¯•è¯­è¨€çš„çš„æƒ…æ„Ÿæžæ€§ï¼Œå¹¶ä¸”æŠŠç»“æžœç¿»è¯‘åˆ°æœŸæœ›çš„è¯­è¨€ä¸­åŽ»ï¼Œå³ï¼š$$L_{TRAIN} = L_{TEST}$$d. æµ‹è¯•è¯­è¨€é¦–å…ˆè¢«ç¿»è¯‘åˆ°æœŸæœ›è¯­è¨€ä¸­ï¼Œå¹¶ä¸”ç”¨æœŸæœ›è¯­è¨€çš„æƒ…æ„Ÿåˆ†æžæ–¹æ³•è¿›è¡Œæµ‹è¯•ï¼Œå³ï¼š$$L_{TRAIN} = L_{OUT}$$]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[åŸºäºŽ Aspect çš„æƒ…æ„Ÿåˆ†æž]]></title>
      <url>%2F2017%2F03%2F06%2F%E5%9F%BA%E4%BA%8E-Aspect-%E7%9A%84%E6%83%85%E6%84%9F%E5%88%86%E6%9E%90%2F</url>
      <content type="text"><![CDATA[å†™æœ¬æ–‡çš„ç›®çš„åœ¨äºŽè®°å½•è‡ªå·±åœ¨é˜…è¯» Bing Liu çš„ Sentiment Analysis and Opinion Mining çš„ä¸€äº›ç¬”è®°ä»¥åŠå¯¹æ–‡ç« ä¸­æ‰€å†™ä¿¡æ¯çš„ç†è§£ï¼Œæ–¹ä¾¿è‡ªå·±ç†è§£ä»¥åŠå…¶ä»–äººçš„å‚è€ƒã€‚ æœ¬ç¯‡å†…å®¹ä¸»è¦æ˜¯è‡ªå·±å¯¹è¯¥ä¹¦ç¬¬äº”ç« çš„å†…å®¹ Aspect-based Sentiment Analysis çš„ç†è§£ï¼Œå¦‚æœ‰å…¶ä»–äººçœ‹åˆ°æˆ‘çš„åšå®¢çš„å†…å®¹åŽè¯·åœ¨ç•™è¨€å¤„ç•™ä¸‹è‡ªå·±çš„æ„è§å’Œå¯¹æˆ‘æ‰€ç†è§£çš„é”™è¯¯çš„æŒ‡æ­£ï¼Œè°¢è°¢ï¼ ç”±äºŽè‡ªå·±è‹±è¯­èƒ½åŠ›æœ‰é™ï¼Œå…¶ä¸­ä¸€å¤§éƒ¨åˆ†è¯è¯­å¯èƒ½ç†è§£æœ‰è¯¯ï¼Œå¸Œæœ›æŒ‡æ­£ï¼ åŸºæœ¬æ¦‚å¿µåœ¨ä¼ ç»Ÿçš„æ–‡æ¡£æˆ–å¥å­çº§åˆ«çš„æƒ…æ„Ÿåˆ†æžæ–¹é¢ï¼Œåœ¨åˆ†æžæ˜¯ä¸»è¦æœ‰äº”éƒ¨åˆ†ç»„æˆï¼Œåˆ†åˆ«æ˜¯ ( ei, aij, sijkl, hk, tl ). ei : ä¸€ä¸ªå®žä½“æˆ–ç›®æ ‡çš„åç§°; aij : ä¸ºè¯¥å®žä½“çš„ä¸€ä¸ªæ–¹é¢ (è¯ºåŸºäºšç”µæ± ä¸é”™ï¼Œç”µæ± ä¸ºè¯¥æ–¹é¢) ; sijkl : å€¼å¯¹å®žä½“æŸä¸ªæ–¹é¢çš„æ„è§ï¼Œå¦‚ä¸Šé¢æ‰€ä¸¾çš„ä¾‹å­ï¼Œä¸é”™ä¸ºå¯¹è¯ºåŸºäºšç”µæ± çš„æ„è§; hk : ä¸ºå‘è¡¨æ„è§çš„äººæˆ–è€…éƒ¨é—¨ (holder) ; tl : ä¸ºå‘è¡¨è¯¥æ„è§çš„æ—¶é—´; ä¸ºäº†èŽ·å–è¿™äº”éƒ¨åˆ†éœ€è¦è¿›è¡Œå…­ä¸ªä»»åŠ¡ï¼Œåœ¨ä»»åŠ¡ä¹‹å‰éœ€è¦è§£é‡Šä¸€ä¸‹æ‰€ç”¨åˆ°çš„æ¦‚å¿µï¼š å®žä½“æ¨¡åž‹ ( Model of entity ): ä¸€ä¸ªå®žä½“æˆ–ç›®æ ‡ ei æ˜¯æœ‰ä¸€ç»„ aspects çš„é›†åˆç»„æˆ A = { ai1, ai2, &hellip;, ain }. ei å¯ä»¥ç”±å…¶å®žä½“è¡¨è¾¾å¼çš„ä»»ä¸€çš„æœ‰é™é›†åˆæ¥è¡¨ç¤º { eei1, eei2, &hellip;, eeis }. æ¯ä¸ªå®žä½“ä¸­çš„ aspects aij âˆˆ Ai å¯ä»¥è¢«å…¶ aspect (æ–¹é¢) è¡¨è¾¾å¼çš„ä»»ä¸€æœ‰é™é›†åˆæ¥è¡¨ç¤º { aeij1, aeij2, &hellip;, aeijm }. æ–‡æœ¬æ„è§æ¨¡åž‹ ( Model of opinion document ): ä¸€ä¸ªæ„è§æ–‡æ¡£ d åŒ…å«åœ¨æŸä¸€ä¸ªæ—¶é—´ç‚¹ä¸Šæ„è§æŒæœ‰è€…é›†åˆ { h1, h2, &hellip;, hp} å¯¹å®žä½“é›†åˆ { e1, e2, &hellip;, ei } çš„ä¸€äº›æ–¹é¢ ( aspects ) æ‰€å‘è¡¨çš„æ„è§ã€‚ æ‰€ä»¥ï¼Œç»™å®šä¸€ä¸ªæ„è§æ–‡æ¡£Dï¼Œæ„è§åˆ†æžåŒ…å«ä»¥ä¸‹6ä¸ªä»»åŠ¡ï¼š Task 1 å®žä½“æå–ä¸Žåˆ†ç±» ( Entity extraction and categorization): æå–Dä¸­çš„æ‰€æœ‰å®žä½“è¡¨è¾¾å¼ï¼Œå¹¶å°†åŒä¹‰å®žä½“è¡¨è¾¾å¼åˆ†ç±»æˆ–åˆ†ç»„åˆ°å®žä½“é›†ç¾¤ï¼ˆæˆ–ç±»åˆ«ï¼‰ä¸­ã€‚ æ¯ä¸ªå®žä½“è¡¨è¾¾å¼é›†åˆæŒ‡ç¤ºå”¯ä¸€å®žä½“ ei ; Task 2 æ–¹é¢(å±žæ€§)æå–ä¸Žåˆ†ç±» ( aspect extraction and categorization): æå–å®žä½“çš„æ‰€æœ‰æ–¹é¢ ( aspect ) è¡¨è¾¾å¼ï¼Œå¹¶å°†è¿™äº›æ–¹é¢è¡¨è¾¾å¼åˆ†ç±»åˆ°é›†ä¸­ã€‚ å®žä½“ ei çš„æ¯ä¸ªæ–¹é¢è¡¨è¾¾å¼é›†è¡¨ç¤ºå”¯ä¸€çš„æ–¹é¢ aij ; Task 3 æ„è§æŒæœ‰è€…(å‘å¸ƒè€…)æå–ä¸Žåˆ†ç±» ( opinion holder extraction and categorization): ä»Žæ–‡æœ¬æˆ–ç»“æž„åŒ–æ•°æ®ä¸­æå–æ„è§æŒæœ‰äººçš„æ„è§ï¼Œå¹¶å¯¹å…¶è¿›è¡Œåˆ†ç±»; Task 4 æ—¶é—´æå–ä¸Žåˆ†ç±» ( time extraction and categorization): æå–æ„è§çš„æ—¶é—´ï¼Œæ ‡å‡†åŒ–ä¸åŒçš„æ—¶é—´æ ¼å¼; Task 5 å¯¹å±žæ€§æƒ…ç»ªåˆ†ç±» ( aspect sentiment classification ): ç¡®å®šå…³äºŽæ–¹é¢ aij çš„æ„è§æ˜¯æ­£é¢çš„ï¼Œè´Ÿé¢çš„è¿˜æ˜¯ä¸­æ€§çš„ï¼Œæˆ–è€…å°†æ–¹é¢çš„æ•°å­—æƒ…æ„Ÿè¯„çº§åˆ†é…; Task 6 äº”å…ƒæ„è§ç»„çš„ç”Ÿæˆ ( opinion quintuple genertation ): åŸºäºŽä¸Šè¿°ä»»åŠ¡çš„ç»“æžœç”Ÿæˆåœ¨æ–‡æ¡£dä¸­è¡¨è¾¾çš„æ‰€æœ‰æ„è§äº”å…ƒç»„ ( ei, aij, sijkl, hk, tl ) ; é€šå¸¸æŠŠåŸºäºŽè¯¥æ¡†æž¶çš„æ„è§åˆ†æžå«åšåŸºäºŽ aspect çš„æƒ…æ„Ÿåˆ†æž ( aspect-based sentiment analysis )ã€‚ Aspect-levelè¿™é‡Œä¸»è¦é›†ä¸­è®¨è®ºä¸Šè¿°å…­ä¸ªä»»åŠ¡ä¸­çš„æ–¹é¢(å±žæ€§)æå–ä¸Žåˆ†ç±» ( aspect extraction and categorization) ä»»åŠ¡ï¼š æ–¹é¢æå– ( Aspect extraction ): ä¾‹å¦‚ â€œThe voice quality of this phone is amazing,â€ å…¶ä¸­ â€voice qualityâ€œ æ˜¯ â€This phoneâ€œ çš„æ–¹é¢ï¼Œä½†æ˜¯ â€This phoneâ€œ å¹¶ä¸æŒ‡æ˜Žæ˜¯ä¸€ä¸ª GENRAL çš„æ–¹é¢ï¼Œå› ä¸ºåœ¨è¿™é‡Œä»–åªæ˜¯ä»£è¡¨äº†ç”µè¯çš„ voice quality. ä½†æ˜¯ â€I love this phoneâ€œ æŒ‡æ˜Žäº†ç”µè¯ä»£è¡¨äº†ä¸€ä¸ªå…¨ä½“ã€‚æ‰€ä»¥ GENRAL æ–¹é¢ä¸º â€This phoneâ€œ. è®°ä½æ¯å½“æˆ‘ä»¬è°ˆè®ºä¸€ä¸ªæ–¹é¢æ—¶ï¼Œæˆ‘ä»¬å¿…é¡»çŸ¥é“å®ƒå±žäºŽå“ªä¸ªå®žä½“ã€‚ æ–¹é¢åˆ†ç±» ( Asepect Sentiment classfication ): è¿™ä¸ªä»»åŠ¡å†³å®šäº†ä¸åŒæ–¹é¢çš„è§‚ç‚¹æ˜¯ç§¯æžï¼Œæ¶ˆæžè¿˜æ˜¯ä¸­ç«‹ã€‚ åœ¨ä¸Šé¢çš„ç¬¬ä¸€ä¸ªä¾‹å­ä¸­ï¼Œå¯¹ â€œvoice qualityâ€ æ–¹é¢çš„æ„è§æ˜¯ç§¯æžçš„ã€‚ åœ¨ç¬¬äºŒä¸ªä¾‹å­ä¸­ï¼Œå¯¹ GENERAL æ–¹é¢çš„æ„è§ä¹Ÿæ˜¯ç§¯æžçš„ã€‚ æ–¹é¢æƒ…æ„Ÿåˆ†ç±»( Aspect Sentiment Classification )åœ¨è¿›è¡Œåˆ†ç±»æ—¶ä¸»è¦æœ‰ä¸¤ç§æ–¹æ³•ï¼š åŸºäºŽç›‘ç£å­¦ä¹ çš„æ–¹æ³• åŸºäºŽè¯å…¸çš„æ–¹æ³• åŸºäºŽç›‘ç£å­¦ä¹ çš„æ–¹æ³•ï¼šå½“å‰çš„ä¸»è¦è¿›è¡Œçš„æ–¹æ³•æ˜¯åˆ†æžç¡®å®šä¾èµ–å…³ç³»ï¼Œæ¯”å¦‚: ( Jiang et al..2011 ) å°†ä¸€ç»„æ–¹é¢çš„ç›¸å…³ç‰¹å¾è¿›è¡Œåˆ†ç±» ( Boiy and Moens, 2009 ) åŸºäºŽè§£æžæ ‘ä¸­å¯¹ç›®æ ‡çš„æ–¹é¢ç‰¹å¾çš„ä½ç½®è¿›è¡ŒåŠ æƒåˆ†æž åŸºäºŽç›‘ç£å­¦ä¹ çš„æ–¹æ³•ä¾èµ–äºŽè®­ç»ƒæ•°æ®ï¼Œè¿™è¡¨æ˜Žä»Žä¸€ä¸ªé¢†åŸŸæ ‡è®°çš„è®­ç»ƒæ•°æ®è®­ç»ƒå‡ºæ¥çš„æ¨¡åž‹åœ¨å¦ä¸€ä¸ªé¢†åŸŸä¸­è¡¨çŽ°å¾ˆå·®ã€‚å¹¶ä¸”å½“å‰çš„æ–¹æ³•ç ”ç©¶ä¹Ÿä¸»è¦åº”ç”¨äºŽæ–‡æ¡£çº§åˆ«ï¼Œå› ä¸ºæ–‡æ¡£çº§åˆ«è¾ƒé•¿ï¼Œå¹¶ä¸”åŒ…å«æ¯”å•ä¸ªå¥å­æ›´å¤šçš„åˆ†ç±»ç‰¹å¾ã€‚å› æ­¤ï¼Œç›‘ç£å­¦ä¹ éš¾ä»¥æ‰©å±•åˆ°å¤§é‡çš„åº”ç”¨é¢†åŸŸã€‚ åŸºäºŽè¯å…¸çš„æ–¹æ³•ï¼šè¯¥æ–¹æ³•å¯ä»¥é¿å…ä¸€äº›åŸºäºŽç›‘ç£å­¦ä¹ æ‰€é‡åˆ°çš„é—®é¢˜ï¼Œå¹¶ä¸”å·²ç»è¯æ˜Žåœ¨å¤§é‡é¢†åŸŸè¡¨çŽ°ä¸é”™ã€‚è¿™æ ·çš„æ–¹æ³•é€šå¸¸ä¸ºæ— ç›‘ç£çš„ï¼Œé€šè¿‡åº”ç”¨æƒ…æ„Ÿè¯å…¸ ( sentiment lexicon ) , å¤åˆè¡¨è¾¾ ( composite expressions ) , æ„è§è§„åˆ™ ( role of opinion ) å’Œ å¥å­è§£æžæ ‘æ¥ç¡®å®šå¥å­ä¸­æ¯ä¸ªæ–¹é¢çš„æƒ…æ„Ÿè¶‹å‘ã€‚åŒæ—¶ä¹Ÿè€ƒè™‘äº†æƒ…æ„Ÿè½¬æ„ ( sentiment shifters ) , è½¬æŠ˜è¯ ( but-clauses ) ç­‰ã€‚ ä¸‹é¢ä»‹ç»ä¸€ä¸ªç®€å•çš„åŸºäºŽè¯å…¸çš„æ–¹æ³•åˆ†ç±»æ–¹æ³•ï¼Œå‡è®¾å®žä½“å’Œæ–¹é¢å·²çŸ¥ï¼Œå…¶ä¸»è¦æœ‰å››ä¸ªæ­¥éª¤ï¼š æ ‡è®°æƒ…æ„Ÿè¯å’Œæƒ…æ„ŸçŸ­è¯­ ( Mark Sentiment words and phrases ) : æ ‡è®°å¥å­ä¸­çš„æƒ…æ„Ÿè¯å’ŒçŸ­è¯­ï¼Œæ¯ä¸ªç§¯æžçš„æƒ…æ„Ÿç»™æƒ…æ„Ÿåˆ†æ•°+1ï¼Œæ¯ä¸ªæ ¡çº§çš„æƒ…æ„Ÿç»™æƒ…æ„Ÿåˆ†æ•°-1ï¼Œä¾‹å¦‚ï¼šâ€The voice quality of this phone is not good, but the battery life is long.â€œ é€šè¿‡åˆ†æžæ—¶å€™ï¼Œè¯¥å¥å­å˜æˆ â€The voice quality of this phone is not good [+1], but the battery life is longâ€œ å› ä¸º â€goodâ€œ æ˜¯ä¸€ä¸ªç§¯æžçš„è¯è¯­ï¼Œä½†æ˜¯æ³¨æ„ â€œlongâ€ å¹¶ä¸æ˜¯ä¸€ä¸ªæƒ…æ„Ÿè¯ï¼Œå¹¶ä¸”ä¹Ÿä¸æŒ‡æ˜Žæƒ…æ„Ÿçš„ç§¯æžå’Œæ¶ˆæžæ€åº¦ï¼Œä½†æ˜¯è”ç³»ä¸Šä¸‹æ–‡å¯çŸ¥ â€longâ€œ å¯ä»¥ä»£è¡¨ä¸€ä¸ªæƒ…æ„Ÿè¯ã€‚ åº”ç”¨æƒ…æ„Ÿè½¬æ„ ( Apply sentiment shifters ) æƒ…æ„Ÿè½¬ä¹‰ ( Sentiment shifters ) æ˜¯è¯æˆ–è€…çŸ­è¯­ï¼Œå®ƒå¯ä»¥æ”¹å˜æƒ…æ„Ÿçš„æ–¹å‘ï¼Œè¿™é‡Œæœ‰å¾ˆå¤šè½¬æ¢ï¼Œä¾‹å¦‚æœ‰å¯èƒ½è½¬æ¢è¯­ä¹‰çš„æ¶ˆæžè¯è¯­ï¼š*not, never, none, nobody, nowhere, neither, cannot*ï¼Œé€šè¿‡è¯¥åˆ†æžï¼Œç”±äºŽå¥å­ä¸­å­˜åœ¨ â€notâ€œ æ‰€ä»¥è¯¥å¥å­å˜æˆ â€The voice quality of this phone is not **good* [-1], but the *battery life\* is longâ€œ* æ³¨æ„ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰è¿™äº›è¯è¯­ä¼šè®©æƒ…æ„Ÿè½¬å˜ï¼Œæ¯”å¦‚ â€not onlyâ€¦ but also.â€œ é‡åˆ°è¿™äº›è¯éœ€è¦æˆ‘ä»¬æ³¨æ„ã€‚ å¤„ç†è½¬æŠ˜è¯(Handle but-clauses) : è¡¨ç¤ºç›¸åçš„è¯æˆ–çŸ­è¯­éœ€è¦ç‰¹æ®Šå¤„ç†ï¼Œå› ä¸ºå®ƒä»¬ä¹Ÿç»å¸¸æ”¹å˜æƒ…ç»ªçš„æ–¹å‘ï¼Œåœ¨è‹±è¯­ä¸­æœ€å¸¸ä½¿ç”¨çš„åå‘è¯ä¸º â€butâ€œ ã€‚ é€šè¿‡åº”ç”¨ä»¥ä¸‹è§„åˆ™æ¥å¤„ç†åŒ…å«ç›¸åè¯æˆ–çŸ­è¯­çš„å¥å­ï¼šå¦‚æžœä¸èƒ½ç¡®å®šä¸€æ–¹çš„æ„è§ï¼Œåˆ™åœ¨ç›¸åè¯ä¹‹å‰çš„æƒ…æ„Ÿæ–¹å‘å’Œç›¸åè¯ä¹‹åŽçš„æƒ…ç»ªæ–¹å‘å½¼æ­¤ç›¸åã€‚ä½¿ç”¨å¦‚æžœä¸èƒ½ç¡®å®šæ˜¯å› ä¸ºè½¬æŠ˜è¯æˆ–çŸ­è¯­å¹¶ä¸æ€»åªæ˜¯æŒ‡æ„è§çš„å˜åŒ–ï¼Œæ¯”å¦‚ï¼š â€Car-x is great, but Car-y is better.â€œ ã€‚ä¸Šè¿°ä¾‹å¥å› ä¸ºæœ‰è½¬æŠ˜è¯ â€œbutâ€ æ‰€ä»¥é€šè¿‡è¿™ä¸€å¤„ç†ä¹‹åŽä¸Šè¿°ä¾‹å¥å˜ä¸ºï¼š â€The voice quality of this phone is not good [-1], but the battery life is long [+1]â€œ ã€‚æˆ‘ä»¬å¯ä»¥æŽ¨æ–­ â€œlongâ€ å¯¹ â€battery lifeâ€œ æ˜¯ç§¯æžåœ°æƒ…æ„Ÿã€‚é™¤äº† â€butâ€œ ä¹‹å¤–ï¼ŒçŸ­è¯­æ¯”å¦‚: â€with the expection ofâ€œ, â€œexpect thatâ€, â€œexpect forâ€ å¯¹è¿™äº›çŸ­è¯­çš„å¤„ç†æ–¹å¼ä¹Ÿæ˜¯ç›¸åŒçš„ã€‚ä½†æ˜¯åœ¨å¦å®šçš„æƒ…å†µä¸‹ä¸æ˜¯æ‰€æœ‰çš„éƒ½ä»£è¡¨ç€ç›¸åï¼Œæ¯”å¦‚ï¼š â€ not onlyâ€¦ but also. â€œ æ‰€ä»¥å¤„ç†è¿™äº›è¯æˆ–çŸ­è¯­è¦é¢„å…ˆæ ‡è¯†ã€‚ æ€»çš„æ„è§ ( Aggregate opinions ) : é€šè¿‡æ„è§èšåˆå‡½æ•°å°†æ”¶é›†åˆ°çš„æƒ…æ„Ÿåˆ†æ•°è¿›è¡Œå¤„ç†ï¼Œä»Žè€Œç¡®å®šå¥å­ä¸­çš„æ¯ä¸ªæ–¹é¢ä¸Šçš„æƒ…æ„Ÿæœ€ç»ˆå–å‘ã€‚å…¶ä¸»è¦æ­¥éª¤ä¸ºä¸‹ï¼š&emsp;&emsp;S : è¡¨ç¤ºä¸€ä¸ªåŒ…å«ä¸€ä¸ªæ–¹é¢ ( aspect )é›†åˆ { ai1, ai2, &hellip;, ain } å’ŒåŒ…å«ä¸€äº›æƒ…æ„Ÿè¯æˆ–çŸ­è¯­çš„é›†åˆ { sw1, sw2, &hellip;, swn } å¹¶ä¸”è¿™äº›æƒ…æ„Ÿè¯æˆ–çŸ­è¯­é€šè¿‡1-3çš„æ­¥éª¤å¾—å‡ºæƒ…æ„Ÿåˆ†æ•°çš„å¥å­ã€‚æ‰€ä»¥æ„è§èšåˆå…¬å¼å¯ä»¥è¡¨ç¤ºä¸ºï¼š$$score(a_1,s)=\sum_{ow_jâˆˆs}\frac{sw_j.so}{dist(sw_j,a_i)}$$&emsp;&emsp;swj : æ˜¯å¥å­ä¸­çš„æƒ…æ„Ÿè¯æˆ–çŸ­è¯­ã€‚&emsp;&emsp;dist( swj, ai) : æ˜¯æ–¹é¢ai ä¸Žæƒ…æ„Ÿè¯ swj åœ¨ s ä¸­çš„è·ç¦»ã€‚&emsp;&emsp;dist( swj, ai) : æ˜¯æ–¹é¢ai ä¸Žæƒ…æ„Ÿè¯ swj.so ä¸º swi çš„æƒ…æ„Ÿè¯åˆ†æ•°ã€‚ å¦‚æžœæœ€ç»ˆå¾—åˆ†æ˜¯æ­£çš„ï¼Œé‚£ä¹ˆå¯¹æ–¹é¢ ai çš„æ„è§æ˜¯è‚¯å®šçš„ã€‚å¦‚æžœæœ€ç»ˆå¾—åˆ†ä¸ºè´Ÿï¼Œåˆ™æƒ…ç»ªä¸ºè´Ÿï¼Œå¦åˆ™ä¸ºä¸­æ€§ã€‚è¿™ç§æ–¹æ³•åœ¨å¾ˆå¤šæƒ…å†µä¸‹è¡¨çŽ°è‰¯å¥½ã€‚ åŒæ—¶ï¼ŒçŽ°åœ¨æœ‰å¾ˆå¤šå…¶ä»–æ„è§èšåˆå‡½æ•°æ–¹æ³•ï¼Œæ¯”å¦‚ï¼š ( Hu and Liu, 2004 ) ç®€å•åœ°æ€»ç»“å¥å­æˆ–å¥å­æ®µä¸­çš„æ‰€æœ‰æƒ…ç»ªè¯çš„æƒ…ç»ªåˆ†æ•°ã€‚ ( Kim and Hovy, 2004 ) ä½¿ç”¨è¯çš„æƒ…ç»ªåˆ†æ•°ç›¸ä¹˜çš„åŠžæ³•ã€‚ æ„è§åŸºæœ¬è§„åˆ™å’Œè¯­ä¹‰çš„ç»„æˆ ( Basic Rules of Opinions and Compositional Semantics )æ„è§è§„åˆ™è¡¨è¾¾äº†ä¸€ç§æš—ç¤ºæ­£é¢æˆ–è´Ÿé¢æƒ…ç»ªçš„æ¦‚å¿µã€‚å®ƒå¯ä»¥æ˜¯ç®€å•çš„ä¸ªäººæƒ…ç»ªè¯ä¸Žä»–ä»¬çš„éšå«æƒ…ç»ªæˆ–å¤åˆè¡¨è¾¾å¼ï¼Œå¯èƒ½éœ€è¦å¸¸è¯†æˆ–é¢†åŸŸçŸ¥è¯†æ¥ç¡®å®šä»–ä»¬çš„æ–¹å‘ã€‚ä¸‹é¢å°†æè¿°è¿™äº›è§„åˆ™ã€‚è¡¨ç¤ºè¿™äº›è§„åˆ™çš„ä¸€ç§æ–¹å¼æ˜¯ä½¿ç”¨ç»„åˆè¯­ä¹‰ ( compositional semantics ) çš„æ¦‚å¿µï¼Œå…¶ä¸­é™ˆè¿°äº†å¤åˆè¡¨è¾¾å¼çš„å«ä¹‰æ˜¯å…¶ç»„æˆéƒ¨åˆ†çš„å«ä¹‰å’Œå®ƒä»¬ç»„åˆçš„è¯­æ³•è§„åˆ™çš„å‡½æ•°ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬é¦–å…ˆåœ¨æ¦‚å¿µå±‚æ¬¡ä¸Šæè¿°è§„åˆ™ï¼Œè€Œä¸è€ƒè™‘å®ƒä»¬å¦‚ä½•åœ¨å®žé™…å¥å­ä¸­è¡¨è¾¾ï¼Œå› ä¸ºè®¸å¤šè¿™äº›è§„åˆ™å¯ä»¥ä»¥å¤šç§æ–¹å¼è¡¨è¾¾ï¼Œå¹¶ä¸”ä¹Ÿå¯ä»¥æ˜¯å’Œä¸Šä¸‹æ–‡ç›¸å…³çš„ã€‚ä¹‹åŽï¼Œæˆ‘ä»¬è½¬åˆ°è¡¨è¾¾å¼å±‚æ¬¡ï¼Œè®¨è®ºåœ¨æƒ…æ„Ÿåˆ†æžçš„ä¸Šä¸‹æ–‡ä¸­å…³äºŽç»„æˆè¯­ä¹‰çš„å½“å‰ç ”ç©¶ï¼Œå…¶ç›®çš„æ˜¯ç»„åˆå¤šä¸ªè¾“å…¥æˆåˆ†è¡¨è¾¾å¼ä»¥å¯¼å‡ºå¤åˆè¡¨è¾¾å¼çš„æ•´ä½“æƒ…ç»ªæ–¹å‘ã€‚è§„åˆ™ä½¿ç”¨ç±»ä¼¼äºŽ BNF å½¢å¼çš„æ–¹å¼è¡¨ç¤ºï¼Œå…¶è§„åˆ™è¡¨å¦‚ä¸‹ï¼š 1. POSITIVE &emsp;&emsp; ::= P2. &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;| PO3. &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;| sentiment_shifter N4. &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;| sentiment_shifter NE5. NEGATIVE&emsp;&emsp;::= N6. &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;| NE7. &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;| sentiment_shifter P8. &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;| sentiment_shifter PO P å’Œ PO ä¸ºä¸¤ç§ç§¯æžçš„æƒ…æ„Ÿè¡¨è¾¾å¼ï¼Œå…¶ä¸­ï¼š P ä¸ºåŽŸå­è¡¨è¾¾å¼ï¼Œå³ä¸ºå¥å­æˆ–çŸ­è¯­ã€‚ PO ä¸ºå¤šä¸ªè¡¨è¾¾å¼ç»„æˆçš„è¡¨è¾¾å¼ã€‚ N å’Œ NE ä¸ºä¸¤ç§æ¶ˆæžçš„æƒ…æ„Ÿè¡¨è¾¾å¼ï¼Œå…¶ä¸­ï¼š N ä¸ºåŽŸå­è¡¨è¾¾å¼ï¼Œå³ä¸ºå¥å­æˆ–çŸ­è¯­ã€‚ NE ä¸ºå¤šä¸ªè¡¨è¾¾å¼ç»„æˆçš„è¡¨è¾¾å¼ã€‚ â€œsentiment_shifter Pâ€ å’Œ â€sentiment_shifter POâ€œ* ä»£è¡¨çš„æ¶ˆæžçš„ç§¯æžæ€åº¦ã€‚å³ä¸ºæ¶ˆæžæ€åº¦ã€‚ â€œsentiment_shifter Nâ€ å’Œ â€sentiment_shifter NEâ€œ* ä»£è¡¨çš„æ¶ˆæžçš„æ¶ˆæžæ€åº¦ã€‚å³ä¸ºç§¯æžæ€åº¦ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™äº›ä¸æ˜¯ä»¥å®žé™…çš„BNFå½¢å¼è¡¨ç¤ºï¼Œè€Œæ˜¯ç”¨ä¼ªè¯­è¨€è¡¨ç¤ºçš„æŠ½è±¡æ¦‚å¿µã€‚æˆ‘ä»¬å¾ˆéš¾ç²¾ç¡®çš„æŒ‡å‡ºè¿™äº›æƒ…æ„Ÿï¼Œå› ä¸ºåœ¨æƒ…æ„Ÿè½¬æ„ ( sentimet_shifters ) ä¸­ä¼šè½¬åˆ°ä¸åŒçš„æƒ…æ„Ÿæ–¹å‘ï¼Œæœ€åŽçš„ POSITIVE å’Œ NEGATIVE è¡¨ç¤ºæœ€åŽçš„åˆ†æžç»“æžœã€‚ æƒ…æ„Ÿè½¬æ„( sentimet_shifters ): æ¶ˆæžè¯è¯­ä¾‹å¦‚ï¼š*not, never, none, nobody, nowhere, neither, cannot* æ˜¯æœ€å¸¸è§çš„æƒ…æ„Ÿè½¬æ„è¯è¯­ï¼ŒåŒæ—¶æƒ…æ€åŠ¨è¯ ( Modal auxiliary verbs ) ä¾‹å¦‚ *would, should, could, might, must, ought* æ˜¯ä¸€ç§è½¬æ„è¯è¯­ï¼Œä¾‹å¦‚ï¼šâ€The brake could be improved,â€œ å¯ä»¥è½¬æ„æƒ…æ„Ÿï¼Œä½†å¹¶ä¸æ˜¯æ‰€æœ‰çš„æ˜¯è¿™æ ·ã€‚æœ‰ä¸€äº›å‰ç¼€è¯è¯­ä¹Ÿæ˜¯ä¸€æ–¹é¢ã€‚ä¸€äº›å…¸åž‹çš„å‰¯è¯ä¾‹å¦‚ â€barelyâ€œ, â€œhardlyâ€\ é€šè¿‡æ¯”è¾ƒ â€It worksâ€œ å’Œ â€œIt hardly worksâ€ å¯çŸ¥ä¸¤ä¸ªåé¢æ„è§æ˜¯ä¸åŒçš„ã€‚åŒæ—¶æƒ³ä¸€äº› â€failâ€œ, â€œomitâ€, â€œneglectâ€ åŒæ ·å…·æœ‰è½¬æ„åŠŸèƒ½ã€‚è®½åˆºå¥\ *( sarcasm )\* ä¹Ÿä¼šæ”¹å˜å¥å­çš„æƒ…æ„Ÿæ–¹å‘ã€‚è™½ç„¶æ‰‹åŠ¨è¯†åˆ«è¿™æ ·çš„è½¬æ„ä¸æ˜¯å›°éš¾çš„ï¼Œä½†æ˜¯é€šè¿‡è‡ªåŠ¨åŒ–ç³»ç»Ÿè¯†åˆ«å®ƒä»¬å¹¶åœ¨å®žé™…å¥å­ä¸­æ­£ç¡®åœ°å¤„ç†å®ƒä»¬æ˜¯å…·æœ‰æŒ‘æˆ˜æ€§çš„ã€‚ çŽ°åœ¨å®šä¹‰ä¸åŒ…å«è½¬æ„çš„ N, NE, P, PO åŸºäºŽä»–ä»¬çš„ç‰¹æ€§å°†è¿™äº›è¡¨è¾¾å¼åˆ†ç»„æˆå…­ä¸ªæ¦‚å¿µç±»åˆ«ï¼š æƒ…æ„Ÿè¯æˆ–çŸ­è¯­ ( Sentiment word and phrase ) : è¿™æ˜¯æœ€ç®€å•çš„ä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„ç±»åˆ«ï¼Œå…¶ä¸­æƒ…ç»ªè¯æˆ–çŸ­è¯­å•ç‹¬å¯ä»¥æš—ç¤ºæ–¹é¢ ( aspect ) çš„æ­£é¢æˆ–è´Ÿé¢æ„è§ï¼Œä¾‹å¦‚ â€œThe voice quality is goodâ€ ä¸­çš„ â€œgoodâ€ ã€‚è¿™äº›è¯è¯­æˆ–çŸ­è¯­è¢«ç§°ä¸ºä¸º P å’Œ N. 9. P &emsp;&emsp; ::= a_positive_sentiment_word_or_phrase10. N &emsp;&emsp; ::= a_negative_sentiment_word_or_phrase ç§¯æžæˆ–æ¶ˆæžæ„è§é¡¹ç›®çš„å‡å°‘æˆ–å¢žåŠ  ( Decreased and increased quantity of an opinionated item (N and P) ) : è¡¨ç¤ºå‡å°‘æˆ–å¢žåŠ ä¸Žæ„è§é¡¹ç›®ï¼ˆé€šå¸¸åè¯å’Œåè¯çŸ­è¯­ï¼‰ç›¸å…³è”çš„æ•°é‡å¯ä»¥æ”¹å˜æƒ…æ„Ÿçš„æ–¹å‘ã€‚æ¯”å¦‚: â€This drug reduced my pain significantlyâ€œ. â€drugâ€ æ˜¯ä¸€ä¸ªæ¶ˆæžçš„è¯è¯­ï¼Œè€Œ â€reduced painâ€œ åˆ™è¡¨ç¤ºå‡å°‘ç–¼ç—›æ˜¯ä¸€ä¸ªç§¯æžçš„æ–¹å‘ã€‚ 11. PO &emsp;&emsp; ::= less_or_decreased N12. N &emsp;&emsp;&emsp;::= more_or_increased P13. NE &emsp;&emsp; ::= less_or_decreased P14. N &emsp;&emsp;&emsp;::= more_or_increased N åœ¨æ½œåœ¨çš„æ¶ˆæžæˆ–ç§¯æžæ¡ç›®ä¸­å¢žåŠ æˆ–å‡å°‘ ( High, low, increased and decreased quantity of a positive or negative potential item ) : ä¾‹å¦‚ï¼šâ€œThe battery life is shortâ€ å’Œ â€œThe battery life is long.â€ è¿™äº›æ–¹é¢æ¯”å¦‚ â€battery lifeâ€œ çš„ æ€åº¦æ˜¯ç§¯æžçš„ï¼Œæˆ‘ä»¬ç§°ä»–ä»¬ä¸º PPI *( positive potential items )*. åŒç†ï¼Œä¾‹å¦‚: â€œThis phone costs a lotâ€ å’Œ â€œSony reduced the price of the camera.â€ å…¶ä¸­ â€Costâ€œ å’Œ â€priceâ€œ çš„æ€åº¦æ˜¯æ¶ˆæžçš„ï¼Œæˆ‘ä»¬ç§°ä»–ä»¬ä¸º NPI *( negative potential items )* è¯¸å¦‚ â€batteryâ€œ, â€costâ€œ, â€œpriceâ€ æœ¬èº«å¹¶æ²¡æœ‰æƒ…æ„Ÿæ–¹å‘ï¼Œä½†æ˜¯å¢žåŠ é‡è¯ä¹‹åŽå°±æœ‰äº†æ–¹å‘ï¼Œå…¶å¯è¡¨ç¤ºä¸ºä¸‹é¢ä¸­çš„è§„åˆ™ã€‚ 15. PO &emsp;&emsp; ::= no_low_less_or_decreased_quantity_of NPI16. &emsp;&emsp;&emsp;&emsp; | large_larger_or_increased_quantity_of PPI17. NE &emsp;&emsp; ::= no_low_less_or_decreased_quantity_of PPI18. &emsp;&emsp;&emsp;&emsp; | large_larger_or_increased_quantity_of NPI19. NPI &emsp;&emsp; ::= a_negative_potential_item20. PPI &emsp;&emsp;::= a_positive_potential_item å¯å–æˆ–ä¸å¯å–çš„äº‹å®ž( Desirable or undesirable fact ) : å®¢è§‚è¡¨è¾¾å¼å¯èƒ½æ„å‘³ç€ç§¯æžæˆ–æ¶ˆæžçš„æƒ…ç»ªï¼Œå› ä¸ºä»–ä»¬å¯ä»¥æè¿°å¯å–å’Œä¸å¯å–çš„äº‹å®žã€‚ä¾‹å¦‚ï¼šâ€After my wife and I slept on the mattress for two weeks, I saw a mountain in the middleâ€. è¯¥å¥è¯æ¸…æ¥šåœ°éšå«äº†å¯¹ â€mattressâ€œ çš„æ¶ˆæžæƒ…ç»ªï¼Œä½†æ˜¯ â€mountainâ€œ å¹¶æ²¡æœ‰æºå¸¦ä»»ä½•æ„è§ï¼Œå› æ­¤éµå¾ªä¸‹é¢ä¸¤ä¸ªè§„åˆ™: 21. P &emsp;&emsp; ::= desirable_fact22. N &emsp;&emsp;::= a_positive_potential_item ä¸Žè§„èŒƒæˆ–æœŸæœ›å€¼èŒƒå›´çš„åå·®( Deviation from the norm or a desired value range ) : åœ¨ä¸€äº›åº”ç”¨ç¨‹åºé¢†åŸŸä¸­ï¼Œé¡¹ç›®çš„å€¼å…·æœ‰æœŸæœ›çš„èŒƒå›´æˆ–èŒƒæ•°ï¼Œå¦‚æžœè¯¥å€¼åç¦»æ­£å¸¸èŒƒå›´ï¼Œåˆ™ä¸ºæ¶ˆæžçš„ï¼Œä¾‹å¦‚: â€œAfter taking the drug, my blood pressure went to 410.â€ é€šå¸¸è¿™æ ·å¥å­ä¸ºå®¢è§‚çš„ï¼Œæ‰€ä»¥å®šä¹‰å¦‚ä¸‹è§„åˆ™ã€‚ 23. P &emsp;&emsp; ::= within the_desired_value_range24. N &emsp;&emsp;::= deviate_from the_desired_value_range ç”Ÿäº§ã€æ¶ˆè€—ã€æµªè´¹èµ„æºæˆ–åºŸç‰© ( Produce and consume resource and waste ) : å¦‚æžœå®žä½“äº§ç”Ÿå¤§é‡çš„èµ„æºï¼Œåˆ™æ˜¯æœŸæœ›çš„ï¼ˆç§¯æžçš„ï¼‰ï¼Œè‹¥æ˜¯æ¶ˆè€—å¤§é‡èµ„æºï¼Œåˆ™æ˜¯ä¸è¢«æœŸæœ›çš„ï¼ˆæ¶ˆæžçš„ï¼‰ï¼ŒåŒç†å¦‚æžœç”Ÿäº§å¤§é‡åºŸç‰©åˆ™æ˜¯ä¸è¢«æœŸæœ›çš„ï¼ˆæ¶ˆæžçš„ï¼‰ï¼ŒåŒç†å¦‚æžœæ¶ˆè€—å¤§é‡åºŸç‰©åˆ™æ˜¯æœŸæœ›çš„ï¼ˆç§¯æžçš„ï¼‰ï¼Œæ‰€ä»¥å®šä¹‰å¦‚ä¸‹è§„åˆ™ã€‚ 25. P &emsp;&emsp; ::= produce a_large_quantity_of_or_more resource26. &emsp;&emsp;&emsp; | produce no,_little_or_less waste27. &emsp;&emsp;&emsp; | consume no,_little_or_less resource28. &emsp;&emsp;&emsp; | consume a_large_quantity_of_or_more waste29. N &emsp;&emsp; ::= produce no,_little_or_less resource30. &emsp;&emsp;&emsp; | produce some_or_more waste31. &emsp;&emsp;&emsp; | consume a_large_quantity_of_or_more resource32. &emsp;&emsp;&emsp; | consume no,_little_or_less waste è¿™äº›æ¦‚å¿µè§„åˆ™å¯ä»¥åœ¨å®žé™…å¥å­ä¸­ä½¿ç”¨ä¸åŒçš„å•è¯å’ŒçŸ­è¯­å‡ºçŽ°åœ¨è®¸å¤šï¼ˆçœ‹ä¼¼æ— é™æ•°é‡ï¼‰çš„å½¢å¼ä¸­ï¼Œå¹¶ä¸”åœ¨ä¸åŒçš„é¢†åŸŸä¸­ï¼Œå®ƒä»¬ä¹Ÿå¯ä»¥ä»¥ä¸åŒçš„æ–¹å¼è¡¨çŽ°ã€‚å› æ­¤ï¼Œä»–ä»¬å¾ˆéš¾è®¤è¯†ã€‚æ²¡æœ‰è®¤è¯†ä»–ä»¬ï¼Œè§„åˆ™ä¸èƒ½åº”ç”¨ã€‚ çŽ°åœ¨ç ”ç©¶æœ€å¤šçš„ç»„æˆè§„åˆ™æ˜¯ä¸Žæƒ…ç»ªé€†è½¬ ( sentimet reversal ) æœ‰å…³ï¼Œé€šå¸¸æœ‰æƒ…æ„Ÿè½¬æ„å’Œæ¶ˆæžç§¯æžè¯è¯­ç»„æˆï¼Œæ¯”å¦‚: â€NOTâ€œ &amp; POS(â€œgoodâ€) => NEG(â€œnot goodâ€)ï¼Œå¦ä¸€æ–¹é¢å°±æ˜¯éµå¾ª11åˆ°14çš„è§„åˆ™ï¼Œæ¯”å¦‚ï¼šâ€reducedâ€œ &amp; NEG(â€œPAINâ€) => POS(â€œreduced painâ€)ã€‚è¿˜æœ‰å°±æ˜¯æƒ…æ„Ÿå†²çª( sentiment conflict ), å½“å¤šä¸ªæƒ…æ„Ÿè¯æ±‡å‡ºçŽ°åœ¨ä¸€èµ·æ—¶ï¼Œä¾‹å¦‚ â€œterribly goodâ€ å†²çªè§£å†³æ˜¯é€šè¿‡åŸºäºŽåˆ†é…ç»™å®ƒä»¬çš„ç›¸å¯¹æƒé‡å¯¹æˆåˆ†è¿›è¡ŒæŽ’åºæ¥å®žçŽ°çš„ï¼Œè¿™äº›ç›¸å¯¹æƒé‡æŒ‡ç¤ºå“ªäº›æˆåˆ†å¯¹äºŽæƒ…ç»ªæ›´é‡è¦ã€‚10å¹´ï¼Œå¼•å…¥äº†å…­ç§ç±»åž‹çš„ç»„åˆè§„åˆ™ï¼Œä»–ä»¬æ˜¯æƒ…ç»ªåè½¬ (sentiment reversal)ï¼Œèšé›† (aggregation)ï¼Œä¼ æ’­ (propagation), æŽ§åˆ¶ (domination), ä¸­å’Œ (neutralization), é›†ä¸­ (intensification)ã€‚å…¶åˆ†åˆ«è¡¨ç¤ºå¦‚ä¸‹ï¼š æƒ…ç»ªåè½¬ (sentiment reversal): å’Œä¹‹å‰è¯´æ˜Žçš„è§„åˆ™ç±»ä¼¼ã€‚ èšé›† (aggregation): ä¸Žæƒ…ç»ªå†²çª(sentiment conflict)ç›¸ä¼¼ï¼Œä½†æ˜¯å®šä¹‰ä¸åŒï¼Œå¦‚æžœå½¢å®¹è¯-åè¯ï¼Œå‰¯è¯-å½¢å®¹è¯ï¼Œå‰¯è¯-åŠ¨è¯çŸ­è¯­ä¸­çš„æœ¯è¯­çš„æƒ…æ„Ÿå…·æœ‰ç›¸åçš„æ–¹å‘ï¼Œåˆ™å°†å…·æœ‰é¢„ä¿®é¥°ç¬¦çš„ä¸»å¯¼æžæ€§çš„æ··åˆæžæ€§åˆ†é…ç»™çŸ­è¯­ã€‚æ¯”å¦‚ï¼ŒPOS(â€œbeautifulâ€) &amp; NEG(â€œfightâ€) => POSneg(â€œbeautiful fightâ€)ã€‚ ä¼ æ’­ (propagation): å½“åœ¨çŸ­è¯­/å­å¥ä¸­ä½¿ç”¨ â€œpropagationâ€ æˆ– â€œtransferâ€ ç±»åž‹çš„åŠ¨è¯æ—¶ï¼Œåº”ç”¨ä¼ æ’­è§„åˆ™ï¼Œå¹¶ä¸”éœ€è¦ç¡®å®šå…·æœ‰ä¹‹å‰æ–¹é¢çš„æžæ€§ã€‚æ¯”å¦‚ï¼ŒPROP-POS(â€œto admireâ€) &amp; â€œhis behaviorâ€ => POS(â€œhis behaviorâ€); â€œMr.Xâ€ &amp; TRANS(â€œsupportsâ€) &amp; NEG(â€œcrime businessâ€) => NEG(â€œMr.Xâ€)ã€‚ æŽ§åˆ¶ (domination): (1) å¦‚æžœå­å¥ä¸­çš„åŠ¨è¯å’Œå®¢è§‚çš„æžæ€§å…·æœ‰ç›¸åçš„æ–¹å‘ï¼Œåˆ™åŠ¨è¯çš„æžæ€§å ä¼˜åŠ¿ï¼Œæ¯”å¦‚ï¼ŒNEG(â€œto deceiveâ€) &amp; POS(â€œhopesâ€) => NEG(â€œto deceive hopesâ€).(2) å¦‚æžœä¸€ä¸ªå¤åˆå¥ä½¿ç”¨ but è¿žæŽ¥ï¼Œåˆ™ but åŽé¢çš„å­å¥çš„æ€åŠ¿ç‰¹å¾æ˜¯å ä¸»å¯¼åœ°ä½ï¼Œæ¯”å¦‚ï¼Œâ€NEG(â€œIt was hard to climb a mountain all night longâ€), but POS(â€œa magnificent view rewarded the traveler at the morningâ€).â€œ => POS(whole sentence)). ä¸­å’Œ (neutralization): å½“ä»‹è¯ä¿®é¥°ç¬¦æˆ–æ¡ä»¶è¿ç®—ç¬¦ä¸Žæƒ…ç»ªè¯­å¥ç›¸å…³æ—¶ï¼Œåº”ç”¨ä¸­å’Œè§„åˆ™ï¼Œæ¯”å¦‚ï¼Œâ€œdespiteâ€ &amp; NEG(â€˜worriesâ€™) => NEUT(â€œdespite worriesâ€). é›†ä¸­ (intensification): åŠ å¼ºæˆ–è€…å‰Šå¼±æƒ…æ„Ÿåˆ†æ•°ï¼Œæ¯”å¦‚ï¼ŒPos_score(â€œhappyâ€) \&lt; Pos_score(â€œextremely happyâ€)). æ–¹é¢æå–( Aspect Extraction )è¯¥ä»»åŠ¡å¯ä»¥çœ‹åšæ˜¯ä¸€ä¸ªä¿¡æ¯æå–ä»»åŠ¡ï¼Œä½†æ˜¯ï¼Œåœ¨æƒ…æ„Ÿåˆ†æžçš„ä¸Šä¸‹æ–‡ä¸­ï¼Œä¸€äº›é—®é¢˜çš„å…·ä½“ç‰¹å¾å¯ä»¥æ–¹ä¾¿è¿›è¡Œæå–ã€‚è¿™ä¸ªå…³é”®ç‰¹å¾å°±ç›®æ ‡çš„æ„è§ï¼Œè€Œç›®æ ‡é€šå¸¸æ˜¯ä»Žå¥å­ä¸­æå–çš„æ–¹é¢æˆ–è€…ä¸»é¢˜ã€‚å› æ­¤ï¼Œé‡è¦çš„ä»»åŠ¡æ˜¯ä»Žå¥å­è¯†åˆ«ç›®æ ‡å¹¶ä¸”è¯†åˆ«å…¶è¡¨è¾¾çš„æ„è§ã€‚ä½†æ˜¯æ„è§åˆ†ä¸ºæ˜¾ç¤ºæ„è§å’Œéšç¤ºæ„è§ï¼Œæ˜¾ç¤ºæ„è§çš„æå–ä¸»è¦æœ‰ä»¥ä¸‹å››ä¸ªæ–¹é¢ï¼š åŸºäºŽé¢‘ç¹åè¯å’Œåè¯çŸ­è¯­çš„æå– åˆ©ç”¨æ„è§å’Œç›®æ ‡å…³ç³»æå– åˆ©ç”¨ç›‘ç£å­¦ä¹ æå– åˆ©ç”¨ä¸»é¢˜æ¨¡åž‹æå– ç”±äºŽæ–¹é¢æå–ä¸»è¦å½¢å¼æ˜¯åœ¨çº¿è¯„è®ºï¼Œå…¶æœ‰ä¸¤ç§æ–‡æœ¬æ ¼å¼ï¼Œå¦‚ä¸‹ï¼š My SLR is on the shelf by camerafun4 Aug 09â€™04 Pros: Great photos, easy to use, very small Cons: Battery usage; included memory is stingy. I had never used a digital camera prior to purchasing this Canon A70. I have always used a SLR â€¦ Read the full review Figure 5.1. An example of a review of format 1. GREAT Camera., Jun3,2004 Reviewer: jprice174 from Atlanta, Ga Aug 09â€™04 Pros: Great photos, easy to use, very small Cons: Battery usage; included memory is stingy. I did a lot of research last year before I bought this cameraâ€¦ It kinda hurt to leave behind my beloved nikon 35mm SLR, but I was going to Italy, and I needed something smaller, and digital. The pictures coming out of this camera are amazing. The â€˜autoâ€™ feature takes great pictures most of the time. And with digital, youâ€™re not wasting film if the picture doesnâ€™t come out. â€¦ Figure 5.2. An example of a review of format 2. æŸ¥æ‰¾é¢‘ç¹åè¯å’Œåè¯çŸ­è¯­è¯¥æ–¹æ³•ä»Žç»™å®šé¢†åŸŸä¸­çš„å¤§é‡è¯„è®ºä¸­æ‰¾åˆ°ä½œä¸ºåè¯å’Œåè¯çŸ­è¯­çš„æ˜¾å¼æ–¹é¢è¡¨è¾¾å¼ã€‚å…¶æ–¹æ³•æœ‰ï¼š (Hu and Liu, 2004) ä½¿ç”¨æ•°æ®æŒ–æŽ˜ç®—æ³•ï¼Œç”¨ç£æ€§ (POS) æ ‡è¯†å™¨è¯†åˆ«åè¯å’Œåè¯çŸ­è¯­ï¼ˆæˆ–ç»„ï¼‰ã€‚ è¯¥æ–¹æ³•çš„ä¸»è¦æ€æƒ³æ˜¯ï¼šè®°å½•ä»–ä»¬å‡ºçŽ°çš„é¢‘çŽ‡ï¼Œå¹¶ä¸”ä»…ä¿ç•™é¢‘ç¹çš„é¢‘çŽ‡ï¼Œå…¶ä¸­é¢‘çŽ‡é˜ˆå€¼å¯ä»¥é€šè¿‡å®žéªŒç¡®å®šã€‚ä½¿ç”¨è¿™ç§æ–¹æ³•çš„åŽŸå› æ˜¯ï¼Œå½“äººä»¬è¯„è®ºä¸€ä¸ªå®žä½“çš„ä¸åŒæ–¹é¢æ—¶ï¼Œä»–ä»¬ä½¿ç”¨çš„è¯æ±‡é€šå¸¸æ”¶æ•›ã€‚å› æ­¤ï¼Œç»å¸¸è°ˆè®ºçš„é‚£äº›åè¯é€šå¸¸æ˜¯çœŸå®žå’Œé‡è¦çš„æ–¹é¢ã€‚ä½†æ˜¯è¯„è®ºä¸­çš„ä¸ç›¸å…³å†…å®¹é€šå¸¸æ˜¯å¤šæ ·çš„ï¼Œå³ï¼Œåœ¨ä¸åŒçš„è¯„è®ºä¸­å®ƒä»¬æ˜¯éžå¸¸ä¸åŒçš„ã€‚å› æ­¤ï¼Œè¿™äº›ä¸é¢‘ç¹çš„åè¯å¯èƒ½æ˜¯éžæ–¹é¢æˆ–è¾ƒä¸é‡è¦çš„æ–¹é¢ã€‚è™½ç„¶è¿™ç§æ–¹æ³•å¾ˆç®€å•ï¼Œä½†å®žé™…ä¸Šæ˜¯ç›¸å½“æœ‰æ•ˆçš„ã€‚ è¿™ç§ç®—æ³•çš„ç²¾åº¦è¢«(Popescu and Etzioni,2005)æé«˜äº†ï¼Œä»–ä»¬çš„ç®—æ³•è¯•å›¾åŽ»é™¤é‚£äº›å¯èƒ½ä¸æ˜¯å®žä½“æ–¹é¢çš„åè¯çŸ­è¯­ï¼Œå®ƒé€šè¿‡è®¡ç®—çŸ­è¯­å’Œä¸Žå®žä½“ç±»ç›¸å…³è”çš„ä¸€äº›å…³ç³»åŒºåˆ†å™¨ (mernoymy discriminators) ä¾‹å¦‚ï¼ˆcameraï¼‰ä¹‹é—´çš„ç‚¹å‘äº’ä¿¡æ¯ï¼ˆPMIï¼‰å¾—åˆ†æ¥è¯„ä¼°æ¯ä¸ªå‘çŽ°çš„åè¯çŸ­è¯­ã€‚é€šè¿‡æœç´¢ç½‘ç»œç”¨äºŽæ‰¾åˆ° camera çš„ç»„ä»¶æˆ–éƒ¨åˆ†å¾—å‡ºçš„ camera çš„åå…³ç³»åŒºåˆ†å™¨ä¸º â€œof cameraâ€, â€œcamera hasâ€, â€œcamera comes withâ€ ç­‰ã€‚å…¶ PMI çš„ç®€åŒ–å…¬å¼ä¸ºï¼š$$PMI(a,d)=\frac{hits(a âˆ© d)}{hits(a)hits(d)}$$å…¶ä¸­: a ä¸ºä½¿ç”¨é¢‘çŽ‡è¯†åˆ«å‡ºæ¥çš„å€™é€‰çš„æ–¹é¢ (aspect) d ä¸ºä¸€ä¸ªé‰´åˆ«å™¨ ä½¿ç”¨æ–¹é¢ (aspect) è¯†åˆ«èµ„æºåœ¨è®¸å¤šåº”ç”¨ä¸­ï¼Œèµ„æºä½¿ç”¨æ˜¯é‡è¦çš„æ–¹é¢ï¼Œä¾‹å¦‚ï¼Œâ€œThis washer uses a lot of water.â€ã€‚åœ¨è¿™é‡Œï¼Œå¯¹ â€waterâ€œ çš„ä½¿ç”¨é‡æ˜¯ â€washerâ€œ çš„ä¸€ä¸ªæ–¹é¢ï¼Œå¹¶ä¸”è¿™å¥è¯æŒ‡ç¤ºæ¶ˆæžæ„è§ï¼Œå› ä¸ºæ¶ˆè€—å¤ªå¤šçš„èµ„æºæ˜¯ä¸æœŸæœ›çš„ã€‚ä½†æ˜¯è¿™å¥è¯ä¸­æ²¡æœ‰æ„è§ï¼Œå› æ­¤ï¼Œå‘çŽ°èµ„æºè¯å’ŒçŸ­è¯­ï¼ˆå…¶è¢«ç§°ä¸ºèµ„æºæœ¯è¯­ï¼‰å¯¹äºŽæƒ…æ„Ÿåˆ†æžæ˜¯é‡è¦çš„ã€‚å¦‚ä¸‹ï¼Œæ˜¾ç¤ºäº†ä¹‹å‰æå‡ºçš„ä¸¤ä¸ªæ¶‰åŠèµ„æºçš„æ„è§è§„åˆ™ï¼š P&emsp;&emsp;&emsp; | consume no,_little_or_less resource N&emsp;&emsp;&emsp; | consume a_large_quantity_of_or_more resource åœ¨ï¼ˆZhangå’ŒLiuï¼Œ2011aï¼‰ä¸­ï¼Œæå‡ºäº†ä¸€ç§æå–èµ„æºé¡¹çš„æ–¹æ³•ã€‚ ä¾‹å¦‚ï¼Œåœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œåº”å½“æå– â€œwaterâ€ ä½œä¸ºèµ„æºé¡¹ã€‚è¯¥æ–¹æ³•åŸºäºŽäºŒåˆ†å›¾æ‹Ÿå®šäº†é—®é¢˜ï¼Œå¹¶æå‡ºäº†ä¸€ç§è¿­ä»£ç®—æ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ è¯¥ç®—æ³•åŸºäºŽä»¥ä¸‹è§‚å¯Ÿæå‡ºï¼š åœ¨å¥å­ä¸­è¡¨è¾¾çš„å…³äºŽèµ„æºä½¿ç”¨çš„æƒ…ç»ªæˆ–è§‚ç‚¹é€šå¸¸ç”±ä»¥ä¸‹ä¸‰å…ƒç»„ç¡®å®šï¼Œ{åŠ¨è¯(verb), é‡è¯(quantifier), åè¯æˆ–åè¯è¯ç»„(noun_term)}. ä¾‹å¦‚ï¼šâ€This washer uses a lot of waterâ€œ, ä¸­ â€usesâ€œ æ˜¯åŠ¨è¯ï¼Œâ€a lot ofâ€œ, æ˜¯é‡è¯ï¼Œâ€waterâ€œ, ä¸ºåè¯ä»£è¡¨ç€èµ„æºã€‚ è¯¥æ–¹æ³•ä½¿ç”¨è¿™æ ·çš„ä¸‰å…ƒç»„æ¥å¸®åŠ©è¯†åˆ«åŸŸè¯­æ–™åº“ä¸­çš„èµ„æºã€‚è¯¥æ¨¡åž‹ä½¿ç”¨åŸºäºŽäºŒåˆ†å›¾å¾ªçŽ¯å®šä¹‰æ¥åæ˜ çš„èµ„æºä½¿ç”¨åŠ¨è¯ï¼ˆä¾‹å¦‚ï¼Œconsumeï¼‰å’Œèµ„æºæœ¯è¯­ï¼ˆä¾‹å¦‚ï¼Œwaterï¼‰ä¹‹é—´çš„ç‰¹æ®Šå¼ºåŒ–å…³ç³»ã€‚é‡è¯ä¸ç”¨äºŽè®¡ç®—ï¼Œè€Œæ˜¯ç”¨äºŽè¯†åˆ«å€™é€‰åŠ¨è¯å’Œèµ„æºæœ¯è¯­ã€‚è¯¥ç®—æ³•å‡å®šç»™å‡ºäº†ä¸€ä¸ªé‡ä¸å¤šå¹¶ä¸”å¯ä»¥æ‰‹åŠ¨ç¼–è¯‘çš„é‡åŒ–å™¨åˆ—è¡¨ã€‚åŸºäºŽå¾ªçŽ¯å®šä¹‰ï¼Œä½¿ç”¨ç±»ä¼¼äºŽ HITS çš„è¿­ä»£ç®—æ³•æ¥è§£å†³é—®é¢˜ã€‚ä¸ºäº†å¼€å§‹è¿­ä»£è®¡ç®—ï¼Œä½¿ç”¨ä¸€äº›å…¨å±€ç§å­èµ„æºæ¥å¯»æ‰¾å’Œå¾—å‡ºä½¿ç”¨èµ„æºè¾ƒå¼ºçš„åŠ¨è¯çš„å¾—åˆ†ã€‚ç„¶åŽå°†è¿™äº›åˆ†æ•°åº”ç”¨ä¸ºç”¨äºŽä»»ä½•åº”ç”¨åŸŸçš„è¿­ä»£è®¡ç®—çš„åˆå§‹åŒ–ã€‚å½“ç®—æ³•æ”¶æ•›æ—¶ï¼Œå°±è¯†åˆ«å‡ºäº†å€™é€‰èµ„æºé¡¹çš„æŽ’åºåˆ—è¡¨ã€‚ æ„è§è¯å…¸æ‰©å±•å’Œæ–¹é¢æå–ç”±äºŽæƒ…ç»ª/è§‚ç‚¹ä¸Žå…¶ç›®æ ‡ï¼ˆæˆ–æ–¹é¢ï¼‰ä¹‹é—´çš„å…³ç³»ï¼Œæƒ…æ„Ÿè¯å¯ä»¥é€šè¿‡æ‰€è¯†åˆ«çš„æ–¹é¢æ¥è¯†åˆ«ï¼Œå¹¶ä¸”æ–¹é¢å¯ä»¥é€šè¿‡å·²çŸ¥çš„æƒ…ç»ªè¯æ¥è¯†åˆ«ã€‚æå–çš„æƒ…æ„Ÿè¯å’Œæ–¹é¢è¢«ç”¨äºŽè¯†åˆ«æ–°çš„æƒ…æ„Ÿè¯å’Œæ–°çš„æ–¹é¢ï¼Œå…¶è¢«å†æ¬¡ç”¨äºŽæå–æ›´å¤šçš„æƒ…æ„Ÿè¯å’Œæ–¹é¢ã€‚ç”±äºŽè¯¥è¿‡ç¨‹æ¶‰åŠé€šè¿‡æƒ…æ„Ÿè¯å’Œæ–¹é¢çš„ä¼ æ’­ï¼Œè¯¥æ–¹æ³•è¢«ç§°ä¸ºåŒé‡ä¼ æ’­(double propagation)ã€‚è¿™äº›æå–è§„åˆ™åŸºäºŽåŸºäºŽæƒ…æ„Ÿè¯å’Œæ–¹é¢ä¹‹é—´çš„æŸäº›ç‰¹å®šä¾èµ–å…³ç³»ã€‚é‡‡ç”¨ä¾èµ–è¯­æ³•æ¥æè¿°å…³ç³»ã€‚åŒæ—¶ä¹Ÿå¼ºåŠ äº†ä¸€äº›é™åˆ¶ï¼Œæƒ…æ„Ÿè¯ä¹Ÿå¯è¢«è®¤ä¸ºæ˜¯å½¢å®¹è¯å’Œæ–¹é¢åè¯æˆ–åè¯çŸ­è¯­ã€‚æƒ…æ„Ÿè¯å’Œæ–¹é¢ä¹‹é—´çš„ä¾èµ–å…³ç³»åŒ…æ‹¬ mod, pnmod, subj, s, obj, obj2å’Œdesc, è€Œæƒ…æ„Ÿè¯å’Œæ–¹é¢æœ¬èº«åªåŒ…å«è¿žæŽ¥å…³ç³»conjã€‚ OA-Rel è¡¨ç¤ºæƒ…æ„Ÿè¯å’Œæ–¹é¢ä¹‹é—´çš„å…³ç³»ï¼Œæƒ…æ„Ÿè¯æœ¬èº«ä¹‹é—´çš„è”ç³» OO-Rel å’Œæ–¹é¢ä¹‹é—´çš„è”ç³» AA-Rel,è€Œæ¯ä¸ª OA-Relï¼ŒOO-Relæˆ–AA-Relä¸­çš„å…³ç³»æ˜¯&lt; POS(wi), R,POS(wj)&gt;çš„ä¸‰å…ƒç»„, å…¶ä¸­POS(wi)æ˜¯è¯wiçš„POSæ ‡ç­¾ï¼ŒRæ˜¯ä¾èµ–å…³ç³»ã€‚è¯¥æå–è¿‡ç¨‹æ˜¯åŸºäºŽè§„åˆ™çš„æ–¹æ³•ï¼Œæ¯”å¦‚ï¼šâ€Canon G3 produces great pictures,â€ å½¢å®¹è¯ â€œgreatâ€ é€šè¿‡ mod è§£æžè®¤ä¸ºä¾èµ–äºŽåè¯ â€œpictureâ€ è¿™ç§å½¢å¼å½¢æˆ OA-Rel. ç±»ä¼¼äºŽè¿™æ ·ï¼Œå¦‚æžœæˆ‘ä»¬çŸ¥é“ â€œgreatâ€ æ˜¯ä¸€ä¸ªæƒ…æ„Ÿè¯ï¼Œå¹¶ä¸”ç»™å‡ºä¸€ä¸ªè§„åˆ™ â€œä¸€ä¸ªæƒ…æ„Ÿè¯é€šè¿‡ mod ä¾èµ–äºŽä¸€ä¸ªåè¯ï¼Œåˆ™åè¯å¯ä»¥ä½œä¸ºä¸€ä¸ªæ–¹é¢â€ï¼Œé€šè¿‡è¿™ä¸ªè§„åˆ™å¯ä»¥ç›´æŽ¥æå– â€œpictureâ€ ä½œä¸ºä¸€ä¸ªæ–¹é¢ (aspect). åŒç†ï¼Œæˆ‘ä»¬çŸ¥é“ â€œpictureâ€ æ˜¯ä¸€ä¸ªæ–¹é¢ï¼Œåˆ™å¯ä»¥åˆ©ç”¨ç±»ä¼¼çš„è§„åˆ™æå– â€œgreatâ€ ä½œä¸ºæƒ…æ„Ÿè¯ã€‚é€šè¿‡è¿™ç§æ–¹å¼æœ‰ä»¥ä¸‹å››ä¸ªä»»åŠ¡ï¼š åˆ©ç”¨æƒ…æ„Ÿè¯æå–æ–¹é¢ åˆ©ç”¨æ–¹é¢æå–æ–¹é¢ åˆ©ç”¨æå–çš„æ–¹é¢æå–æƒ…æ„Ÿè¯ ä½¿ç”¨ç»™å®šå’Œæå–çš„æ„è§è¯æå–æƒ…æ„Ÿè¯å…¶ä¸­ OA-Rels è¢«ç”¨æ¥ç»™ä»»åŠ¡ 1 å’Œ 3ï¼ŒAA-Rels è¢«ç”¨ä½œä»»åŠ¡ 2 ï¼ŒOO-Rels è¢«ç”¨ä½œä»»åŠ¡ 4ã€‚è¿™å››ä¸ªå­ä»»åŠ¡åˆ†åˆ«å®šä¹‰äº†å››ç±»åž‹è§„åˆ™,å¦‚ä¸‹å›¾è¡¨ä¸­æ‰€ç¤ºï¼š è¡¨ä¸­ o æˆ–è€… a ä¸ºè¦æå–çš„æƒ…æ„Ÿè¯æˆ–æ–¹é¢ (aspect)ï¼Œ{O} æˆ–è€… {A} æ˜¯ç»™å®šæˆ–æå–çš„å·²çŸ¥çš„æƒ…ç»ªè¯æˆ–æ–¹é¢çš„é›†åˆã€‚H ä»£è¡¨ä»»æ„å•è¯ï¼ŒPOS(O(or A))å’Œ O(or A)-Dep ä»£è¡¨ç€ POS æ ‡ç­¾å’Œå•è¯ O(or A) çš„ä¾èµ–å…³ç³»ã€‚{JJ} å’Œ {NN} åˆ†åˆ«æ˜¯æ½œåœ¨çš„æƒ…æ„Ÿè¯å’Œæ–¹é¢çš„ POS æ ‡ç­¾é›†åˆã€‚{JJ} åŒ…å« JJ, JJR, JJS; {NN} åŒ…å« NN å’Œ NNS; {MR} ç”±ä¾èµ–å…³ç³»ç»„æˆï¼ŒåŒ…å«{mod, pnmod, subj, s, obj, obj2, desc}; {CONJ} åªåŒ…å« conj, ç®­å¤´è¡¨ç¤ºä¾èµ–ï¼Œä¾‹å¦‚ï¼šO â†’ O-Dep â†’ A ä»£è¡¨ O é€šè¿‡å…³ç³» O- Dep ä¾èµ–äºŽ A. å…·ä½“æ¥è¯´ï¼ŒR1i ä¸ºä½¿ç”¨æƒ…æ„Ÿè¯ (O) æ¥æå–æ–¹é¢ (a)ï¼ŒR2i ä¸ºä½¿ç”¨æ–¹é¢ (A) æ¥æå–æƒ…æ„Ÿè¯ (O)ï¼ŒR3i ä¸ºä½¿ç”¨æå–å‡ºæ¥çš„æ–¹é¢é›†åˆ (Ai) æ¥æå–æ–¹é¢ (a)ï¼ŒR4i ä¸ºä½¿ç”¨æå–å‡ºæ¥çš„æƒ…æ„Ÿè¯é›†åˆ (Oi) æ¥æå–æƒ…æ„Ÿè¯ (o). è¯¥è¡¨ä¸­çš„æ–¹æ³•æœ€åˆæ˜¯ä¸ºè‹±è¯­è®¾è®¡ï¼Œä½†æ˜¯ä¹Ÿé€‚ç”¨äºŽä¸­æ–‡åœ¨çº¿æ–‡æœ¬è®¨è®ºï¼Œè¿™ç§æ–¹æ³•ä¹Ÿå¯ä»¥ä»…ä½¿ç”¨ä¸€ä¸ªæƒ…æ„Ÿè¯å…¸æ¥æŸ¥æ‰¾æ–¹é¢ã€‚ æ€»ç»“è¯¥æ–‡ç« ä¸ºé€šè¿‡è‡ªå·±ç¿»è¯‘ åŸºäºŽ Aspect çš„æƒ…æ„Ÿåˆ†æž çš„è¿™ä¸€ç« çš„éƒ¨åˆ†å†…å®¹ç†è§£è€Œæ€»ç»“ï¼Œä¹Ÿæ˜¯è‡ªå·±å¯¹çœ‹è¿‡å†…å®¹ä¹‹åŽçš„è®°å½•ï¼Œè°¢è°¢ï¼]]></content>
    </entry>

    
  
  
</search>
